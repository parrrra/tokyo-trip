var vA=Object.defineProperty,_A=Object.defineProperties;var EA=Object.getOwnPropertyDescriptors;var hE=Object.getOwnPropertySymbols;var DA=Object.prototype.hasOwnProperty,IA=Object.prototype.propertyIsEnumerable;var pE=(t,e,n)=>e in t?vA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||={})DA.call(e,n)&&pE(t,n,e[n]);if(hE)for(var n of hE(e))IA.call(e,n)&&pE(t,n,e[n]);return t},z=(t,e)=>_A(t,EA(e));var ot=null,Kc=!1,fh=1,wA=null,pt=Symbol("SIGNAL");function H(t){let e=ot;return ot=t,e}function Yc(){return ot}var Ls={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function js(t){if(Kc)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(t);let e=ot.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ot.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ot.producers,n!==void 0&&n.producer===t)){ot.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ot&&(!r||bA(i,ot)))return;let o=to(ot),s={producer:t,consumer:ot,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ot.producersTail=s,e!==void 0?e.nextProducer=s:ot.producers=s,o&&vE(t,s)}function gE(){fh++}function hh(t){if(!(to(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===fh)){if(!t.producerMustRecompute(t)&&!Jc(t)){dh(t);return}t.producerRecomputeValue(t),dh(t)}}function ph(t){if(t.consumers===void 0)return;let e=Kc;Kc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||CA(r)}}finally{Kc=e}}function gh(){return ot?.consumerAllowSignalWrites!==!1}function CA(t){t.dirty=!0,ph(t),t.consumerMarkedDirty?.(t)}function dh(t){t.dirty=!1,t.lastCleanEpoch=fh}function Bs(t){return t&&mE(t),H(t)}function mE(t){t.producersTail=void 0,t.recomputing=!0}function Zc(t,e){H(e),t&&yE(t)}function yE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(to(t))do n=mh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Jc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(hh(n),r!==n.version))return!0}return!1}function Us(t){if(to(t)){let e=t.producers;for(;e!==void 0;)e=mh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function vE(t,e){let n=t.consumersTail,r=to(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)vE(i.producer,i)}function mh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!to(e)){let o=e.producers;for(;o!==void 0;)o=mh(o)}return n}function to(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function yh(t){wA?.(t)}function bA(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function vh(t,e){return Object.is(t,e)}function Xc(t,e){let n=Object.create(TA);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(hh(n),js(n),n.value===Qc)throw n.error;return n.value};return r[pt]=n,yh(n),r}var uh=Symbol("UNSET"),lh=Symbol("COMPUTING"),Qc=Symbol("ERRORED"),TA=z(N({},Ls),{value:uh,dirty:!0,error:null,equal:vh,kind:"computed",producerMustRecompute(t){return t.value===uh||t.value===lh},producerRecomputeValue(t){if(t.value===lh)throw new Error("");let e=t.value;t.value=lh;let n=Bs(t),r,i=!1;try{r=t.computation(),H(null),i=e!==uh&&e!==Qc&&r!==Qc&&t.equal(e,r)}catch(o){r=Qc,t.error=o}finally{Zc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function SA(){throw new Error}var _E=SA;function EE(t){_E(t)}function _h(t){_E=t}var AA=null;function Eh(t,e){let n=Object.create(eu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>DE(n);return r[pt]=n,yh(n),[r,s=>$s(n,s),s=>IE(n,s)]}function DE(t){return js(t),t.value}function $s(t,e){gh()||EE(t),t.equal(t.value,e)||(t.value=e,MA(t))}function IE(t,e){gh()||EE(t),$s(t,e(t.value))}var eu=z(N({},Ls),{equal:vh,value:void 0,kind:"signal"});function MA(t){t.version++,gE(),ph(t),AA?.(t)}function Dh(t){let e=H(null);try{return t()}finally{H(e)}}function Q(t){return typeof t=="function"}function no(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tu=no(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ye=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Q(r))try{r()}catch(o){e=o instanceof tu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wE(o)}catch(s){e=e??[],s instanceof tu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)wE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hs(n,e)}remove(e){let{_finalizers:n}=this;n&&Hs(n,e),e instanceof t&&e._removeParent(this)}};Ye.EMPTY=(()=>{let t=new Ye;return t.closed=!0,t})();var Ih=Ye.EMPTY;function nu(t){return t instanceof Ye||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function wE(t){Q(t)?t():t.unsubscribe()}var Gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ro={setTimeout(t,e,...n){let{delegate:r}=ro;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ro;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ru(t){ro.setTimeout(()=>{let{onUnhandledError:e}=Gt;if(e)e(t);else throw t})}function zs(){}var CE=wh("C",void 0,void 0);function bE(t){return wh("E",void 0,t)}function TE(t){return wh("N",t,void 0)}function wh(t,e,n){return{kind:t,value:e,error:n}}var Zr=null;function io(t){if(Gt.useDeprecatedSynchronousErrorHandling){let e=!Zr;if(e&&(Zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Zr;if(Zr=null,n)throw r}}else t()}function SE(t){Gt.useDeprecatedSynchronousErrorHandling&&Zr&&(Zr.errorThrown=!0,Zr.error=t)}var Jr=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nu(e)&&e.add(this)):this.destination=xA}static create(e,n,r){return new oo(e,n,r)}next(e){this.isStopped?bh(TE(e),this):this._next(e)}error(e){this.isStopped?bh(bE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bh(CE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},RA=Function.prototype.bind;function Ch(t,e){return RA.call(t,e)}var Th=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){iu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){iu(r)}else iu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){iu(n)}}},oo=class extends Jr{constructor(e,n,r){super();let i;if(Q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ch(e.next,o),error:e.error&&Ch(e.error,o),complete:e.complete&&Ch(e.complete,o)}):i=e}this.destination=new Th(i)}};function iu(t){Gt.useDeprecatedSynchronousErrorHandling?SE(t):ru(t)}function NA(t){throw t}function bh(t,e){let{onStoppedNotification:n}=Gt;n&&ro.setTimeout(()=>n(t,e))}var xA={closed:!0,next:zs,error:NA,complete:zs};var so=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wt(t){return t}function Sh(...t){return Ah(t)}function Ah(t){return t.length===0?Wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=OA(n)?n:new oo(n,r,i);return io(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=AE(r),new r((i,o)=>{let s=new oo({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[so](){return this}pipe(...n){return Ah(n)(this)}toPromise(n){return n=AE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function AE(t){var e;return(e=t??Gt.Promise)!==null&&e!==void 0?e:Promise}function PA(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}function OA(t){return t&&t instanceof Jr||PA(t)&&nu(t)}function kA(t){return Q(t?.lift)}function fe(t){return e=>{if(kA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new Mh(t,e,n,r,i)}var Mh=class extends Jr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ME=no(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ou(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ME}next(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){io(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ih:(this.currentObservers=null,o.push(n),new Ye(()=>{this.currentObservers=null,Hs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new ou(e,n),t})(),ou=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ih}};var Ze=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Je=new ae(t=>t.complete());function RE(t){return t&&Q(t.schedule)}function NE(t){return t[t.length-1]}function su(t){return Q(NE(t))?t.pop():void 0}function vr(t){return RE(NE(t))?t.pop():void 0}function PE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function xE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function OE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(A){return new Promise(function(M,k){o.push([y,A,M,k])>1||u(y,A)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(A){m(o[0][3],A)}}function l(y){y.value instanceof Xr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function kE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xE=="function"?xE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var au=t=>t&&typeof t.length=="number"&&typeof t!="function";function cu(t){return Q(t?.then)}function uu(t){return Q(t[so])}function lu(t){return Symbol.asyncIterator&&Q(t?.[Symbol.asyncIterator])}function du(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fu=FA();function hu(t){return Q(t?.[fu])}function pu(t){return OE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Xr(n.read());if(i)return yield Xr(void 0);yield yield Xr(r)}}finally{n.releaseLock()}})}function gu(t){return Q(t?.getReader)}function Oe(t){if(t instanceof ae)return t;if(t!=null){if(uu(t))return VA(t);if(au(t))return LA(t);if(cu(t))return jA(t);if(lu(t))return FE(t);if(hu(t))return BA(t);if(gu(t))return UA(t)}throw du(t)}function VA(t){return new ae(e=>{let n=t[so]();if(Q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LA(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function jA(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ru)})}function BA(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FE(t){return new ae(e=>{$A(t,e).catch(n=>e.error(n))})}function UA(t){return FE(pu(t))}function $A(t,e){var n,r,i,o;return PE(this,void 0,void 0,function*(){try{for(n=kE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function _t(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mu(t,e=0){return fe((n,r)=>{n.subscribe(he(r,i=>_t(r,t,()=>r.next(i),e),()=>_t(r,t,()=>r.complete(),e),i=>_t(r,t,()=>r.error(i),e)))})}function yu(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function VE(t,e){return Oe(t).pipe(yu(e),mu(e))}function LE(t,e){return Oe(t).pipe(yu(e),mu(e))}function jE(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function BE(t,e){return new ae(n=>{let r;return _t(n,e,()=>{r=t[fu](),_t(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Q(r?.return)&&r.return()})}function vu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{_t(n,e,()=>{let r=t[Symbol.asyncIterator]();_t(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function UE(t,e){return vu(pu(t),e)}function $E(t,e){if(t!=null){if(uu(t))return VE(t,e);if(au(t))return jE(t,e);if(cu(t))return LE(t,e);if(lu(t))return vu(t,e);if(hu(t))return BE(t,e);if(gu(t))return UE(t,e)}throw du(t)}function ke(t,e){return e?$E(t,e):Oe(t)}function re(...t){let e=vr(t);return ke(t,e)}function Rh(t,e){let n=Q(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function _u(t){return!!t&&(t instanceof ae||Q(t.lift)&&Q(t.subscribe))}var ei=no(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function we(t,e){return fe((n,r)=>{let i=0;n.subscribe(he(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:HA}=Array;function zA(t,e){return HA(e)?t(...e):t(e)}function Eu(t){return we(e=>zA(t,e))}var{isArray:qA}=Array,{getPrototypeOf:GA,prototype:WA,keys:KA}=Object;function Du(t){if(t.length===1){let e=t[0];if(qA(e))return{args:e,keys:null};if(QA(e)){let n=KA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QA(t){return t&&typeof t=="object"&&GA(t)===WA}function Iu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Nh(...t){let e=vr(t),n=su(t),{args:r,keys:i}=Du(t);if(r.length===0)return ke([],e);let o=new ae(YA(r,e,i?s=>Iu(i,s):Wt));return n?o.pipe(Eu(n)):o}function YA(t,e,n=Wt){return r=>{HE(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)HE(e,()=>{let l=ke(t[u],e),f=!1;l.subscribe(he(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function HE(t,e,n){t?_t(n,t,e):e()}function zE(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?S(A):u.push(A),S=A=>{o&&e.next(A),l++;let M=!1;Oe(n(A,f++)).subscribe(he(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let k=u.shift();s?_t(e,s,()=>S(k)):S(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(he(e,y,()=>{p=!0,m()})),()=>{c?.()}}function gt(t,e,n=1/0){return Q(e)?gt((r,i)=>we((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>zE(r,i,t,n)))}function qE(t=1/0){return gt(Wt,t)}function GE(){return qE(1)}function ao(...t){return GE()(ke(t,vr(t)))}function qs(t){return new ae(e=>{Oe(t()).subscribe(e)})}function xh(...t){let e=su(t),{args:n,keys:r}=Du(t),i=new ae(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Oe(n[f]).subscribe(he(o,m=>{p||(p=!0,l--),c[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Iu(r,c):c),o.complete())}))}});return e?i.pipe(Eu(e)):i}function Nn(t,e){return fe((n,r)=>{let i=0;n.subscribe(he(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Gs(t){return fe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(he(n,void 0,void 0,s=>{o=Oe(t(s,Gs(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function wu(t,e){return Q(e)?gt(t,e,1):gt(t,1)}function WE(t){return fe((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function xn(t){return t<=0?()=>Je:fe((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function KE(t=ZA){return fe((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZA(){return new ei}function Ph(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Pn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Nn((i,o)=>t(i,o,r)):Wt,xn(1),n?WE(e):KE(()=>new ei))}function Cu(t){return t<=0?()=>Je:fe((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Oh(...t){let e=vr(t);return fe((n,r)=>{(e?ao(t,n,e):ao(t,n)).subscribe(r)})}function On(t,e){return fe((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(he(r,u=>{i?.unsubscribe();let l=0,f=o++;Oe(t(u,f)).subscribe(i=he(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Ws(t){return fe((e,n)=>{Oe(t).subscribe(he(n,()=>n.complete(),zs)),!n.closed&&e.subscribe(n)})}function sn(t,e,n){let r=Q(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wt}var kh;function bu(){return kh}function an(t){let e=kh;return kh=t,e}var QE=Symbol("NotFound");function co(t){return t===QE||t?.name==="\u0275NotFound"}var Ru="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,n){super(Xs(e,n)),this.code=e}};function eM(t){return`NG0${Math.abs(t)}`}function Xs(t,e){return`${eM(t)}${e?": "+e:""}`}function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function eD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Fn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Fn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Yh(t,e){return t?e?`${t} ${e}`:t:e||""}var tM=pe({__forward_ref__:pe});function Vn(t){return t.__forward_ref__=Vn,t.toString=function(){return Fn(this())},t}function Xe(t){return Zh(t)?t():t}function Zh(t){return typeof t=="function"&&t.hasOwnProperty(tM)&&t.__forward_ref__===Vn}function L(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function ea(t){return nM(t,Nu)}function Jh(t){return ea(t)!==null}function nM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function rM(t){let e=t?.[Nu]??null;return e||null}function Vh(t){return t&&t.hasOwnProperty(Su)?t[Su]:null}var Nu=pe({\u0275prov:pe}),Su=pe({\u0275inj:pe}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=L({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xh(t){return t&&!!t.\u0275providers}var ep=pe({\u0275cmp:pe}),tp=pe({\u0275dir:pe}),np=pe({\u0275pipe:pe}),rp=pe({\u0275mod:pe}),Qs=pe({\u0275fac:pe}),ai=pe({__NG_ELEMENT_ID__:pe}),YE=pe({__NG_ENV_ID__:pe});function ip(t){return xu(t,"@NgModule"),t[rp]||null}function Er(t){return xu(t,"@Component"),t[ep]||null}function op(t){return xu(t,"@Directive"),t[tp]||null}function tD(t){return xu(t,"@Pipe"),t[np]||null}function xu(t,e){if(t==null)throw new U(-919,!1)}function ta(t){return typeof t=="string"?t:t==null?"":String(t)}var nD=pe({ngErrorCode:pe}),iM=pe({ngErrorMessage:pe}),oM=pe({ngTokenPath:pe});function sp(t,e){return rD("",-200,e)}function Pu(t,e){throw new U(-201,!1)}function rD(t,e,n){let r=new U(e,t);return r[nD]=e,r[iM]=t,n&&(r[oM]=n),r}function sM(t){return t[nD]}var Lh;function iD(){return Lh}function At(t){let e=Lh;return Lh=t,e}function ap(t,e,n){let r=ea(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Pu(t,"")}var aM={},ti=aM,cM="__NG_DI_FLAG__",jh=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ni(n)||0;try{return this.injector.get(e,r&8?null:ti,r)}catch(i){if(co(i))return i;throw i}}};function uM(t,e=0){let n=bu();if(n===void 0)throw new U(-203,!1);if(n===null)return ap(t,void 0,e);{let r=lM(e),i=n.retrieve(t,r);if(co(i)){if(r.optional)return null;throw i}return i}}function X(t,e=0){return(iD()||uM)(Xe(t),e)}function P(t,e){return X(t,ni(e))}function ni(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lM(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Bh(t){let e=[];for(let n=0;n<t.length;n++){let r=Xe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=dM(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(X(i,o))}else e.push(X(r))}return e}function dM(t){return t[cM]}function ri(t,e){let n=t.hasOwnProperty(Qs);return n?t[Qs]:null}function Ou(t,e){t.forEach(n=>Array.isArray(n)?Ou(n,e):e(n))}function cp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function na(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function sD(t,e,n){let r=lo(t,e);return r>=0?t[r|1]=n:(r=~r,oD(t,r,e,n)),r}function ku(t,e){let n=lo(t,e);if(n>=0)return t[n|1]}function lo(t,e){return fM(t,e,1)}function fM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Dr={},Mt=[],fo=new j(""),up=new j("",-1),lp=new j(""),Ys=class{get(e,n=ti){if(n===ti){let i=rD("",-201);throw i.name="\u0275NotFound",i}return n}};function Fu(t){return{\u0275providers:t}}function aD(...t){return{\u0275providers:dp(!0,t),\u0275fromNgModule:!0}}function dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ou(e,s=>{let c=s;Au(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&cD(i,o),n}function cD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fp(i,o=>{e(o,r)})}}function Au(t,e,n,r){if(t=Xe(t),!t)return!1;let i=null,o=Vh(t),s=!o&&Er(t);if(!o&&!s){let u=t.ngModule;if(o=Vh(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Au(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;Ou(o.imports,f=>{Au(f,e,n,r)&&(l||=[],l.push(f))}),l!==void 0&&cD(l,e)}if(!c){let l=ri(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:lp,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>X(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;fp(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fp(t,e){for(let n of t)Xh(n)&&(n=n.\u0275providers),Array.isArray(n)?fp(n,e):e(n)}var hM=pe({provide:String,useValue:pe});function uD(t){return t!==null&&typeof t=="object"&&hM in t}function pM(t){return!!(t&&t.useExisting)}function gM(t){return!!(t&&t.useFactory)}function ii(t){return typeof t=="function"}function lD(t){return!!t.useClass}var ra=new j(""),Tu={},ZE={},Fh;function ia(){return Fh===void 0&&(Fh=new Ys),Fh}var Be=class{},oi=class extends Be{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,$h(e,s=>this.processProvider(s)),this.records.set(up,uo(void 0,this)),i.has("environment")&&this.records.set(Be,uo(void 0,this));let o=this.records.get(ra);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lp,Mt,{self:!0}))}retrieve(e,n){let r=ni(n)||0;try{return this.get(e,ti,r)}catch(i){if(co(i))return i;throw i}}destroy(){Ks(this),this._destroyed=!0;let e=H(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),H(e)}}onDestroy(e){return Ks(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ks(this);let n=an(this),r=At(void 0),i;try{return e()}finally{an(n),At(r)}}get(e,n=ti,r){if(Ks(this),e.hasOwnProperty(YE))return e[YE](this);let i=ni(r),o,s=an(this),c=At(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=EM(e)&&ea(e);f&&this.injectableDefInScope(f)?l=uo(Uh(e),Tu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ia():this.parent;return n=i&8&&n===ti?null:n,u.get(e,n)}catch(u){let l=sM(u);throw l===-200||l===-201?new U(l,null):u}finally{At(c),an(s)}}resolveInjectorInitializers(){let e=H(null),n=an(this),r=At(void 0),i;try{let o=this.get(fo,Mt,{self:!0});for(let s of o)s()}finally{an(n),At(r),H(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Fn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Xe(e);let n=ii(e)?e:Xe(e&&e.provide),r=yM(e);if(!ii(e)&&e.multi===!0){let i=this.records.get(n);i||(i=uo(void 0,Tu,!0),i.factory=()=>Bh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=H(null);try{if(n.value===ZE)throw sp(Fn(e));return n.value===Tu&&(n.value=ZE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&_M(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{H(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Xe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Uh(t){let e=ea(t),n=e!==null?e.factory:ri(t);if(n!==null)return n;if(t instanceof j)throw new U(204,!1);if(t instanceof Function)return mM(t);throw new U(204,!1)}function mM(t){if(t.length>0)throw new U(204,!1);let n=rM(t);return n!==null?()=>n.factory(t):()=>new t}function yM(t){if(uD(t))return uo(void 0,t.useValue);{let e=hp(t);return uo(e,Tu)}}function hp(t,e,n){let r;if(ii(t)){let i=Xe(t);return ri(i)||Uh(i)}else if(uD(t))r=()=>Xe(t.useValue);else if(gM(t))r=()=>t.useFactory(...Bh(t.deps||[]));else if(pM(t))r=(i,o)=>X(Xe(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Xe(t&&(t.useClass||t.provide));if(vM(t))r=()=>new i(...Bh(t.deps));else return ri(i)||Uh(i)}return r}function Ks(t){if(t.destroyed)throw new U(205,!1)}function uo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vM(t){return!!t.deps}function _M(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function EM(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function $h(t,e){for(let n of t)Array.isArray(n)?$h(n,e):n&&Xh(n)?$h(n.\u0275providers,e):e(n)}function st(t,e){let n;t instanceof oi?(Ks(t),n=t):n=new jh(t);let r,i=an(n),o=At(void 0);try{return e()}finally{an(i),At(o)}}function dD(){return iD()!==void 0||bu()!=null}var Kt=0,q=1,G=2,He=3,Ft=4,Vt=5,ho=6,po=7,Re=8,jn=9,un=10,Ce=11,go=12,pp=13,ci=14,Rt=15,ui=16,li=17,di=18,Bn=19,gp=20,kn=21,Vu=22,oa=23,Nt=24,fi=25,hi=26,et=27,fD=1,mp=6,Ir=7,sa=8,aa=9,Ne=10;function ln(t){return Array.isArray(t)&&typeof t[fD]=="object"}function Qt(t){return Array.isArray(t)&&t[fD]===!0}function yp(t){return(t.flags&4)!==0}function wr(t){return t.componentOffset>-1}function Lu(t){return(t.flags&1)===1}function dn(t){return!!t.template}function mo(t){return(t[G]&512)!==0}function pi(t){return(t[G]&256)===256}var hD="svg",pD="math";function Lt(t){for(;Array.isArray(t);)t=t[Kt];return t}function vp(t,e){return Lt(e[t])}function fn(t,e){return Lt(e[t.index])}function ca(t,e){return t.data[e]}function jt(t,e){let n=e[t];return ln(n)?n:n[Kt]}function ju(t){return(t[G]&128)===128}function gD(t){return Qt(t[He])}function hn(t,e){return e==null?null:t[e]}function _p(t){t[li]=0}function Ep(t){t[G]&1024||(t[G]|=1024,ju(t)&&yo(t))}function mD(t,e){for(;t>0;)e=e[ci],t--;return e}function ua(t){return!!(t[G]&9216||t[Nt]?.dirty)}function Bu(t){t[un].changeDetectionScheduler?.notify(8),t[G]&64&&(t[G]|=1024),ua(t)&&yo(t)}function yo(t){t[un].changeDetectionScheduler?.notify(0);let e=_r(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!ju(e)));)e=_r(e)}function Dp(t,e){if(pi(t))throw new U(911,!1);t[kn]===null&&(t[kn]=[]),t[kn].push(e)}function yD(t,e){if(t[kn]===null)return;let n=t[kn].indexOf(e);n!==-1&&t[kn].splice(n,1)}function _r(t){let e=t[He];return Qt(e)?e[He]:e}function vD(t){return t[po]??=[]}function _D(t){return t.cleanup??=[]}var ee={lFrame:PD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Hh=!1;function ED(){return ee.lFrame.elementDepthCount}function DD(){ee.lFrame.elementDepthCount++}function Ip(){ee.lFrame.elementDepthCount--}function ID(){return ee.bindingsEnabled}function wD(){return ee.skipHydrationRootTNode!==null}function wp(t){return ee.skipHydrationRootTNode===t}function Cp(){ee.skipHydrationRootTNode=null}function ie(){return ee.lFrame.lView}function at(){return ee.lFrame.tView}function Dt(t){return ee.lFrame.contextLView=t,t[Re]}function It(t){return ee.lFrame.contextLView=null,t}function mt(){let t=bp();for(;t!==null&&t.type===64;)t=t.parent;return t}function bp(){return ee.lFrame.currentTNode}function CD(){let t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function vo(t,e){let n=ee.lFrame;n.currentTNode=t,n.isParent=e}function Tp(){return ee.lFrame.isParent}function bD(){ee.lFrame.isParent=!1}function Sp(){return Hh}function Ap(t){let e=Hh;return Hh=t,e}function TD(){return ee.lFrame.bindingIndex}function SD(t){return ee.lFrame.bindingIndex=t}function gi(){return ee.lFrame.bindingIndex++}function Mp(t){let e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AD(){return ee.lFrame.inI18n}function MD(t,e){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,Uu(e)}function RD(){return ee.lFrame.currentDirectiveIndex}function Uu(t){ee.lFrame.currentDirectiveIndex=t}function ND(t){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Rp(t){ee.lFrame.currentQueryIndex=t}function DM(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[Vt]:null}function Np(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=DM(o),i===null||(o=o[ci],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ee.lFrame=xD();return r.currentTNode=e,r.lView=t,!0}function $u(t){let e=xD(),n=t[q];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xD(){let t=ee.lFrame,e=t===null?null:t.child;return e===null?PD(t):e}function PD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function OD(){let t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xp=OD;function Hu(){let t=OD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kD(t){return(ee.lFrame.contextLView=mD(t,ee.lFrame.contextLView))[Re]}function Un(){return ee.lFrame.selectedIndex}function Cr(t){ee.lFrame.selectedIndex=t}function zu(){let t=ee.lFrame;return ca(t.tView,t.selectedIndex)}function FD(){return ee.lFrame.currentNamespace}var VD=!0;function qu(){return VD}function Gu(t){VD=t}function zh(t,e=null,n=null,r){let i=Pp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Pp(t,e=null,n=null,r,i=new Set){let o=[n||Mt,aD(t)];return r=r||(typeof t=="object"?void 0:Fn(t)),new oi(o,e||ia(),r||null,i)}var kt=class t{static THROW_IF_NOT_FOUND=ti;static NULL=new Ys;static create(e,n){if(Array.isArray(e))return zh({name:""},n,e,"");{let r=e.name??"";return zh({name:r},e.parent,e.providers,r)}}static \u0275prov=L({token:t,providedIn:"any",factory:()=>X(up)});static __NG_ELEMENT_ID__=-1},ze=new j(""),pn=(()=>{class t{static __NG_ELEMENT_ID__=IM;static __NG_ENV_ID__=n=>n}return t})(),qh=class extends pn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return pi(this._lView)}onDestroy(e){let n=this._lView;return Dp(n,e),()=>yD(n,e)}};function IM(){return new qh(ie())}var LD=!1,jD=new j(""),br=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ze(!1);debugTaskTracker=P(jD,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:t,providedIn:"root",factory:()=>new t})}return t})(),Gh=class extends $e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,dD()&&(this.destroyRef=P(pn,{optional:!0})??void 0,this.pendingTasks=P(br,{optional:!0})??void 0)}emit(e){let n=H(null);try{super.next(e)}finally{H(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ye&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ie=Gh;function Mu(...t){}function Op(t){let e,n;function r(){t=Mu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function BD(t){return queueMicrotask(()=>t()),()=>{t=Mu}}var kp="isAngularZone",Zs=kp+"_ID",wM=0,Et=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ie(!1);onMicrotaskEmpty=new Ie(!1);onStable=new Ie(!1);onError=new Ie(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=LD}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,TM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CM,Mu,Mu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},CM={};function Fp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Op(()=>{t.callbackScheduled=!1,Wh(t),t.isCheckStableRunning=!0,Fp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Wh(t)}function TM(t){let e=()=>{bM(t)},n=wM++;t._inner=t._inner.fork({name:"angular",properties:{[kp]:!0,[Zs]:n,[Zs+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(SM(u))return r.invokeTask(o,s,c,u);try{return JE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),XE(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return JE(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!AM(u)&&e(),XE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Wh(t),Fp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Wh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function JE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function XE(t){t._nesting--,Fp(t)}var Js=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ie;onMicrotaskEmpty=new Ie;onStable=new Ie;onError=new Ie;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function SM(t){return UD(t,"__ignore_ng_zone__")}function AM(t){return UD(t,"__scheduler_tick__")}function UD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var cn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},$n=new j("",{factory:()=>{let t=P(Et),e=P(Be),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(cn),n.handleError(r))})}}}),$D={provide:fo,useValue:()=>{let t=P(cn,{optional:!0})},multi:!0};function tt(t,e){let[n,r,i]=Eh(t,e?.equal),o=n,s=o[pt];return o.set=r,o.update=i,o.asReadonly=HD.bind(o),o}function HD(){let t=this[pt];if(t.readonlyFn===void 0){let e=()=>this();e[pt]=t,t.readonlyFn=e}return t.readonlyFn}var Wu=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=MM}return t})();function MM(){return new Wu(ie(),mt())}var si=class{},la=new j("",{factory:()=>!0});var Vp=new j("");var Lp=(()=>{class t{static \u0275prov=L({token:t,providedIn:"root",factory:()=>new Kh})}return t})(),Kh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Qh=class{[pt];constructor(e){this[pt]=e}destroy(){this[pt].destroy()}};function ct(t){return Dh(t)}function va(t){return{toString:t}.toString()}function jM(t){return typeof t=="function"}function _I(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Xu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Tr=(()=>{let t=()=>EI;return t.ngInherit=!0,t})();function EI(t){return t.type.prototype.ngOnChanges&&(t.setInput=UM),BM}function BM(){let t=II(this),e=t?.current;if(e){let n=t.previous;if(n===Dr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function UM(t,e,n,r,i){let o=this.declaredInputs[r],s=II(t)||$M(t,{previous:Dr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new Xu(l&&l.currentValue,n,u===Dr),_I(t,e,i,n)}var DI="__ngSimpleChanges__";function II(t){return t[DI]||null}function $M(t,e){return t[DI]=e}var zD=[];var ge=function(t,e=null,n){for(let r=0;r<zD.length;r++){let i=zD[r];i(t,e,n)}},ce=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ce||{});function HM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=EI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function zM(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Qu(t,e,n){wI(t,e,3,n)}function Yu(t,e,n,r){(t[G]&3)===n&&wI(t,e,n,r)}function jp(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function wI(t,e,n,r){let i=r!==void 0?t[li]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[li]+=65536),(c<o||o==-1)&&(qM(t,n,e,u),t[li]=(t[li]&4294901760)+u+2),u++}function qD(t,e){ge(ce.LifecycleHookStart,t,e);let n=H(null);try{e.call(t)}finally{H(n),ge(ce.LifecycleHookEnd,t,e)}}function qM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[G]>>14<t[li]>>16&&(t[G]&3)===e&&(t[G]+=16384,qD(c,o)):qD(c,o)}var Eo=-1,yi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function GM(t){return(t.flags&8)!==0}function WM(t){return(t.flags&16)!==0}function KM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];YM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function QM(t){return t===3||t===4||t===6}function YM(t){return t.charCodeAt(0)===64}function Do(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?GD(t,n,i,null,e[++r]):GD(t,n,i,null,null))}}return t}function GD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function CI(t){return t!==Eo}function el(t){return t&32767}function ZM(t){return t>>16}function tl(t,e){let n=ZM(t),r=e;for(;n>0;)r=r[ci],n--;return r}var Qp=!0;function WD(t){let e=Qp;return Qp=t,e}var JM=256,bI=JM-1,TI=5,XM=0,gn={};function eR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ai)&&(r=n[ai]),r==null&&(r=n[ai]=XM++);let i=r&bI,o=1<<i;e.data[t+(i>>TI)]|=o}function nl(t,e){let n=SI(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,Bp(r.data,t),Bp(e,null),Bp(r.blueprint,null));let i=mg(t,e),o=t.injectorIndex;if(CI(i)){let s=el(i),c=tl(i,e),u=c[q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Bp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function SI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=xI(i),r===null)return Eo;if(n++,i=i[ci],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Eo}function Yp(t,e,n){eR(t,e,n)}function AI(t,e,n){if(n&8||t!==void 0)return t;Pu(e,"NodeInjector")}function MI(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[jn],o=At(void 0);try{return i?i.get(e,r,n&8):ap(e,r,n&8)}finally{At(o)}}return AI(r,e,n)}function RI(t,e,n,r=0,i){if(t!==null){if(e[G]&2048&&!(r&2)){let s=oR(t,e,n,r,gn);if(s!==gn)return s}let o=NI(t,e,n,r,gn);if(o!==gn)return o}return MI(e,n,r,i)}function NI(t,e,n,r,i){let o=rR(n);if(typeof o=="function"){if(!Np(e,t,r))return r&1?AI(i,n,r):MI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Pu(n);else return s}finally{xp()}}else if(typeof o=="number"){let s=null,c=SI(t,e),u=Eo,l=r&1?e[Rt][Vt]:null;for((c===-1||r&4)&&(u=c===-1?mg(t,e):e[c+8],u===Eo||!QD(r,!1)?c=-1:(s=e[q],c=el(u),e=tl(u,e)));c!==-1;){let f=e[q];if(KD(o,c,f.data)){let p=tR(c,e,n,s,r,l);if(p!==gn)return p}u=e[c+8],u!==Eo&&QD(r,e[q].data[c+8]===l)&&KD(o,c,e)?(s=f,c=el(u),e=tl(u,e)):c=-1}}return i}function tR(t,e,n,r,i,o){let s=e[q],c=s.data[t+8],u=r==null?wr(c)&&Qp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=nR(c,s,n,u,l);return f!==null?rl(e,s,f,c,i):gn}function nR(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&dn(y)&&y.type===n)return u}return null}function rl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof yi){let c=o;if(c.resolving)throw sp("");let u=WD(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],f,p=c.injectImpl?At(c.injectImpl):null,m=Np(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&HM(n,s[n],e)}finally{p!==null&&At(p),WD(u),c.resolving=!1,xp()}}return o}function rR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ai)?t[ai]:void 0;return typeof e=="number"?e>=0?e&bI:iR:e}function KD(t,e,n){let r=1<<t;return!!(n[e+(t>>TI)]&r)}function QD(t,e){return!(t&2)&&!(t&1&&e)}var mi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return RI(this._tNode,this._lView,e,ni(r),n)}};function iR(){return new mi(mt(),ie())}function Sr(t){return va(()=>{let e=t.prototype.constructor,n=e[Qs]||Zp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Qs]||Zp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Zp(t){return Zh(t)?()=>{let e=Zp(Xe(t));return e&&e()}:ri(t)}function oR(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[G]&2048&&!mo(s);){let c=NI(o,s,n,r|2,gn);if(c!==gn)return c;let u=o.parent;if(!u){let l=s[gp];if(l){let f=l.get(n,gn,r);if(f!==gn)return f}u=xI(s),s=s[ci]}o=u}return i}function xI(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[Vt]:null}function sR(){return yg(mt(),ie())}function yg(t,e){return new Ar(fn(t,e))}var Ar=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=sR}return t})();function PI(t){return(t.flags&128)===128}var vg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(vg||{}),OI=new Map,aR=0;function cR(){return aR++}function uR(t){OI.set(t[Bn],t)}function Jp(t){OI.delete(t[Bn])}var YD="__ngContext__";function Io(t,e){ln(e)?(t[YD]=e[Bn],uR(e)):t[YD]=e}function kI(t){return VI(t[go])}function FI(t){return VI(t[Ft])}function VI(t){for(;t!==null&&!Qt(t);)t=t[Ft];return t}var lR;function _g(t){lR=t}var yl=new j("",{factory:()=>dR}),dR="ng";var vl=new j(""),_a=new j("",{providedIn:"platform",factory:()=>"unknown"});var _l=new j("",{factory:()=>P(ze).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LI="r";var jI="di";var BI=!1,UI=new j("",{factory:()=>BI});var fR=(t,e,n,r)=>{};function hR(t,e,n,r){fR(t,e,n,r)}function Eg(t){return(t.flags&32)===32}var pR=()=>null;function $I(t,e,n=!1){return pR(t,e,n)}function HI(t,e){let n=t.contentQueries;if(n!==null){let r=H(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Rp(o),c.contentQueries(2,e[s],s)}}}finally{H(r)}}}function Xp(t,e,n){Rp(0);let r=H(null);try{e(t,n)}finally{H(r)}}function zI(t,e,n){if(yp(e)){let r=H(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{H(r)}}}var Zt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Zt||{});var il=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ru})`}};function Dg(t){return t instanceof il?t.changingThisBreaksApplicationSecurity:t}function qI(t,e){let n=GI(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ru})`)}return n===e}function GI(t){return t instanceof il&&t.getTypeName()||null}var gR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function WI(t){return t=String(t),t.match(gR)?t:"unsafe:"+t}function mR(t,e){return t.createText(e)}function yR(t,e,n){t.setValue(e,n)}function KI(t,e,n){return t.createElement(e,n)}function ol(t,e,n,r,i){t.insertBefore(e,n,r,i)}function QI(t,e,n){t.appendChild(e,n)}function ZD(t,e,n,r,i){r!==null?ol(t,e,n,r,i):QI(t,e,n)}function YI(t,e,n,r){t.removeChild(null,e,n,r)}function vR(t,e,n){t.setAttribute(e,"style",n)}function _R(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&KM(t,e,r),i!==null&&_R(t,e,i),o!==null&&vR(t,e,o)}var Ig=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Ig||{});function wg(t){let e=ER();return e?e.sanitize(Ig.URL,t)||"":qI(t,"URL")?Dg(t):WI(ta(t))}function ER(){let t=ie();return t&&t[un].sanitizer}function JI(t){return t instanceof Function?t():t}function DR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var XI="ng-template";function IR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&DR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Cg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Cg(t){return t.type===4&&t.value!==XI}function wR(t,e,n){let r=t.type===4&&!n?XI:t.value;return e===r}function CR(t,e,n){let r=4,i=t.attrs,o=i!==null?SR(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Yt(r)&&!Yt(u))return!1;if(s&&Yt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!wR(t,u,n)||u===""&&e.length===1){if(Yt(r))return!1;s=!0}}else if(r&8){if(i===null||!IR(t,i,u,n)){if(Yt(r))return!1;s=!0}}else{let l=e[++c],f=bR(u,i,Cg(t),n);if(f===-1){if(Yt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Yt(r))return!1;s=!0}}}}return Yt(r)||s}function Yt(t){return(t&1)===0}function bR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return AR(e,t)}function TR(t,e,n=!1){for(let r=0;r<e.length;r++)if(CR(t,e[r],n))return!0;return!1}function SR(t){for(let e=0;e<t.length;e++){let n=t[e];if(QM(n))return e}return t.length}function AR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function JD(t,e){return t?":not("+e.trim()+")":e}function MR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Yt(s)&&(e+=JD(o,i),i=""),r=s,o=o||!Yt(r);n++}return i!==""&&(e+=JD(o,i)),e}function RR(t){return t.map(MR).join(",")}function NR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Yt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Jt={};function bg(t,e,n,r,i,o,s,c,u,l,f){let p=et+r,m=p+i,y=xR(p,m),S=typeof l=="function"?l():l;return y[q]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function xR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jt);return n}function PR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=bg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Tg(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[Kt]=i,p[G]=r|4|128|8|64|1024,(l!==null||t&&t[G]&2048)&&(p[G]|=2048),_p(p),p[He]=p[ci]=t,p[Re]=n,p[un]=s||t&&t[un],p[Ce]=c||t&&t[Ce],p[jn]=u||t&&t[jn]||null,p[Vt]=o,p[Bn]=cR(),p[ho]=f,p[gp]=l,p[Rt]=e.type==2?t[Rt]:p,p}function OR(t,e,n){let r=fn(e,t),i=PR(n),o=t[un].rendererFactory,s=Sg(t,Tg(t,i,null,ew(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function ew(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function tw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Sg(t,e){return t[go]?t[pp][Ft]=e:t[go]=e,t[pp]=e,e}function Ee(t=1){nw(at(),ie(),Un()+t,!1)}function nw(t,e,n,r){if(!r)if((e[G]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Qu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yu(e,o,0,n)}Cr(n)}var El=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(El||{});function eg(t,e,n,r){let i=H(null);try{let[o,s,c]=t.inputs[n],u=null;(s&El.SignalBased)!==0&&(u=e[o][pt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):_I(e,u,o,r)}finally{H(i)}}var Hn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Hn||{}),kR;function Ag(t,e){return kR(t,e)}var vi=new Set,Dl=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Dl||{}),Ii=new j(""),XD=new Set;function Mr(t){XD.has(t)||(XD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Mg=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:t,providedIn:"root",factory:()=>new t})}return t})(),rw=[0,1,2,3],iw=(()=>{class t{ngZone=P(Et);scheduler=P(si);errorHandler=P(cn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Ii,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ge(ce.AfterRenderHooksStart),this.executing=!0;for(let r of rw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ge(ce.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[fi]??=[]).push(n),yo(r),r[G]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Dl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=L({token:t,providedIn:"root",factory:()=>new t})}return t})(),sl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[fi];e&&(this.view[fi]=e.filter(n=>n!==this))}};function Ea(t,e){let n=e?.injector??P(kt);return Mr("NgAfterNextRender"),VR(t,n,e,!0)}function FR(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function VR(t,e,n,r){let i=e.get(Mg);i.impl??=e.get(iw);let o=e.get(Ii,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(pn):null,c=e.get(Wu,null,{optional:!0}),u=new sl(i.impl,FR(t),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var ow=new j("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(Be)})});function sw(t,e,n){let r=t.get(ow);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function LR(t,e){let n=t.get(ow);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function jR(t,e){for(let[n,r]of e)sw(t,r.animateFns)}function eI(t,e,n,r){let i=t?.[hi]?.enter;e!==null&&i&&i.has(n.index)&&jR(r,i)}function _o(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;Qt(i)?u=i:ln(i)&&(l=!0,i=i[Kt]);let f=Lt(i);t===0&&r!==null?(eI(c,r,o,n),s==null?QI(e,r,f):ol(e,r,f,s||null,!0)):t===1&&r!==null?(eI(c,r,o,n),ol(e,r,f,s||null,!0)):t===2?tI(c,o,n,p=>{YI(e,f,l,p)}):t===3&&tI(c,o,n,()=>{e.destroyNode(f)}),u!=null&&JR(e,t,n,u,o,r,s)}}function BR(t,e){aw(t,e),e[Kt]=null,e[Vt]=null}function UR(t,e,n,r,i,o){r[Kt]=i,r[Vt]=e,wl(t,r,n,1,i,o)}function aw(t,e){e[un].changeDetectionScheduler?.notify(9),wl(t,e,e[Ce],2,null,null)}function $R(t){let e=t[go];if(!e)return Up(t[q],t);for(;e;){let n=null;if(ln(e))n=e[go];else{let r=e[Ne];r&&(n=r)}if(!n){for(;e&&!e[Ft]&&e!==t;)ln(e)&&Up(e[q],e),e=e[He];e===null&&(e=t),ln(e)&&Up(e[q],e),n=e&&e[Ft]}e=n}}function Rg(t,e){let n=t[aa],r=n.indexOf(e);n.splice(r,1)}function Il(t,e){if(pi(e))return;let n=e[Ce];n.destroyNode&&wl(t,e,n,3,null,null),$R(e)}function Up(t,e){if(pi(e))return;let n=H(null);try{e[G]&=-129,e[G]|=256,e[Nt]&&Us(e[Nt]),qR(t,e),zR(t,e),e[q].type===1&&e[Ce].destroy();let r=e[ui];if(r!==null&&Qt(e[He])){r!==e[He]&&Rg(r,e);let i=e[di];i!==null&&i.detachView(t)}Jp(e)}finally{H(n)}}function tI(t,e,n,r){let i=t?.[hi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&vi.add(t[Bn]),sw(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),HR(t,r)}else t&&vi.delete(t[Bn]),r(!1)},i)}function HR(t,e){let n=t[hi]?.running;if(n){n.then(()=>{t[hi].running=void 0,vi.delete(t[Bn]),e(!0)});return}e(!1)}function zR(t,e){let n=t.cleanup,r=e[po];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[po]=null);let i=e[kn];if(i!==null){e[kn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[oa];if(o!==null){e[oa]=null;for(let s of o)s.destroy()}}function qR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof yi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ge(ce.LifecycleHookStart,c,u);try{u.call(c)}finally{ge(ce.LifecycleHookEnd,c,u)}}else{ge(ce.LifecycleHookStart,i,o);try{o.call(i)}finally{ge(ce.LifecycleHookEnd,i,o)}}}}}function GR(t,e,n){return WR(t,e.parent,n)}function WR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Kt];if(wr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Zt.None||i===Zt.Emulated)return null}return fn(r,n)}function KR(t,e,n){return YR(t,e,n)}function QR(t,e,n){return t.type&40?fn(t,n):null}var YR=QR,nI;function Ng(t,e,n,r){let i=GR(t,r,e),o=e[Ce],s=r.parent||e[Vt],c=KR(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ZD(o,i,n[u],c,!1);else ZD(o,i,n,c,!1);nI!==void 0&&nI(o,r,e,n,i)}function da(t,e){if(e!==null){let n=e.type;if(n&3)return fn(e,t);if(n&4)return tg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return da(t,r);{let i=t[e.index];return Qt(i)?tg(-1,i):Lt(i)}}else{if(n&128)return da(t,e.next);if(n&32)return Ag(e,t)()||Lt(t[e.index]);{let r=cw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_r(t[Rt]);return da(i,r)}else return da(t,e.next)}}}return null}function cw(t,e){if(e!==null){let r=t[Rt][Vt],i=e.projection;return r.projection[i]}return null}function tg(t,e){let n=Ne+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return da(r,i)}return e[Ir]}function xg(t,e,n,r,i,o,s){for(;n!=null;){let c=r[jn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Io(Lt(u),r),n.flags|=2),!Eg(n))if(l&8)xg(t,e,n.child,r,i,o,!1),_o(e,t,c,i,u,n,o,r);else if(l&32){let f=Ag(n,r),p;for(;p=f();)_o(e,t,c,i,p,n,o,r);_o(e,t,c,i,u,n,o,r)}else l&16?ZR(t,e,r,n,i,o):_o(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function wl(t,e,n,r,i,o){xg(n,r,t.firstChild,e,i,o,!1)}function ZR(t,e,n,r,i,o){let s=n[Rt],u=s[Vt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];_o(e,t,n[jn],i,f,r,o,n)}else{let l=u,f=s[He];PI(r)&&(l.flags|=128),xg(t,e,l,f,i,o,!0)}}function JR(t,e,n,r,i,o,s){let c=r[Ir],u=Lt(r);c!==u&&_o(e,t,n,o,c,i,s);for(let l=Ne;l<r.length;l++){let f=r[l];wl(f[q],f,t,e,o,c)}}function XR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Hn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hn.Important),t.setStyle(n,r,i,o))}}function uw(t,e,n,r,i){let o=Un(),s=r&2;try{Cr(-1),s&&e.length>et&&nw(t,e,et,!1);let c=s?ce.TemplateUpdateStart:ce.TemplateCreateStart;ge(c,i,n),n(r,i)}finally{Cr(o);let c=s?ce.TemplateUpdateEnd:ce.TemplateCreateEnd;ge(c,i,n)}}function lw(t,e,n){oN(t,e,n),(n.flags&64)===64&&sN(t,e,n)}function Pg(t,e,n=fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function eN(t,e,n,r){let o=r.get(UI,BI)||n===Zt.ShadowDom||n===Zt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return tN(s),s}function tN(t){nN(t)}var nN=()=>null;function rN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dw(t,e,n,r,i,o){let s=e[q];if(Og(t,s,e,n,r)){wr(t)&&iN(e,t.index);return}t.type&3&&(n=rN(n)),fw(t,e,n,r,i,o)}function fw(t,e,n,r,i,o){if(t.type&3){let s=fn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function iN(t,e){let n=jt(e,t);n[G]&16||(n[G]|=64)}function oN(t,e,n){let r=n.directiveStart,i=n.directiveEnd;wr(n)&&OR(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||nl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=rl(e,t,s,n);if(Io(u,e),o!==null&&uN(e,s-r,u,c,n,o),dn(c)){let l=jt(n.index,e);l[Re]=rl(e,t,s,n)}}}function sN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=RD();try{Cr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Uu(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&aN(u,l)}}finally{Cr(-1),Uu(s)}}function aN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function cN(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];TR(e,o.selectors,!1)&&(r??=[],dn(o)?r.unshift(o):r.push(o))}return r}function uN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];eg(r,n,u,l)}}function hw(t,e,n,r,i){let o=et+n,s=e[q],c=i(s,e,t,r,n);e[o]=c,vo(t,!0);let u=t.type===2;return u?(ZI(e[Ce],c,t),(ED()===0||Lu(t))&&Io(c,e),DD()):Io(c,e),qu()&&(!u||!Eg(t))&&Ng(s,e,c,t),t}function pw(t){let e=t;return Tp()?bD():(e=e.parent,vo(e,!1)),e}function lN(t,e){let n=t[jn];if(!n)return;let r;try{r=n.get($n,null)}catch{r=null}r?.(e)}function Og(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];eg(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];eg(f,l,r,i),c=!0}return c}function dN(t,e){let n=jt(e,t),r=n[q];fN(r,n);let i=n[Kt];i!==null&&n[ho]===null&&(n[ho]=$I(i,n[jn])),ge(ce.ComponentStart);try{kg(r,n,n[Re])}finally{ge(ce.ComponentEnd,n[Re])}}function fN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function kg(t,e,n){$u(e);try{let r=t.viewQuery;r!==null&&Xp(1,r,n);let i=t.template;i!==null&&uw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[di]?.finishViewCreation(t),t.staticContentQueries&&HI(t,e),t.staticViewQueries&&Xp(2,t.viewQuery,n);let o=t.components;o!==null&&hN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,Hu()}}function hN(t,e){for(let n=0;n<e.length;n++)dN(t,e[n])}function Fg(t,e,n,r){let i=H(null);try{let o=e.tView,c=t[G]&4096?4096:16,u=Tg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ui]=l;let f=t[di];return f!==null&&(u[di]=f.createEmbeddedView(o)),kg(o,u,n),u}finally{H(i)}}function ha(t,e){return!e||e.firstChild===null||PI(t)}function pa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Lt(o)),Qt(o)&&gw(o,r);let s=n.type;if(s&8)pa(t,e,n.child,r);else if(s&32){let c=Ag(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=cw(e,n);if(Array.isArray(c))r.push(...c);else{let u=_r(e[Rt]);pa(u[q],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function gw(t,e){for(let n=Ne;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&pa(r[q],r,i,e)}t[Ir]!==t[Kt]&&e.push(t[Ir])}function mw(t){if(t[fi]!==null){for(let e of t[fi])e.impl.addSequence(e);t[fi].length=0}}var yw=[];function pN(t){return t[Nt]??gN(t)}function gN(t){let e=yw.pop()??Object.create(yN);return e.lView=t,e}function mN(t){t.lView[Nt]!==t&&(t.lView=null,yw.push(t))}var yN=z(N({},Ls),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{yo(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function vN(t){let e=t[Nt]??Object.create(_N);return e.lView=t,e}var _N=z(N({},Ls),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=_r(t.lView);for(;e&&!vw(e[q]);)e=_r(e);e&&Ep(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function vw(t){return t.type!==2}function _w(t){if(t[oa]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[oa])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[G]&8192)}}var EN=100;function Ew(t,e=0){let r=t[un].rendererFactory,i=!1;i||r.begin?.();try{DN(t,e)}finally{i||r.end?.()}}function DN(t,e){let n=Sp();try{Ap(!0),ng(t,e);let r=0;for(;ua(t);){if(r===EN)throw new U(103,!1);r++,ng(t,1)}}finally{Ap(n)}}function IN(t,e,n,r){if(pi(e))return;let i=e[G],o=!1,s=!1;$u(e);let c=!0,u=null,l=null;o||(vw(t)?(l=pN(e),u=Bs(l)):Yc()===null?(c=!1,l=vN(e),u=Bs(l)):e[Nt]&&(Us(e[Nt]),e[Nt]=null));try{_p(e),SD(t.bindingStartIndex),n!==null&&uw(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Qu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Yu(e,y,0,null),jp(e,0)}if(s||wN(e),_w(e),Dw(e,0),t.contentQueries!==null&&HI(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Qu(e,y)}else{let y=t.contentHooks;y!==null&&Yu(e,y,1),jp(e,1)}bN(t,e);let p=t.components;p!==null&&ww(e,p,0);let m=t.viewQuery;if(m!==null&&Xp(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Qu(e,y)}else{let y=t.viewHooks;y!==null&&Yu(e,y,2),jp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Vu]){for(let y of e[Vu])y();e[Vu]=null}o||(mw(e),e[G]&=-73)}catch(f){throw o||yo(e),f}finally{l!==null&&(Zc(l,u),c&&mN(l)),Hu()}}function Dw(t,e){for(let n=kI(t);n!==null;n=FI(n))for(let r=Ne;r<n.length;r++){let i=n[r];Iw(i,e)}}function wN(t){for(let e=kI(t);e!==null;e=FI(e)){if(!(e[G]&2))continue;let n=e[aa];for(let r=0;r<n.length;r++){let i=n[r];Ep(i)}}}function CN(t,e,n){ge(ce.ComponentStart);let r=jt(e,t);try{Iw(r,n)}finally{ge(ce.ComponentEnd,r[Re])}}function Iw(t,e){ju(t)&&ng(t,e)}function ng(t,e){let r=t[q],i=t[G],o=t[Nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Jc(o)),s||=!1,o&&(o.dirty=!1),t[G]&=-9217,s)IN(r,t,r.template,t[Re]);else if(i&8192){let c=H(null);try{_w(t),Dw(t,1);let u=r.components;u!==null&&ww(t,u,1),mw(t)}finally{H(c)}}}function ww(t,e,n){for(let r=0;r<e.length;r++)CN(t,e[r],n)}function bN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Cr(~i);else{let o=i,s=n[++r],c=n[++r];MD(s,o);let u=e[o];ge(ce.HostBindingsUpdateStart,u);try{c(2,u)}finally{ge(ce.HostBindingsUpdateEnd,u)}}}}finally{Cr(-1)}}function Vg(t,e){let n=Sp()?64:1088;for(t[un].changeDetectionScheduler?.notify(e);t;){t[G]|=n;let r=_r(t);if(mo(t)&&!r)return t;t=r}return null}function Cw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function bw(t,e){let n=Ne+e;if(n<t.length)return t[n]}function Cl(t,e,n,r=!0){let i=e[q];if(TN(i,e,t,n),r){let s=tg(n,t),c=e[Ce],u=c.parentNode(t[Ir]);u!==null&&UR(i,t[Vt],c,e,u,s)}let o=e[ho];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Tw(t,e){let n=ga(t,e);return n!==void 0&&Il(n[q],n),n}function ga(t,e){if(t.length<=Ne)return;let n=Ne+e,r=t[n];if(r){let i=r[ui];i!==null&&i!==t&&Rg(i,r),e>0&&(t[n-1][Ft]=r[Ft]);let o=na(t,Ne+e);BR(r[q],r);let s=o[di];s!==null&&s.detachView(o[q]),r[He]=null,r[Ft]=null,r[G]&=-129}return r}function TN(t,e,n,r){let i=Ne+r,o=n.length;r>0&&(n[i-1][Ft]=e),r<o-Ne?(e[Ft]=n[i],cp(n,Ne+r,e)):(n.push(e),e[Ft]=null),e[He]=n;let s=e[ui];s!==null&&n!==s&&Sw(s,e);let c=e[di];c!==null&&c.insertView(t),Bu(e),e[G]|=128}function Sw(t,e){let n=t[aa],r=e[He];if(ln(r))t[G]|=2;else{let i=r[He][Rt];e[Rt]!==i&&(t[G]|=2)}n===null?t[aa]=[e]:n.push(e)}var _i=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[q];return pa(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Re]}set context(e){this._lView[Re]=e}get destroyed(){return pi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[He];if(Qt(e)){let n=e[sa],r=n?n.indexOf(this):-1;r>-1&&(ga(e,r),na(n,r))}this._attachedToViewContainer=!1}Il(this._lView[q],this._lView)}onDestroy(e){Dp(this._lView,e)}markForCheck(){Vg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[G]&=-129}reattach(){Bu(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,Ew(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=mo(this._lView),n=this._lView[ui];n!==null&&!e&&Rg(n,this._lView),aw(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=mo(this._lView),r=this._lView[ui];r!==null&&!n&&Sw(r,this._lView),Bu(this._lView)}};function bl(t,e,n,r,i){let o=t.data[e];if(o===null)o=SN(t,e,n,r,i),AD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=CD();o.injectorIndex=s===null?-1:s.injectorIndex}return vo(o,!0),o}function SN(t,e,n,r,i){let o=bp(),s=Tp(),c=s?o:o&&o.parent,u=t.data[e]=MN(t,c,n,e,r,i);return AN(t,u,o,s),u}function AN(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function MN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return wD()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function RN(t){let e=t[mp]??[],r=t[He][Ce],i=[];for(let o of e)o.data[jI]!==void 0?i.push(o):NN(o,r);t[mp]=i}function NN(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[LI];for(;n<i;){let o=r.nextSibling;YI(e,r,!1),r=o,n++}}}var xN=()=>null,PN=()=>null;function rg(t,e){return xN(t,e)}function Aw(t,e,n){return PN(t,e,n)}var Mw=class{},Tl=class{},ig=class{resolveComponentFactory(e){throw new U(917,!1)}},Da=class{static NULL=new ig},Ei=class{},wi=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>ON()}return t})();function ON(){let t=ie(),e=mt(),n=jt(e.index,t);return(ln(n)?n:t)[Ce]}var Rw=(()=>{class t{static \u0275prov=L({token:t,providedIn:"root",factory:()=>null})}return t})();var Zu={},og=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Zu,r);return i!==Zu||n===Zu?i:this.parentInjector.get(e,n,r)}};function al(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Yh(i,c);else if(o==2){let u=c,l=e[++s];r=Yh(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ve(t,e=0){let n=ie();if(n===null)return X(t,e);let r=mt();return RI(r,n,Xe(t),e)}function kN(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}LN(t,e,n,c,o,u,l)}o!==null&&r!==null&&FN(n,r,o)}function FN(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function VN(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function LN(t,e,n,r,i,o,s){let c=r.length,u=null;for(let m=0;m<c;m++){let y=r[m];u===null&&dn(y)&&(u=y,VN(t,n,m)),Yp(nl(n,e),t,y.type)}zN(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=tw(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Do(n.mergedAttrs,y.hostAttrs),BN(t,n,e,p,y),HN(p,y,i),s!==null&&s.has(y)){let[A,M]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,M+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}jN(t,n,o)}function jN(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))rI(0,e,i,r),rI(1,e,i,r),oI(e,r,!1);else{let o=n.get(i);iI(0,e,o,r),iI(1,e,o,r),oI(e,r,!0)}}}function rI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Nw(e,o)}}function iI(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Nw(e,s)}}function Nw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function oI(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Cg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function BN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ri(i.type,!0)),s=new yi(o,dn(i),ve,null);t.blueprint[r]=s,n[r]=s,UN(t,e,r,tw(t,n,i.hostVars,Jt),i)}function UN(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;$N(s)!=c&&s.push(c),s.push(n,r,o)}}function $N(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function HN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;dn(e)&&(n[""]=t)}}function zN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xw(t,e,n,r,i,o,s,c){let u=e[q],l=u.consts,f=hn(l,s),p=bl(u,t,n,r,f);return o&&kN(u,e,p,hn(l,c),i),p.mergedAttrs=Do(p.mergedAttrs,p.attrs),p.attrs!==null&&al(p,p.attrs,!1),p.mergedAttrs!==null&&al(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Pw(t,e){zM(t,e),yp(e)&&t.queries.elementEnd(e)}function qN(t,e,n,r,i,o){let s=e.consts,c=hn(s,i),u=bl(e,t,n,r,c);if(u.mergedAttrs=Do(u.mergedAttrs,u.attrs),o!=null){let l=hn(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&al(u,u.attrs,!1),u.mergedAttrs!==null&&al(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function zn(t,e,n){if(n===Jt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function GN(t,e,n,r){let i=zn(t,e,n);return zn(t,e+1,r)||i}function Ju(t,e,n){return function r(i){let o=wr(t)?jt(t.index,e):e;Vg(o,5);let s=e[Re],c=sI(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=sI(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function sI(t,e,n,r){let i=H(null);try{return ge(ce.OutputStart,e,n),n(r)!==!1}catch(o){return lN(t,o),!1}finally{ge(ce.OutputEnd,e,n),H(i)}}function Ow(t,e,n,r,i,o,s,c){let u=Lu(t),l=!1,f=null;if(!r&&u&&(f=KN(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=fn(t,n),m=r?r(p):p;hR(n,m,o,c);let y=i.listen(m,o,c);if(!WN(o)){let S=r?A=>r(Lt(A[t.index])):t.index;kw(S,e,n,o,c,y,!1)}}return l}function WN(t){return t.startsWith("animation")||t.startsWith("transition")}function KN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[po],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function kw(t,e,n,r,i,o,s){let c=e.firstCreatePass?_D(e):null,u=vD(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function aI(t,e,n,r,i,o){let s=e[n],c=e[q],l=c.data[n].outputs[r],p=s[l].subscribe(o);kw(t.index,c,e,i,o,p,!0)}var sg=Symbol("BINDING");var cl=class extends Da{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Er(e);return new wo(n,this.ngModule)}};function QN(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&El.SignalBased)!==0};return i&&(o.transform=i),o})}function YN(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function ZN(t,e,n){let r=e instanceof Be?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new og(n,r):n}function JN(t){let e=t.get(Ei,null);if(e===null)throw new U(407,!1);let n=t.get(Rw,null),r=t.get(si,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function XN(t,e){let n=Fw(t);return KI(e,n,n==="svg"?hD:n==="math"?pD:null)}function Fw(t){return(t.selectors[0][0]||"div").toLowerCase()}var wo=class extends Tl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=QN(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=YN(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RR(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ge(ce.DynamicComponentStart);let c=H(null);try{let u=this.componentDef,l=ex(r,u,s,o),f=ZN(u,i||this.ngModule,e),p=JN(f),m=p.rendererFactory.createRenderer(null,u),y=r?eN(m,r,u.encapsulation,f):XN(u,m),S=s?.some(cI)||o?.some(k=>typeof k!="function"&&k.bindings.some(cI)),A=Tg(null,l,null,512|ew(u),null,null,p,m,f,null,$I(y,f,!0));A[et]=y,$u(A);let M=null;try{let k=xw(et,A,2,"#host",()=>l.directiveRegistry,!0,0);ZI(m,y,k),Io(y,A),lw(l,A,k),zI(l,k,A),Pw(l,k),n!==void 0&&nx(k,this.ngContentSelectors,n),M=jt(k.index,A),A[Re]=M[Re],kg(l,A,null)}catch(k){throw M!==null&&Jp(M),Jp(A),k}finally{ge(ce.DynamicComponentEnd),Hu()}return new ul(this.componentType,A,!!S)}finally{H(c)}}};function ex(t,e,n,r){let i=t?["ng-version","21.1.2"]:NR(e.selectors[0]),o=null,s=null,c=0;if(n)for(let f of n)c+=f[sg].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[sg].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=op(p);u.push(m)}return bg(0,null,tx(o,s),1,c,u,null,null,null,[i],null)}function tx(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function cI(t){let e=t[sg].kind;return e==="input"||e==="twoWay"}var ul=class extends Mw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ca(n[q],et),this.location=yg(this._tNode,n),this.instance=jt(this._tNode.index,n)[Re],this.hostView=this.changeDetectorRef=new _i(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Og(r,i[q],i,e,n);this.previousInputValues.set(e,n);let s=jt(r.index,i);Vg(s,1)}get injector(){return new mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function nx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ia=(()=>{class t{static __NG_ELEMENT_ID__=rx}return t})();function rx(){let t=mt();return ox(t,ie())}var ix=Ia,Vw=class extends ix{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return yg(this._hostTNode,this._hostLView)}get injector(){return new mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=mg(this._hostTNode,this._hostLView);if(CI(e)){let n=tl(e,this._hostLView),r=el(e),i=n[q].data[r+8];return new mi(i,n)}else return new mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=uI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ne}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rg(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,ha(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!jM(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,c=M.bindings}let f=u?e:new wo(Er(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let k=(u?p:this.parentInjector).get(Be,null);k&&(o=k)}let m=Er(f.componentType??{}),y=rg(this._lContainer,m?.id??null),S=y?.firstChild??null,A=f.create(p,i,S,o,s,c);return this.insertImpl(A.hostView,l,ha(this._hostTNode,y)),A}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(gD(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[He],l=new Vw(u,u[Vt],u[He]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Cl(s,i,o,r),e.attachToViewContainerRef(),cp($p(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=uI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ga(this._lContainer,n);r&&(na($p(this._lContainer),n),Il(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=ga(this._lContainer,n);return r&&na($p(this._lContainer),n)!=null?new _i(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function uI(t){return t[sa]}function $p(t){return t[sa]||(t[sa]=[])}function ox(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=Cw(r,e,null,t),e[t.index]=n,Sg(e,n)),ax(n,e,t,r),new Vw(n,t,e)}function sx(t,e){let n=t[Ce],r=n.createComment(""),i=fn(e,t),o=n.parentNode(i);return ol(n,o,r,n.nextSibling(i),!1),r}var ax=lx,cx=()=>!1;function ux(t,e,n){return cx(t,e,n)}function lx(t,e,n,r){if(t[Ir])return;let i;n.type&8?i=Lt(r):i=sx(e,n),t[Ir]=i}var Co=class{},Sl=class{};var ll=class extends Co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ip(e);this._bootstrapComponents=JI(o.bootstrap),this._r3Injector=Pp(e,n,[{provide:Co,useValue:this},{provide:Da,useValue:this.componentFactoryResolver},...r],Fn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dl=class extends Sl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ll(this.moduleType,e,[])}};var ma=class extends Co{injector;componentFactoryResolver=new cl(this);instance=null;constructor(e){super();let n=new oi([...e.providers,{provide:Co,useValue:this},{provide:Da,useValue:this.componentFactoryResolver}],e.parent||ia(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wa(t,e,n=null){return new ma({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var dx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=dp(!1,n.type),i=r.length>0?wa([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:t,providedIn:"environment",factory:()=>new t(X(Be))})}return t})();function xt(t){return va(()=>{let e=Lw(t),n=z(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(dx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zt.Emulated,styles:t.styles||Mt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Mr("NgStandalone"),jw(n);let r=t.dependencies;return n.directiveDefs=lI(r,fx),n.pipeDefs=lI(r,tD),n.id=gx(n),n})}function fx(t){return Er(t)||op(t)}function Rr(t){return va(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function hx(t,e){if(t==null)return Dr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=El.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function px(t){if(t==null)return Dr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function wt(t){return va(()=>{let e=Lw(t);return jw(e),e})}function Lw(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Dr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hx(t.inputs,e),outputs:px(t.outputs),debugInfo:null}}function jw(t){t.features?.forEach(e=>e(t))}function lI(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function gx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function mx(t){return Object.getPrototypeOf(t.prototype).constructor}function qn(t){let e=mx(t.type),n=!0,r=[t];for(;e;){let i;if(dn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Hp(t.inputs),s.declaredInputs=Hp(t.declaredInputs),s.outputs=Hp(t.outputs);let c=i.hostBindings;c&&Dx(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&_x(t,u),l&&Ex(t,l),yx(t,i),eD(t.outputs,i.outputs),dn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===qn&&(n=!1)}}e=Object.getPrototypeOf(e)}vx(r)}function yx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function vx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Do(i.hostAttrs,n=Do(n,i.hostAttrs))}}function Hp(t){return t===Dr?{}:t===Mt?[]:t}function _x(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ex(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Dx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Ix(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Do(t.mergedAttrs,t.attrs);let f=t.tView=bg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),vo(t,!1);let u=wx(n,e,t,r);qu()&&Ng(n,e,u,t),Io(u,e);let l=Cw(u,e,u,t);e[r+et]=l,Sg(e,l),ux(l,t,e)}function fl(t,e,n,r,i,o,s,c,u,l,f){let p=n+et,m;if(e.firstCreatePass){if(m=bl(e,p,4,s||null,c||null),l!=null){let y=hn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return Ix(m,t,e,n,r,i,o,u),l!=null&&Pg(t,m,f),m}var wx=Cx;function Cx(t,e,n,r){return Gu(!0),e[Ce].createComment("")}var Lg=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Bw(t){return typeof t=="function"&&t[pt]!==void 0}function jg(t){return Bw(t)&&typeof t.set=="function"}var Bg=new j("");function Ci(t){return!!t&&typeof t.then=="function"}function Uw(t){return!!t&&typeof t.subscribe=="function"}var $w=new j("");var Ug=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P($w,{optional:!0})??[];injector=P(kt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=st(this.injector,i);if(Ci(o))n.push(o);else if(Uw(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Al=new j("");function Hw(){_h(()=>{let t="";throw new U(600,t)})}function zw(t){return t.isBoundToModule}var bx=10;var Nr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P($n);afterRenderManager=P(Mg);zonelessEnabled=P(la);rootEffectScheduler=P(Lp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $e;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(br);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(we(n=>!n))}constructor(){P(Ii,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(Be);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=kt.NULL){return this._injector.get(Et).run(()=>{ge(ce.BootstrapComponentStart);let s=n instanceof Tl;if(!this._injector.get(Ug).done){let S="";throw new U(405,S)}let u;s?u=n:u=this._injector.get(Da).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=zw(u)?void 0:this._injector.get(Co),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(Bg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),fa(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ge(ce.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ge(ce.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ge(ce.ChangeDetectionEnd),new U(101,!1);let n=H(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,H(n),this.afterTick.next(),ge(ce.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ei,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<bx;){ge(ce.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ge(ce.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ua(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ew(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ua(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;fa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Al,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Q4=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ag=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function zp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Tx(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){H(r);let l=e.length-1;for(H(null);s<=c&&s<=l;){let f=t.at(s),p=e[s],m=zp(s,f,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),S=e[l],A=zp(c,y,l,S,n);if(A!==0){A<0&&t.updateValue(c,S),c--,l--;continue}let M=n(s,f),k=n(c,y),Z=n(s,p);if(Object.is(Z,k)){let ue=n(l,S);Object.is(ue,M)?(t.swap(s,c),t.updateValue(c,S),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new hl,o??=fI(t,s,c,n),cg(t,i,s,Z))t.updateValue(s,p),s++,c++;else if(o.has(Z))i.set(M,t.detach(s)),c--;else{let ue=t.create(s,e[s]);t.attach(s,ue),s++,c++}}for(;s<=l;)dI(t,i,n,s,e[s]),s++}else if(e!=null){H(r);let l=e[Symbol.iterator]();H(null);let f=l.next();for(;!f.done&&s<=c;){let p=t.at(s),m=f.value,y=zp(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,f=l.next();else{i??=new hl,o??=fI(t,s,c,n);let S=n(s,m);if(cg(t,i,s,S))t.updateValue(s,m),s++,c++,f=l.next();else if(!o.has(S))t.attach(s,t.create(s,m)),s++,c++,f=l.next();else{let A=n(s,p);i.set(A,t.detach(s)),c--}}}for(;!f.done;)dI(t,i,n,t.length,f.value),f=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function cg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function dI(t,e,n,r,i){if(cg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function fI(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var hl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function xr(t,e,n,r,i,o,s,c){Mr("NgControlFlow");let u=ie(),l=at(),f=hn(l.consts,o);return fl(u,l,t,e,n,r,i,f,256,s,c),$g}function $g(t,e,n,r,i,o,s,c){Mr("NgControlFlow");let u=ie(),l=at(),f=hn(l.consts,o);return fl(u,l,t,e,n,r,i,f,512,s,c),$g}function Pr(t,e){Mr("NgControlFlow");let n=ie(),r=gi(),i=n[r]!==Jt?n[r]:-1,o=i!==-1?pl(n,et+i):void 0,s=0;if(zn(n,r,t)){let c=H(null);try{if(o!==void 0&&Tw(o,s),t!==-1){let u=et+t,l=pl(n,u),f=fg(n[q],u),p=Aw(l,f,n),m=Fg(n,f,e,{dehydratedView:p});Cl(l,m,s,ha(f,p))}}finally{H(c)}}else if(o!==void 0){let c=bw(o,s);c!==void 0&&(c[Re]=e)}}var ug=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ne}};var lg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ca(t,e,n,r,i,o,s,c,u,l,f,p,m){Mr("NgControlFlow");let y=ie(),S=at(),A=u!==void 0,M=ie(),k=c?s.bind(M[Rt][Re]):s,Z=new lg(A,k);M[et+t]=Z,fl(y,S,t+1,e,n,r,i,hn(S.consts,o),256),A&&fl(y,S,t+2,u,l,f,p,hn(S.consts,m),512)}var dg=class extends ag{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ne}at(e){return this.getLView(e)[Re].$implicit}attach(e,n){let r=n[ho];this.needsIndexUpdate||=e!==this.length,Cl(this.lContainer,n,e,ha(this.templateTNode,r)),Sx(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Ax(this.lContainer,e),Mx(this.lContainer,e)}create(e,n){let r=rg(this.lContainer,this.templateTNode.tView.ssrId);return Fg(this.hostLView,this.templateTNode,new ug(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Il(e[q],e)}updateValue(e,n){this.getLView(e)[Re].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Re].$index=e}getLView(e){return Rx(this.lContainer,e)}};function ba(t){let e=H(null),n=Un();try{let r=ie(),i=r[q],o=r[n],s=n+1,c=pl(r,s);if(o.liveCollection===void 0){let l=fg(i,s);o.liveCollection=new dg(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Tx(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=gi(),f=u.length===0;if(zn(r,l,f)){let p=n+2,m=pl(r,p);if(f){let y=fg(i,p),S=Aw(m,y,r),A=Fg(r,y,void 0,{dehydratedView:S});Cl(m,A,0,ha(y,S))}else i.firstUpdatePass&&RN(m),Tw(m,0)}}}finally{H(e)}}function pl(t,e){return t[e]}function Sx(t,e){if(t.length<=Ne)return;let n=Ne+e,r=t[n],i=r?r[hi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[jn];LR(o,i),vi.delete(r[Bn]),i.detachedLeaveAnimationFns=void 0}}function Ax(t,e){if(t.length<=Ne)return;let n=Ne+e,r=t[n],i=r?r[hi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Mx(t,e){return ga(t,e)}function Rx(t,e){return bw(t,e)}function fg(t,e){return ca(t,e)}function Bt(t,e,n){let r=ie(),i=gi();if(zn(r,i,e)){let o=at(),s=zu();dw(s,r,t,e,r[Ce],n)}return Bt}function hI(t,e,n,r,i){Og(e,t,n,i?"class":"style",r)}function le(t,e,n,r){let i=ie(),o=i[q],s=t+et,c=o.firstCreatePass?xw(s,i,2,e,cN,ID(),n,r):o.data[s];if(hw(c,i,t,e,qw),Lu(c)){let u=i[q];lw(u,i,c),zI(u,c,i)}return r!=null&&Pg(i,c),le}function me(){let t=at(),e=mt(),n=pw(e);return t.firstCreatePass&&Pw(t,n),wp(n)&&Cp(),Ip(),n.classesWithoutHost!=null&&GM(n)&&hI(t,n,ie(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&WM(n)&&hI(t,n,ie(),n.stylesWithoutHost,!1),me}function Or(t,e,n,r){return le(t,e,n,r),me(),Or}function Gn(t,e,n,r){let i=ie(),o=i[q],s=t+et,c=o.firstCreatePass?qN(s,o,2,e,n,r):o.data[s];return hw(c,i,t,e,qw),r!=null&&Pg(i,c),Gn}function Wn(){let t=mt(),e=pw(t);return wp(e)&&Cp(),Ip(),Wn}var qw=(t,e,n,r,i)=>(Gu(!0),KI(e[Ce],r,FD()));function bi(){return ie()}function Ta(t,e,n){let r=ie(),i=gi();if(zn(r,i,e)){let o=at(),s=zu();fw(s,r,t,e,r[Ce],n)}return Ta}var Sa="en-US";var Nx=Sa;function Gw(t){typeof t=="string"&&(Nx=t.toLowerCase().replace(/_/g,"-"))}function yt(t,e,n){let r=ie(),i=at(),o=mt();return Ww(i,r,r[Ce],o,t,e,n),yt}function Aa(t,e,n){let r=ie(),i=at(),o=mt();return(o.type&3||n)&&Ow(o,i,r,n,r[Ce],t,e,Ju(o,r,e)),Aa}function Ww(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Ju(r,e,o),Ow(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=Ju(r,e,o),aI(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Ju(r,e,o),aI(r,e,p,i,i,u)}}function qe(t=1){return kD(t)}function Ku(t,e){return t<<17|e<<2}function Di(t){return t>>17&32767}function xx(t){return(t&2)==2}function Px(t,e){return t&131071|e<<17}function hg(t){return t|2}function bo(t){return(t&131068)>>2}function qp(t,e){return t&-131069|e<<2}function Ox(t){return(t&1)===1}function pg(t){return t|1}function kx(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=Di(s),u=bo(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||lo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=Di(t[c+1]);t[r+1]=Ku(m,c),m!==0&&(t[m+1]=qp(t[m+1],r)),t[c+1]=Px(t[c+1],r)}else t[r+1]=Ku(c,0),c!==0&&(t[c+1]=qp(t[c+1],r)),c=r;else t[r+1]=Ku(u,0),c===0?c=r:t[u+1]=qp(t[u+1],r),u=r;l&&(t[r+1]=hg(t[r+1])),pI(t,f,r,!0),pI(t,f,r,!1),Fx(e,f,t,r,o),s=Ku(c,u),o?e.classBindings=s:e.styleBindings=s}function Fx(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&lo(o,e)>=0&&(n[r+1]=pg(n[r+1]))}function pI(t,e,n,r){let i=t[n+1],o=e===null,s=r?Di(i):bo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];Vx(u,e)&&(c=!0,t[s+1]=r?pg(l):hg(l)),s=r?Di(l):bo(l)}c&&(t[n+1]=r?hg(i):pg(i))}function Vx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?lo(t,e)>=0:!1}function Ti(t,e){return Lx(t,e,null,!0),Ti}function Lx(t,e,n,r){let i=ie(),o=at(),s=Mp(2);if(o.firstUpdatePass&&Bx(o,t,s,r),e!==Jt&&zn(i,s,e)){let c=o.data[Un()];qx(o,c,i,i[Ce],t,i[s+1]=Gx(e,n),r,s)}}function jx(t,e){return e>=t.expandoStartIndex}function Bx(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Un()],s=jx(t,n);Wx(o,r)&&e===null&&!s&&(e=!1),e=Ux(i,o,e,r),kx(i,o,e,n,s,r)}}function Ux(t,e,n,r){let i=ND(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gp(null,t,e,n,r),n=ya(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Gp(i,t,e,n,r),o===null){let u=$x(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Gp(null,t,e,u[1],r),u=ya(u,e.attrs,r),Hx(t,e,r,u))}else o=zx(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function $x(t,e,n){let r=n?e.classBindings:e.styleBindings;if(bo(r)!==0)return t[Di(r)]}function Hx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Di(i)]=r}function zx(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ya(r,s,n)}return ya(r,e.attrs,n)}function Gp(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ya(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ya(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sD(t,s,n?!0:e[++o]))}return t===void 0?null:t}function qx(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=Ox(l)?gI(u,e,n,i,bo(l),s):void 0;if(!gl(f)){gl(o)||xx(l)&&(o=gI(u,null,n,i,c,s));let p=vp(Un(),n);XR(r,s,p,i,o)}}function gI(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===Jt&&(m=p?Mt:void 0);let y=p?ku(m,r):f===r?m:void 0;if(l&&!gl(y)&&(y=ku(u,r)),gl(y)&&(c=y,s))return c;let S=t[i+1];i=s?Di(S):bo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=ku(u,r))}return c}function gl(t){return t!==void 0}function Gx(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Fn(Dg(t)))),t}function Wx(t,e){return(t.flags&(e?8:16))!==0}function be(t,e=""){let n=ie(),r=at(),i=t+et,o=r.firstCreatePass?bl(r,i,1,e,null):r.data[i],s=Kx(r,n,o,e);n[i]=s,qu()&&Ng(r,n,s,o),vo(o,!1)}var Kx=(t,e,n,r)=>(Gu(!0),mR(e[Ce],r));function Qx(t,e,n,r=""){return zn(t,gi(),n)?e+ta(n)+r:Jt}function Yx(t,e,n,r,i,o=""){let s=TD(),c=GN(t,s,n,i);return Mp(2),c?e+ta(n)+r+ta(i)+o:Jt}function mn(t,e,n){let r=ie(),i=Qx(r,t,e,n);return i!==Jt&&Kw(r,Un(),i),mn}function Ml(t,e,n,r,i){let o=ie(),s=Yx(o,t,e,n,r,i);return s!==Jt&&Kw(o,Un(),s),Ml}function Kw(t,e,n){let r=vp(e,t);yR(t[Ce],r,n)}function Si(t,e,n){jg(e)&&(e=e());let r=ie(),i=gi();if(zn(r,i,e)){let o=at(),s=zu();dw(s,r,t,e,r[Ce],n)}return Si}function To(t,e){let n=jg(t);return n&&t.set(e),n}function Ai(t,e){let n=ie(),r=at(),i=mt();return Ww(r,n,n[Ce],i,t,e),Ai}function mI(t,e,n){let r=at();r.firstCreatePass&&Qw(e,r.data,r.blueprint,dn(t),n)}function Qw(t,e,n,r,i){if(t=Xe(t),Array.isArray(t))for(let o=0;o<t.length;o++)Qw(t[o],e,n,r,i);else{let o=at(),s=ie(),c=mt(),u=ii(t)?t:Xe(t.provide),l=hp(t),f=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(ii(t)||!t.multi){let y=new yi(l,i,ve,null),S=Kp(u,e,i?f:f+m,p);S===-1?(Yp(nl(c,s),o,u),Wp(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=Kp(u,e,f+m,p),S=Kp(u,e,f,f+m),A=y>=0&&n[y],M=S>=0&&n[S];if(i&&!M||!i&&!A){Yp(nl(c,s),o,u);let k=Xx(i?Jx:Zx,n.length,i,r,l,t);!i&&M&&(n[S].providerFactory=k),Wp(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=Yw(n[i?S:y],l,!i&&r);Wp(o,t,y>-1?y:S,k)}!i&&r&&M&&n[S].componentProviders++}}}function Wp(t,e,n,r){let i=ii(e),o=lD(e);if(i||o){let u=(o?Xe(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function Yw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Zx(t,e,n,r,i){return gg(this.multi,[])}function Jx(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=rl(r,r[q],this.providerFactory.index,i);s=u.slice(0,c),gg(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],gg(o,s);return s}function gg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Xx(t,e,n,r,i,o){let s=new yi(t,n,ve,null);return s.multi=[],s.index=e,s.componentProviders=0,Yw(s,i,r&&!n),s}function So(t,e){return n=>{n.providersResolver=(r,i)=>mI(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>mI(r,i?i(e):e,!0))}}var ml=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hg=(()=>{class t{compileModuleSync(n){return new dl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ip(n),o=JI(i.declarations).reduce((s,c)=>{let u=Er(c);return u&&s.push(new wo(u)),s},[]);return new ml(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Zw=(()=>{class t{applicationErrorHandler=P($n);appRef=P(Nr);taskService=P(br);ngZone=P(Et);zonelessEnabled=P(la);tracing=P(Ii,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ye;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zs):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Vp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?BD:Op;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zs+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jw(){return[{provide:si,useExisting:Zw},{provide:Et,useClass:Js},{provide:la,useValue:!0}]}function eP(){return typeof $localize<"u"&&$localize.locale||Sa}var zg=new j("",{factory:()=>P(zg,{optional:!0,skipSelf:!0})||eP()});function Ao(t,e){return Xc(t,e?.equal)}var eC=Symbol("InputSignalNode#UNSET"),gP=z(N({},eu),{transformFn:void 0,applyValueToInputSignal(t,e){$s(t,e)}});function tC(t,e){let n=Object.create(gP);n.value=t,n.transformFn=e?.transform;function r(){if(js(n),n.value===eC){let i=null;throw new U(-950,i)}return n.value}return r[pt]=n,r}function Xw(t,e){return tC(t,e)}function mP(t){return tC(eC,t)}var nC=(Xw.required=mP,Xw);var qg=new j(""),yP=new j("");function Ma(t){return!t.moduleRef}function vP(t){let e=Ma(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Et);return n.run(()=>{Ma(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get($n),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ma(t)){let o=()=>e.destroy(),s=t.platformInjector.get(qg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(qg);s.add(o),t.moduleRef.onDestroy(()=>{fa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return EP(r,n,()=>{let o=e.get(br),s=o.add(),c=e.get(Ug);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(zg,Sa);if(Gw(u||Sa),!e.get(yP,!0))return Ma(t)?e.get(Nr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ma(t)){let f=e.get(Nr);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return _P?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{o.remove(s)})})})}var _P;function EP(t,e,n){try{let r=n();return Ci(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Rl=null;function DP(t=[],e){return kt.create({name:e,providers:[{provide:ra,useValue:"platform"},{provide:qg,useValue:new Set([()=>Rl=null])},...t]})}function IP(t=[]){if(Rl)return Rl;let e=DP(t);return Rl=e,Hw(),wP(e),e}function wP(t){let e=t.get(vl,null);st(t,()=>{e?.forEach(n=>n())})}var CP=1e4;var MG=CP-1e3;var Mo=(()=>{class t{static __NG_ELEMENT_ID__=bP}return t})();function bP(t){return TP(mt(),ie(),(t&16)===16)}function TP(t,e,n){if(wr(t)&&!n){let r=jt(t.index,e);return new _i(r,r)}else if(t.type&175){let r=e[Rt];return new _i(r,e)}return null}function rC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ge(ce.BootstrapApplicationStart);try{let o=i?.injector??IP(r),s=[Jw(),$D,...n||[]],c=new ma({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return vP({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ge(ce.BootstrapApplicationEnd)}}function Gg(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var iC=null;function Ut(){return iC}function Wg(t){iC??=t}var Na=class{},Nl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(oC),providedIn:"platform"})}return t})();var oC=(()=>{class t extends Nl{_location;_history;_doc=P(ze);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ut().getBaseHref(this._doc)}onPopState(n){let r=Ut().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Ut().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function cC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function sC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function kr(t){return t&&t[0]!=="?"?`?${t}`:t}var xl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(AP),providedIn:"root"})}return t})(),SP=new j(""),AP=(()=>{class t extends xl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return cC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(X(Nl),X(SP,8))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ro=(()=>{class t{_subject=new $e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=NP(sC(aC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+kr(r))}normalize(n){return t.stripTrailingSlash(RP(this._basePath,aC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=kr;static joinWithSlash=cC;static stripTrailingSlash=sC;static \u0275fac=function(r){return new(r||t)(X(xl))};static \u0275prov=L({token:t,factory:()=>MP(),providedIn:"root"})}return t})();function MP(){return new Ro(X(xl))}function RP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aC(t){return t.replace(/\/index.html$/,"")}function NP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var yn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rr({type:t});static \u0275inj=Ln({})}return t})();function Kg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xa=class{};var uC="browser";var Pa=class{_doc;constructor(e){this._doc=e}manager},Pl=(()=>{class t extends Pa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(X(ze))};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})(),Fl=new j(""),Jg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Pl));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Pl);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(X(Fl),X(Et))};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})(),Qg="ng-app-id";function lC(t){for(let e of t)e.remove()}function dC(t,e){let n=e.createElement("style");return n.textContent=t,n}function PP(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Qg}="${e}"],link[${Qg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Qg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Zg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Xg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,PP(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,dC);r?.forEach(i=>this.addUsage(i,this.external,Zg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(lC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])lC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,dC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Zg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(X(ze),X(yl),X(_l,8),X(_a))};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})(),Yg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},em=/%COMP%/g;var hC="%COMP%",OP=`_nghost-${hC}`,kP=`_ngcontent-${hC}`,FP=!0,VP=new j("",{factory:()=>FP});function LP(t){return kP.replace(em,t)}function jP(t){return OP.replace(em,t)}function pC(t,e){return e.map(n=>n.replace(em,t))}var tm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Oa(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof kl?i.applyToHost(n):i instanceof ka&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Zt.Emulated:o=new kl(u,l,r,this.appId,f,s,c,p);break;case Zt.ShadowDom:return new Ol(u,n,r,s,c,this.nonce,p,l);case Zt.ExperimentalIsolatedShadowDom:return new Ol(u,n,r,s,c,this.nonce,p);default:o=new ka(u,l,r,f,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(X(Jg),X(Xg),X(yl),X(VP),X(ze),X(Et),X(_l),X(Ii,8))};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})(),Oa=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Yg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Yg[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Yg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Hn.DashCase|Hn.Important)?e.style.setProperty(n,r,i&Hn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Hn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Ut().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function fC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ol=class extends Oa{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,i,o,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=pC(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let f=r.getExternalStyles?.();if(f)for(let p of f){let m=Zg(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ka=class extends Oa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?pC(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&vi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kl=class extends ka{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=LP(l),this.hostAttr=jP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Vl=class t extends Na{supportsDOMEvents=!0;static makeCurrent(){Wg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=BP();return n==null?null:UP(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Kg(document.cookie,e)}},Fa=null;function BP(){return Fa=Fa||document.head.querySelector("base"),Fa?Fa.getAttribute("href"):null}function UP(t){return new URL(t,document.baseURI).pathname}var $P=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})(),gC=["alt","control","meta","shift"],HP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},mC=(()=>{class t extends Pa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ut().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),gC.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=HP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),gC.forEach(s=>{if(s!==i){let c=zP[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(X(ze))};static \u0275prov=L({token:t,factory:t.\u0275fac})}return t})();async function nm(t,e,n){let r=N({rootComponent:t},qP(e,n));return rC(r)}function qP(t,e){return{platformRef:e?.platformRef,appProviders:[...YP,...t?.providers??[]],platformProviders:QP}}function GP(){Vl.makeCurrent()}function WP(){return new cn}function KP(){return _g(document),document}var QP=[{provide:_a,useValue:uC},{provide:vl,useValue:GP,multi:!0},{provide:ze,useFactory:KP}];var YP=[{provide:ra,useValue:"root"},{provide:cn,useFactory:WP},{provide:Fl,useClass:Pl,multi:!0},{provide:Fl,useClass:mC,multi:!0},tm,Xg,Jg,{provide:Ei,useExisting:tm},{provide:xa,useClass:$P},[]];var yC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(X(ze))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var W="primary",Ka=Symbol("RouteTitle"),am=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ni(t){return new am(t)}function rm(t,e,n){for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function SC(t,e,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let u={},l=t.slice(0,r.length);return rm(r,l,u)?{consumed:l,posParams:u}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>t.length||n.pathMatch==="full"&&e.hasChildren()&&n.path!=="**")return null;let c={};return!rm(o,t.slice(0,o.length),c)||!rm(s,t.slice(t.length-s.length),c)?null:{consumed:t,posParams:c}}function Hl(t){return new Promise((e,n)=>{t.pipe(Pn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function JP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vn(t[n],e[n]))return!1;return!0}function vn(t,e){let n=t?cm(t):void 0,r=e?cm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!AC(t[i],e[i]))return!1;return!0}function cm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function AC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function XP(t){return t.length>0?t[t.length-1]:null}function Oi(t){return _u(t)?t:Ci(t)?ke(Promise.resolve(t)):re(t)}function MC(t){return _u(t)?Hl(t):Promise.resolve(t)}var e1={exact:NC,subset:xC},RC={exact:t1,subset:n1,ignored:()=>!0};function vC(t,e,n){return e1[n.paths](t.root,e.root,n.matrixParams)&&RC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function t1(t,e){return vn(t,e)}function NC(t,e,n){if(!Mi(t.segments,e.segments)||!Bl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!NC(t.children[r],e.children[r],n))return!1;return!0}function n1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AC(t[n],e[n]))}function xC(t,e,n){return PC(t,e,e.segments,n)}function PC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Mi(i,n)||e.hasChildren()||!Bl(i,n,r))}else if(t.segments.length===n.length){if(!Mi(t.segments,n)||!Bl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!xC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Mi(t.segments,i)||!Bl(t.segments,i,r)||!t.children[W]?!1:PC(t.children[W],e,o,r)}}function Bl(t,e,n){return e.every((r,i)=>RC[n](t[i].parameters,r.parameters))}var en=class{root;queryParams;fragment;_queryParamMap;constructor(e=new de([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return o1.serialize(this)}},de=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ul(this)}},Fr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ni(this.parameters),this._parameterMap}toString(){return kC(this)}};function r1(t,e){return Mi(t,e)&&t.every((n,r)=>vn(n.parameters,e[r].parameters))}function Mi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function i1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var Qa=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>new Vr,providedIn:"root"})}return t})(),Vr=class{parse(e){let n=new lm(e);return new en(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Va(e.root,!0)}`,r=c1(e.queryParams),i=typeof e.fragment=="string"?`#${s1(e.fragment)}`:"";return`${n}${r}${i}`}},o1=new Vr;function Ul(t){return t.segments.map(e=>kC(e)).join("/")}function Va(t,e){if(!t.hasChildren())return Ul(t);if(e){let n=t.children[W]?Va(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${Va(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=i1(t,(r,i)=>i===W?[Va(t.children[W],!1)]:[`${i}:${Va(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${Ul(t)}/${n[0]}`:`${Ul(t)}/(${n.join("//")})`}}function OC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ll(t){return OC(t).replace(/%3B/gi,";")}function s1(t){return encodeURI(t)}function um(t){return OC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function _C(t){return $l(t.replace(/\+/g,"%20"))}function kC(t){return`${um(t.path)}${a1(t.parameters)}`}function a1(t){return Object.entries(t).map(([e,n])=>`;${um(e)}=${um(n)}`).join("")}function c1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ll(n)}=${Ll(i)}`).join("&"):`${Ll(n)}=${Ll(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var u1=/^[^\/()?;#]+/;function im(t){let e=t.match(u1);return e?e[0]:""}var l1=/^[^\/()?;=#]+/;function d1(t){let e=t.match(l1);return e?e[0]:""}var f1=/^[^=?&#]+/;function h1(t){let e=t.match(f1);return e?e[0]:""}var p1=/^[^&#]+/;function g1(t){let e=t.match(p1);return e?e[0]:""}var lm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new de(e,n)),r}parseSegment(){let e=im(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Fr($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=d1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=im(this.remaining);i&&(r=i,this.capture(r))}e[$l(n)]=$l(r)}parseQueryParam(e){let n=h1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=g1(this.remaining);s&&(r=s,this.capture(r))}let i=_C(n),o=_C(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=im(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o??W]=Object.keys(s).length===1&&s[W]?s[W]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function FC(t){return t.segments.length>0?new de([],{[W]:t}):t}function VC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=VC(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new de(t.segments,e);return m1(n)}function m1(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new de(t.segments.concat(e.segments),e.children)}return t}function Oo(t){return t instanceof en}function LC(t,e,n=null,r=null,i=new Vr){let o=jC(t);return BC(o,e,n,r,i)}function jC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new de(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=FC(r);return e??i}function BC(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return om(o,o,o,n,r,i);let s=y1(e);if(s.toRoot())return om(o,o,new de([],{}),n,r,i);let c=v1(s,o,t),u=c.processChildren?ja(c.segmentGroup,c.index,s.commands):$C(c.segmentGroup,c.index,s.commands);return om(o,c.segmentGroup,u,n,r,i)}function zl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $a(t){return typeof t=="object"&&t!=null&&t.outlets}function EC(t,e,n){t||="\u0275";let r=new en;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function om(t,e,n,r,i,o){let s={};for(let[l,f]of Object.entries(r??{}))s[l]=Array.isArray(f)?f.map(p=>EC(l,p,o)):EC(l,f,o);let c;t===e?c=n:c=UC(t,e,n);let u=FC(VC(c));return new en(u,s,i)}function UC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=UC(o,e,n)}),new de(t.segments,r)}var ql=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&zl(r[0]))throw new U(4003,!1);let i=r.find($a);if(i&&i!==XP(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function y1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ql(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new ql(n,e,r)}var xo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function v1(t,e,n){if(t.isAbsolute)return new xo(e,!0,0);if(!n)return new xo(e,!1,NaN);if(n.parent===null)return new xo(n,!0,0);let r=zl(t.commands[0])?0:1,i=n.segments.length-1+r;return _1(n,i,t.numberOfDoubleDots)}function _1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new xo(r,!1,i-o)}function E1(t){return $a(t[0])?t[0].outlets:{[W]:t}}function $C(t,e,n){if(t??=new de([],{}),t.segments.length===0&&t.hasChildren())return ja(t,e,n);let r=D1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new de(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new de(t.segments.slice(r.pathIndex),t.children),ja(o,0,i)}else return r.match&&i.length===0?new de(t.segments,{}):r.match&&!t.hasChildren()?dm(t,e,n):r.match?ja(t,0,i):dm(t,e,n)}function ja(t,e,n){if(n.length===0)return new de(t.segments,{});{let r=E1(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=ja(t.children[W],e,n);return new de(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$C(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new de(t.segments,i)}}function D1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if($a(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!IC(u,l,s))return o;r+=2}else{if(!IC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function dm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if($a(o)){let u=I1(o.outlets);return new de(r,u)}if(i===0&&zl(n[0])){let u=t.segments[e];r.push(new Fr(u.path,DC(n[0]))),i++;continue}let s=$a(o)?o.outlets[W]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&zl(c)?(r.push(new Fr(s,DC(c))),i+=2):(r.push(new Fr(s,{})),i++)}return new de(r,{})}function I1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=dm(new de([],{}),0,r))}),e}function DC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function IC(t,e,n){return t==n.path&&vn(e,n.parameters)}var Ba="imperative",Ge=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ge||{}),Ot=class{id;url;constructor(e,n){this.id=e,this.url=n}},xi=class extends Ot{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends Ot{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},lt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(lt||{}),Ha=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ha||{}),$t=class extends Ot{reason;code;type=Ge.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function HC(t){return t instanceof $t&&(t.code===lt.Redirect||t.code===lt.SupersededByNewNavigation)}var Yn=class extends Ot{reason;code;type=Ge.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Pi=class extends Ot{error;target;type=Ge.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ko=class extends Ot{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gl=class extends Ot{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wl=class extends Ot{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kl=class extends Ot{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ql=class extends Ot{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yl=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zl=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jl=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xl=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ed=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},td=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fo=class{},Vo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function w1(t){return!(t instanceof Fo)&&!(t instanceof Vo)}var nd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bo(this.rootInjector)}},Bo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(X(Be))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=fm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=fm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hm(e,this._root).map(n=>n.value)}};function fm(t,e){if(t===e.value)return e;for(let n of e.children){let r=fm(t,n);if(r)return r}return null}function hm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hm(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function No(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var za=class extends rd{snapshot;constructor(e,n){super(e),this.snapshot=n,Dm(this,e)}toString(){return this.snapshot.toString()}};function zC(t,e){let n=C1(t,e),r=new Ze([new Fr("",{})]),i=new Ze({}),o=new Ze({}),s=new Ze({}),c=new Ze(""),u=new Lr(r,i,s,c,o,W,t,n.root);return u.snapshot=n.root,new za(new Pt(u,[]),n)}function C1(t,e){let n={},r={},i={},s=new Ri([],n,i,"",r,W,t,null,{},e);return new qa("",new Pt(s,[]))}var Lr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(we(l=>l[Ka]))??re(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(e=>Ni(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(e=>Ni(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function id(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&GC(i)&&(r.resolve[Ka]=i.title),r}var Ri=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Ka]}constructor(e,n,r,i,o,s,c,u,l,f){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l,this._environmentInjector=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ni(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},qa=class extends rd{url;constructor(e,n){super(n),this.url=e,Dm(this,n)}toString(){return qC(this._root)}};function Dm(t,e){e.value._routerState=t,e.children.forEach(n=>Dm(t,n))}function qC(t){let e=t.children.length>0?` { ${t.children.map(qC).join(", ")} } `:"";return`${t.value}${e}`}function sm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),vn(e.params,n.params)||t.paramsSubject.next(n.params),JP(e.url,n.url)||t.urlSubject.next(n.url),vn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function pm(t,e){let n=vn(t.params,e.params)&&r1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||pm(t.parent,e.parent))}function GC(t){return typeof t.title=="string"||t.title===null}var WC=new j(""),Ya=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=W;activateEvents=new Ie;deactivateEvents=new Ie;attachEvents=new Ie;detachEvents=new Ie;routerOutletData=nC();parentContexts=P(Bo);location=P(Ia);changeDetector=P(Mo);inputBinder=P(cd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new gm(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=wt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tr]})}return t})(),gm=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Lr?this.route:e===Bo?this.childContexts:e===WC?this.outletData:this.parent.get(e,n)}},cd=new j("");var Im=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=xt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Or(0,"router-outlet")},dependencies:[Ya],encapsulation:2})}return t})();function wm(t){let e=t.children&&t.children.map(wm),n=e?z(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=Im),n}function b1(t,e,n){let r=Ga(t,e._root,n?n._root:void 0);return new za(r,e)}function Ga(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=T1(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ga(t,c)),s}}let r=S1(e.value),i=e.children.map(o=>Ga(t,o));return new Pt(r,i)}}function T1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ga(t,r,i);return Ga(t,r)})}function S1(t){return new Lr(new Ze(t.url),new Ze(t.params),new Ze(t.queryParams),new Ze(t.fragment),new Ze(t.data),t.outlet,t.component,t)}var Lo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},KC="ngNavigationCancelingError";function od(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QC(!1,lt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function QC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[KC]=!0,n.cancellationCode=e,n}function A1(t){return YC(t)&&Oo(t.url)}function YC(t){return!!t&&t[KC]}var mm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=No(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=No(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=No(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=No(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new td(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(sm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),sm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},sd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Po=class{component;route;constructor(e,n){this.component=e,this.route=n}};function M1(t,e,n){let r=t._root,i=e?e._root:null;return La(r,i,n,[r.value])}function R1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Uo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Jh(t)?t:e.get(t):r}function La(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=No(e);return t.children.forEach(s=>{N1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ua(c,n.getContext(s),i)),i}function N1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=x1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?La(t,e,c?c.children:null,r,i):La(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Po(c.outlet.component,s))}else s&&Ua(e,c,i),i.canActivateChecks.push(new sd(r)),o.component?La(t,null,c?c.children:null,r,i):La(t,null,n,r,i);return i}function x1(t,e,n){if(typeof n=="function")return st(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!Mi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mi(t.url,e.url)||!vn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pm(t,e)||!vn(t.queryParams,e.queryParams);default:return!pm(t,e)}}function Ua(t,e,n){let r=No(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ua(s,e.children.getContext(o),n):Ua(s,null,n):Ua(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Po(e.outlet.component,i)):n.canDeactivateChecks.push(new Po(null,i)):n.canDeactivateChecks.push(new Po(null,i))}function Za(t){return typeof t=="function"}function P1(t){return typeof t=="boolean"}function O1(t){return t&&Za(t.canLoad)}function k1(t){return t&&Za(t.canActivate)}function F1(t){return t&&Za(t.canActivateChild)}function V1(t){return t&&Za(t.canDeactivate)}function L1(t){return t&&Za(t.canMatch)}function ZC(t){return t instanceof ei||t?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function jo(){return On(t=>Nh(t.map(e=>e.pipe(xn(1),Oh(jl)))).pipe(we(e=>{for(let n of e)if(n!==!0){if(n===jl)return jl;if(n===!1||j1(n))return n}return!0}),Nn(e=>e!==jl),xn(1)))}function j1(t){return Oo(t)||t instanceof Lo}function JC(t){return t.aborted?re(void 0).pipe(xn(1)):new ae(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function XC(t){return Ws(JC(t))}function B1(t){return gt(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?re(z(N({},e),{guardsResult:!0})):U1(o,n,r).pipe(gt(s=>s&&P1(s)?$1(n,i,t):re(s)),we(s=>z(N({},e),{guardsResult:s})))})}function U1(t,e,n){return ke(t).pipe(gt(r=>W1(r.component,r.route,n,e)),Pn(r=>r!==!0,!0))}function $1(t,e,n){return ke(e).pipe(wu(r=>ao(z1(r.route.parent,n),H1(r.route,n),G1(t,r.path),q1(t,r.route))),Pn(r=>r!==!0,!0))}function H1(t,e){return t!==null&&e&&e(new ed(t)),re(!0)}function z1(t,e){return t!==null&&e&&e(new Jl(t)),re(!0)}function q1(t,e){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return re(!0);let r=n.map(i=>qs(()=>{let o=e._environmentInjector,s=Uo(i,o),c=k1(s)?s.canActivate(e,t):st(o,()=>s(e,t));return Oi(c).pipe(Pn())}));return re(r).pipe(jo())}function G1(t,e){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>R1(o)).filter(o=>o!==null).map(o=>qs(()=>{let s=o.guards.map(c=>{let u=o.node._environmentInjector,l=Uo(c,u),f=F1(l)?l.canActivateChild(n,t):st(u,()=>l(n,t));return Oi(f).pipe(Pn())});return re(s).pipe(jo())}));return re(i).pipe(jo())}function W1(t,e,n,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let c=e._environmentInjector,u=Uo(s,c),l=V1(u)?u.canDeactivate(t,e,n,r):st(c,()=>u(t,e,n,r));return Oi(l).pipe(Pn())});return re(o).pipe(jo())}function K1(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let s=o.map(c=>{let u=Uo(c,t),l=O1(u)?u.canLoad(e,n):st(t,()=>u(e,n)),f=Oi(l);return i?f.pipe(XC(i)):f});return re(s).pipe(jo(),eb(r))}function eb(t){return Sh(sn(e=>{if(typeof e!="boolean")throw od(t,e)}),we(e=>e===!0))}function Q1(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let s=o.map(c=>{let u=Uo(c,t),l=L1(u)?u.canMatch(e,n):st(t,()=>u(e,n));return Oi(l).pipe(XC(i))});return re(s).pipe(jo(),eb(r))}var Kn=class t extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,t.prototype)}},Wa=class t extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t.prototype)}};function Y1(t){throw new U(4e3,!1)}function Z1(t){throw QC(!1,lt.GuardRejected)}var ym=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[W])throw Y1(`${e.redirectTo}`);i=i.children[W]}}async applyRedirectCommands(e,n,r,i,o){let s=await J1(n,i,o);if(s instanceof en)throw new Wa(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Wa(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new en(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new de(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function J1(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:f,title:p,paramMap:m,queryParamMap:y}=e;return Hl(Oi(st(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p,paramMap:m,queryParamMap:y}))))}function X1(t,e){return t.providers&&!t._injector&&(t._injector=wa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Xt(t){return t.outlet||W}function eO(t,e){let n=t.filter(r=>Xt(r)===e);return n.push(...t.filter(r=>Xt(r)!==e)),n}var vm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tO(t,e,n,r,i,o){let s=tb(t,e,n);return s.matched?(r=X1(e,r),Q1(r,e,n,i,o).pipe(we(c=>c===!0?s:N({},vm)))):re(s)}function tb(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},vm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SC)(n,t,e);if(!i)return N({},vm);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function wC(t,e,n,r){return n.length>0&&iO(t,n,r)?{segmentGroup:new de(e,rO(r,new de(n,t.children))),slicedSegments:[]}:n.length===0&&oO(t,n,r)?{segmentGroup:new de(t.segments,nO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function nO(t,e,n,r){let i={};for(let o of n)if(ud(t,e,o)&&!r[Xt(o)]){let s=new de([],{});i[Xt(o)]=s}return N(N({},r),i)}function rO(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&Xt(r)!==W){let i=new de([],{});n[Xt(r)]=i}return n}function iO(t,e,n){return n.some(r=>ud(t,e,r)&&Xt(r)!==W)}function oO(t,e,n){return n.some(r=>ud(t,e,r))}function ud(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function sO(t,e,n){return e.length===0&&!t.children[n]}var _m=class{};async function aO(t,e,n,r,i,o,s="emptyOnly",c){return new Em(t,e,n,r,i,s,o,c).recognize()}var cO=31,Em=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new ym(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}async recognize(){let e=wC(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Pt(r,n),o=new qa("",i),s=LC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Ri([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),W,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,W,n),rootSnapshot:n}}catch(r){if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Kn?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Pt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],f=eO(n,u),p=await this.processSegmentGroup(e,f,l,u,i);s.push(...p)}let c=nb(s);return uO(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof Kn||ZC(l))continue;throw l}if(sO(r,i,o))return new _m;throw new Kn(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(Xt(r)!==s&&(s===W||!ud(i,o,r)))throw new Kn(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Kn(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=tb(n,i,o);if(!u)throw new Kn(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cO&&(this.allowRedirects=!1));let y=new Ri(o,l,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,CC(i),Xt(i),i.component??i._loadedComponent??null,i,bC(i),e),S=id(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let A=await this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e),M=await this.applyRedirects.lineralizeSegments(i,A);return this.processSegment(e,r,n,M.concat(m),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await Hl(tO(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new Kn(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=c,y=new Ri(p,f,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,CC(r),Xt(r),r.component??r._loadedComponent??null,r,bC(r),e),S=id(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(S.params),y.data=Object.freeze(S.data);let{segmentGroup:A,slicedSegments:M}=wC(n,p,m,u);if(M.length===0&&A.hasChildren()){let ue=await this.processChildren(l,u,A,y);return new Pt(y,ue)}if(u.length===0&&M.length===0)return new Pt(y,[]);let k=Xt(r)===o,Z=await this.processSegment(l,u,A,M,k?W:o,!0,y);return new Pt(y,Z instanceof Pt?[Z]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Hl(K1(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw Z1(n)}return{routes:[],injector:e}}};function uO(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function lO(t){let e=t.value.routeConfig;return e&&e.path===""}function nb(t){let e=[],n=new Set;for(let r of t){if(!lO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nb(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function CC(t){return t.data||{}}function bC(t){return t.resolve||{}}function dO(t,e,n,r,i,o,s){return gt(async c=>{let{state:u,tree:l}=await aO(t,e,n,r,c.extractedUrl,i,o,s);return z(N({},c),{targetSnapshot:u,urlAfterRedirects:l})})}function fO(t){return gt(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return re(e);let i=new Set(r.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let u of rb(c))o.add(u);let s=0;return ke(o).pipe(wu(c=>i.has(c)?hO(c,n,t):(c.data=id(c,c.parent,t).resolve,re(void 0))),sn(()=>s++),Cu(1),gt(c=>s===o.size?re(e):Je))})}function rb(t){let e=t.children.map(n=>rb(n)).flat();return[t,...e]}function hO(t,e,n){let r=t.routeConfig,i=t._resolve;return r?.title!==void 0&&!GC(r)&&(i[Ka]=r.title),qs(()=>(t.data=id(t,t.parent,n).resolve,pO(i,t,e).pipe(we(o=>(t._resolvedData=o,t.data=N(N({},t.data),o),null)))))}function pO(t,e,n){let r=cm(t);if(r.length===0)return re({});let i={};return ke(r).pipe(gt(o=>gO(t[o],e,n).pipe(Pn(),sn(s=>{if(s instanceof Lo)throw od(new Vr,s);i[o]=s}))),Cu(1),we(()=>i),Gs(o=>ZC(o)?Je:Rh(o)))}function gO(t,e,n){let r=e._environmentInjector,i=Uo(t,r),o=i.resolve?i.resolve(e,n):st(r,()=>i(e,n));return Oi(o)}function TC(t){return On(e=>{let n=t(e);return n?ke(n).pipe(we(()=>e)):re(e)})}var Cm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===W);return r}getResolvedTitleForRoute(n){return n.data[Ka]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(ib),providedIn:"root"})}return t})(),ib=(()=>{class t extends Cm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(X(yC))};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ja=new j("",{factory:()=>({})}),Xa=new j(""),ob=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(Hg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await MC(st(n,()=>r.loadComponent())),s=await cb(ab(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await sb(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function sb(t,e,n,r){let i=await MC(st(n,()=>t.loadChildren())),o=await cb(ab(i)),s;o instanceof Sl||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1,f;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,f=s,u=c.get(Xa,[],{optional:!0,self:!0}).flat()),{routes:u.map(wm),injector:c,factory:f}}function mO(t){return t&&typeof t=="object"&&"default"in t}function ab(t){return mO(t)?t.default:t}async function cb(t){return t}var ld=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(yO),providedIn:"root"})}return t})(),yO=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ub=new j("");var vO=()=>{},lb=new j(""),db=(()=>{class t{currentNavigation=tt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=tt(null);events=new $e;transitionAbortWithErrorSubject=new $e;configLoader=P(ob);environmentInjector=P(Be);destroyRef=P(pn);urlSerializer=P(Qa);rootContexts=P(Bo);location=P(Ro);inputBindingEnabled=P(cd,{optional:!0})!==null;titleStrategy=P(Cm);options=P(Ja,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(ld);createViewTransition=P(ub,{optional:!0});navigationErrorHandler=P(lb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Yl(i)),r=i=>this.events.next(new Zl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ct(()=>{this.transitions?.next(z(N({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ze(null),this.transitions.pipe(Nn(r=>r!==null),On(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return re(r).pipe(On(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",lt.SupersededByNewNavigation),Je;this.currentTransition=r;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:u?z(N({},u),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&f!=="reload")return this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.rawUrl),"",Ha.IgnoredSameUrlNavigation)),c.resolve(!1),Je;if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return re(c).pipe(On(p=>(this.events.next(new xi(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?Je:Promise.resolve(p))),dO(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),sn(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=p.urlAfterRedirects,y));let m=new ko(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:S,extras:A}=c,M=new xi(p,this.urlSerializer.serialize(m),y,S);this.events.next(M);let k=zC(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=z(N({},c),{targetSnapshot:k,urlAfterRedirects:m,extras:z(N({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(Z=>(Z.finalUrl=m,Z)),re(r)}else return this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.extractedUrl),"",Ha.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Je}),we(c=>{let u=new Gl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);return this.events.next(u),this.currentTransition=r=z(N({},c),{guards:M1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),r}),B1(c=>this.events.next(c)),On(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw od(this.urlSerializer,c.guardsResult);let u=new Wl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);if(this.events.next(u),!s())return Je;if(!c.guardsResult)return this.cancelNavigationTransition(c,"",lt.GuardRejected),Je;if(c.guards.canActivateChecks.length===0)return re(c);let l=new Kl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);if(this.events.next(l),!s())return Je;let f=!1;return re(c).pipe(fO(this.paramsInheritanceStrategy),sn({next:()=>{f=!0;let p=new Ql(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)},complete:()=>{f||this.cancelNavigationTransition(c,"",lt.NoDataFromResolver)}}))}),TC(c=>{let u=f=>{let p=[];if(f.routeConfig?._loadedComponent)f.component=f.routeConfig?._loadedComponent;else if(f.routeConfig?.loadComponent){let m=f._environmentInjector;p.push(this.configLoader.loadComponent(m,f.routeConfig).then(y=>{f.component=y}))}for(let m of f.children)p.push(...u(m));return p},l=u(c.targetSnapshot.root);return l.length===0?re(c):ke(Promise.all(l).then(()=>c))}),TC(()=>this.afterPreactivation()),On(()=>{let{currentSnapshot:c,targetSnapshot:u}=r,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?ke(l).pipe(we(()=>r)):re(r)}),xn(1),we(c=>{let u=b1(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);this.currentTransition=r=c=z(N({},c),{targetRouterState:u}),this.currentNavigation.update(l=>(l.targetRouterState=u,l)),this.events.next(new Fo),s()&&(new mm(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=vO,l)),this.lastSuccessfulNavigation.set(ct(this.currentNavigation)),this.events.next(new Qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)))}),Ws(JC(o.signal).pipe(Nn(()=>!i&&!r.targetRouterState),sn(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",lt.Aborted)}))),sn({complete:()=>{i=!0}}),Ws(this.transitionAbortWithErrorSubject.pipe(sn(c=>{throw c}))),Ph(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",lt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Gs(c=>{if(i=!0,this.destroyed)return r.resolve(!1),Je;if(YC(c))this.events.next(new $t(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),A1(c)?this.events.next(new Vo(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{let u=new Pi(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{let l=st(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof Lo){let{message:f,cancellationCode:p}=od(this.urlSerializer,l);this.events.next(new $t(r.id,this.urlSerializer.serialize(r.extractedUrl),f,p)),this.events.next(new Vo(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Je}))}))}cancelNavigationTransition(n,r,i){let o=new $t(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ct(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _O(t){return t!==Ba}var fb=new j("");var hb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(EO),providedIn:"root"})}return t})(),ad=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}},EO=(()=>{class t extends ad{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Sr(t)))(i||t)}})();static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bm=(()=>{class t{urlSerializer=P(Qa);options=P(Ja,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Ro);urlHandlingStrategy=P(ld);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new en;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof en?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=zC(null,P(Be));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:()=>P(DO),providedIn:"root"})}return t})(),DO=(()=>{class t extends bm{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof xi?this.updateStateMemento():n instanceof Yn?this.commitTransition(r):n instanceof ko?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Fo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof $t&&!HC(n)?this.restoreHistory(r):n instanceof Pi?this.restoreHistory(r,!0):n instanceof Qn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=N(N({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=N(N({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Sr(t)))(i||t)}})();static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tm(t,e){t.events.pipe(Nn(n=>n instanceof Qn||n instanceof $t||n instanceof Pi||n instanceof Yn),we(n=>n instanceof Qn||n instanceof Yn?0:(n instanceof $t?n.code===lt.Redirect||n.code===lt.SupersededByNewNavigation:!1)?2:1),Nn(n=>n!==2),xn(1)).subscribe(()=>{e()})}var pb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dd=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Lg);stateManager=P(bm);options=P(Ja,{optional:!0})||{};pendingTasks=P(br);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(db);urlSerializer=P(Qa);location=P(Ro);urlHandlingStrategy=P(ld);injector=P(Be);_events=new $e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(hb);injectorCleanup=P(fb,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Xa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(cd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ye;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ct(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $t&&r.code!==lt.Redirect&&r.code!==lt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Vo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=N({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_O(i.source)},s);this.scheduleNavigation(c,Ba,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}w1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ba,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=N({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get($n)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ct(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(wm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=jC(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return BC(p,n,f,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Oo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ba,null,r)}navigate(n,r={skipLocationChange:!1}){return IO(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Xs(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=N({},pb):r===!1?i=N({},gb):i=r,Oo(n))return vC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return vC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let f=this.pendingTasks.add();return Tm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}var bO=new j("");function Sm(t,...e){return Fu([{provide:Xa,multi:!0,useValue:t},[],{provide:Lr,useFactory:TO},{provide:Al,multi:!0,useFactory:SO},e.map(n=>n.\u0275providers)])}function TO(){return P(dd).routerState.root}function SO(){let t=P(kt);return e=>{let n=t.get(Nr);if(e!==n.components[0])return;let r=t.get(dd),i=t.get(AO);t.get(MO)===1&&r.initialNavigation(),t.get(RO,null,{optional:!0})?.setUpPreloading(),t.get(bO,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AO=new j("",{factory:()=>new $e}),MO=new j("",{factory:()=>1});var RO=new j("");var mb=[];var yb=()=>{};var Eb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Db={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Eb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Am;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Am=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},PO=function(t){let e=Eb(t);return Db.encodeByteArray(e,!0)},tc=function(t){return PO(t).replace(/\./g,"")},Ib=function(t){try{return Db.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OO=()=>wb().__FIREBASE_DEFAULTS__,kO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ib(t[1]);return e&&JSON.parse(e)},Mm=()=>{try{return yb()||OO()||kO()||FO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VO=t=>Mm()?.emulatorHosts?.[t],Cb=t=>{let e=VO(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rm=()=>Mm()?.config;var fd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function hd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bb(t){return(await fetch(t,{credentials:"include"})).ok}function Tb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=N({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tc(JSON.stringify(n)),tc(JSON.stringify(s)),""].join(".")}var ec={};function LO(){let t={prod:[],emulator:[]};for(let e of Object.keys(ec))ec[e]?t.emulator.push(e):t.prod.push(e);return t}function jO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var vb=!1;function Sb(t,e){if(typeof window>"u"||typeof document>"u"||!hd(window.location.host)||ec[t]===e||ec[t]||vb)return;ec[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=LO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{vb=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=jO(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),M=document.getElementById(A)||document.createElement("a"),k=n("preprendIcon"),Z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ue=m.element;c(ue),f(M,A);let Tt=l();u(Z,k),ue.append(Z,S,M,Tt),document.body.appendChild(ue)}o?(S.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ab(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BO(){let t=Mm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mb(){return!BO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nm(){try{return typeof indexedDB=="object"}catch{return!1}}function Rb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var UO="FirebaseError",Zn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nc.prototype.create)}},nc=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$O(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Zn(i,c,r)}};function $O(t,e){return t.replace(HO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HO=/\{\$([^}]+)}/g;function ki(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(_b(o)&&_b(s)){if(!ki(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function _b(t){return t!==null&&typeof t=="object"}var q7=14400*1e3;function _n(t){return t&&t._delegate?t._delegate:t}var Jn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Fi="[DEFAULT]";var xm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new fd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qO(e))try{this.getOrInitializeService({instanceIdentifier:Fi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fi){return this.instances.has(e)}getOptions(e=Fi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fi){return this.component?this.component.multipleInstances?e:Fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zO(t){return t===Fi?void 0:t}function qO(t){return t.instantiationMode==="EAGER"}var pd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new xm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var GO=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),WO={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},KO=oe.INFO,QO={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},YO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=QO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$o=class{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=YO,this._userLogHandler=null,GO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var ZO=(t,e)=>e.some(n=>t instanceof n),Nb,xb;function JO(){return Nb||(Nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XO(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Pb=new WeakMap,Om=new WeakMap,Ob=new WeakMap,Pm=new WeakMap,Fm=new WeakMap;function ek(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(En(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Pb.set(n,t)}).catch(()=>{}),Fm.set(e,t),e}function tk(t){if(Om.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Om.set(t,e)}var km={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ob.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kb(t){km=t(km)}function nk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(gd(this),e,...n);return Ob.set(r,e.sort?e.sort():[e]),En(r)}:XO().includes(t)?function(...e){return t.apply(gd(this),e),En(Pb.get(this))}:function(...e){return En(t.apply(gd(this),e))}}function rk(t){return typeof t=="function"?nk(t):(t instanceof IDBTransaction&&tk(t),ZO(t,JO())?new Proxy(t,km):t)}function En(t){if(t instanceof IDBRequest)return ek(t);if(Pm.has(t))return Pm.get(t);let e=rk(t);return e!==t&&(Pm.set(t,e),Fm.set(e,t)),e}var gd=t=>Fm.get(t);function Vb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=En(s);return r&&s.addEventListener("upgradeneeded",u=>{r(En(s.result),u.oldVersion,u.newVersion,En(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var ik=["get","getKey","getAll","getAllKeys","count"],ok=["put","add","delete","clear"],Vm=new Map;function Fb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ik.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return Vm.set(e,o),o}kb(t=>z(N({},t),{get:(e,n,r)=>Fb(e,n)||t.get(e,n,r),has:(e,n)=>!!Fb(e,n)||t.has(e,n)}));var jm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function sk(t){return t.getComponent()?.type==="VERSION"}var Bm="@firebase/app",Lb="0.14.7";var Xn=new $o("@firebase/app"),ak="@firebase/app-compat",ck="@firebase/analytics-compat",uk="@firebase/analytics",lk="@firebase/app-check-compat",dk="@firebase/app-check",fk="@firebase/auth",hk="@firebase/auth-compat",pk="@firebase/database",gk="@firebase/data-connect",mk="@firebase/database-compat",yk="@firebase/functions",vk="@firebase/functions-compat",_k="@firebase/installations",Ek="@firebase/installations-compat",Dk="@firebase/messaging",Ik="@firebase/messaging-compat",wk="@firebase/performance",Ck="@firebase/performance-compat",bk="@firebase/remote-config",Tk="@firebase/remote-config-compat",Sk="@firebase/storage",Ak="@firebase/storage-compat",Mk="@firebase/firestore",Rk="@firebase/ai",Nk="@firebase/firestore-compat",xk="firebase",Pk="12.8.0";var Um="[DEFAULT]",Ok={[Bm]:"fire-core",[ak]:"fire-core-compat",[uk]:"fire-analytics",[ck]:"fire-analytics-compat",[dk]:"fire-app-check",[lk]:"fire-app-check-compat",[fk]:"fire-auth",[hk]:"fire-auth-compat",[pk]:"fire-rtdb",[gk]:"fire-data-connect",[mk]:"fire-rtdb-compat",[yk]:"fire-fn",[vk]:"fire-fn-compat",[_k]:"fire-iid",[Ek]:"fire-iid-compat",[Dk]:"fire-fcm",[Ik]:"fire-fcm-compat",[wk]:"fire-perf",[Ck]:"fire-perf-compat",[bk]:"fire-rc",[Tk]:"fire-rc-compat",[Sk]:"fire-gcs",[Ak]:"fire-gcs-compat",[Mk]:"fire-fst",[Nk]:"fire-fst-compat",[Rk]:"fire-vertex","fire-js":"fire-js",[xk]:"fire-js-all"};var md=new Map,kk=new Map,$m=new Map;function jb(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rc(t){let e=t.name;if($m.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;$m.set(e,t);for(let n of md.values())jb(n,t);for(let n of kk.values())jb(n,t);return!0}function Hb(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zb(t){return t==null?!1:t.settings!==void 0}var Fk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new nc("app","Firebase",Fk);var Hm=class{constructor(e,n,r){this._isDeleted=!1,this._options=N({},e),this._config=N({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var qb=Pk;function Gm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=N({name:Um,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=Rm()),!n)throw jr.create("no-options");let o=md.get(i);if(o){if(ki(n,o.options)&&ki(r,o.config))return o;throw jr.create("duplicate-app",{appName:i})}let s=new pd(i);for(let u of $m.values())s.addComponent(u);let c=new Hm(n,r,s);return md.set(i,c),c}function Gb(t=Um){let e=md.get(t);if(!e&&t===Um&&Rm())return Gm();if(!e)throw jr.create("no-app",{appName:t});return e}function Br(t,e,n){let r=Ok[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(s.join(" "));return}rc(new Jn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Vk="firebase-heartbeat-database",Lk=1,ic="firebase-heartbeat-store",Lm=null;function Wb(){return Lm||(Lm=Vb(Vk,Lk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Lm}async function jk(t){try{let n=(await Wb()).transaction(ic),r=await n.objectStore(ic).get(Kb(t));return await n.done,r}catch(e){if(e instanceof Zn)Xn.warn(e.message);else{let n=jr.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(n.message)}}}async function Bb(t,e){try{let r=(await Wb()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,Kb(t)),await r.done}catch(n){if(n instanceof Zn)Xn.warn(n.message);else{let r=jr.create("idb-set",{originalErrorMessage:n?.message});Xn.warn(r.message)}}}function Kb(t){return`${t.name}!${t.options.appId}`}var Bk=1024,Uk=30,zm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new qm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ub();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Uk){let i=Hk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Ub(),{heartbeatsToSend:n,unsentEntries:r}=$k(this._heartbeatsCache.heartbeats),i=tc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Xn.warn(e),""}}};function Ub(){return new Date().toISOString().substring(0,10)}function $k(t,e=Bk){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),$b(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var qm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nm()?Rb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await jk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function $b(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}function Hk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function zk(t){rc(new Jn("platform-logger",e=>new jm(e),"PRIVATE")),rc(new Jn("heartbeat",e=>new zm(e),"PRIVATE")),Br(Bm,Lb,t),Br(Bm,Lb,"esm2020"),Br("fire-js","")}zk("");var qk="firebase",Gk="12.8.0";Br(qk,Gk,"app");var Qb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yb={};var er,Wm;(function(){var t;function e(I,v){function E(){}E.prototype=v.prototype,I.F=v.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(w,D,b){for(var _=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)_[vt-2]=arguments[vt];return v.prototype[D].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,E){E||(E=0);let w=Array(16);if(typeof v=="string")for(var D=0;D<16;++D)w[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;D<16;++D)w[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=I.g[0],E=I.g[1],D=I.g[2];let b=I.g[3],_;_=v+(b^E&(D^b))+w[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+w[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+w[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+w[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+w[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+w[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+w[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+w[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+w[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+w[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(b^E&(D^b))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(D^v&(E^D))+w[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=D+(E^b&(v^E))+w[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=E+(v^D&(b^v))+w[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^b&(E^D))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+w[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+w[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+w[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+w[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+w[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+w[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+w[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+w[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+w[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^b&(E^D))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^D&(v^E))+w[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(b^v))+w[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(D^b))+w[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^b)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+w[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+w[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+w[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+w[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+w[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+w[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+w[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+w[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+w[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^b)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^D)+w[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=D+(b^v^E)+w[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=E+(D^b^v)+w[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~b))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+w[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+w[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+w[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+w[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+w[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+w[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+w[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+w[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+w[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~b))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~D))+w[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=D+(v^(b|~E))+w[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=E+(b^(D|~v))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.v=function(I,v){v===void 0&&(v=I.length);let E=v-this.blockSize,w=this.C,D=this.h,b=0;for(;b<v;){if(D==0)for(;b<=E;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<v;)if(w[D++]=I.charCodeAt(b++),D==this.blockSize){i(this,w),D=0;break}}else for(;b<v;)if(w[D++]=I[b++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;v=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=v&255,v/=256;for(this.v(I),I=Array(16),v=0,E=0;E<4;++E)for(let w=0;w<32;w+=8)I[v++]=this.g[E]>>>w&255;return I};function o(I,v){var E=c;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=v(I)}function s(I,v){this.h=v;let E=[],w=!0;for(let D=I.length-1;D>=0;D--){let b=I[D]|0;w&&b==v||(E[D]=b,w=!1)}this.g=E}var c={};function u(I){return-128<=I&&I<128?o(I,function(v){return new s([v|0],v<0?-1:0)}):new s([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return M(l(-I));let v=[],E=1;for(let w=0;I>=E;w++)v[w]=I/E|0,E*=4294967296;return new s(v,0)}function f(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return M(f(I.substring(1),v));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),w=p;for(let b=0;b<I.length;b+=8){var D=Math.min(8,I.length-b);let _=parseInt(I.substring(b,b+D),v);D<8?(D=l(Math.pow(v,D)),w=w.j(D).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-M(this).m();let I=0,v=1;for(let E=0;E<this.g.length;E++){let w=this.i(E);I+=(w>=0?w:4294967296+w)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(S(this))return"0";if(A(this))return"-"+M(this).toString(I);let v=l(Math.pow(I,6));var E=this;let w="";for(;;){let D=Tt(E,v).g;E=k(E,D.j(v));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=D,S(E))return b+w;for(;b.length<6;)b="0"+b;w=b+w}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function S(I){if(I.h!=0)return!1;for(let v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function A(I){return I.h==-1}t.l=function(I){return I=k(this,I),A(I)?-1:S(I)?0:1};function M(I){let v=I.g.length,E=[];for(let w=0;w<v;w++)E[w]=~I.g[w];return new s(E,~I.h).add(m)}t.abs=function(){return A(this)?M(this):this},t.add=function(I){let v=Math.max(this.g.length,I.g.length),E=[],w=0;for(let D=0;D<=v;D++){let b=w+(this.i(D)&65535)+(I.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);w=_>>>16,b&=65535,_&=65535,E[D]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(I,v){return I.add(M(v))}t.j=function(I){if(S(this)||S(I))return p;if(A(this))return A(I)?M(this).j(M(I)):M(M(this).j(I));if(A(I))return M(this.j(M(I)));if(this.l(y)<0&&I.l(y)<0)return l(this.m()*I.m());let v=this.g.length+I.g.length,E=[];for(var w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(let D=0;D<I.g.length;D++){let b=this.i(w)>>>16,_=this.i(w)&65535,vt=I.i(D)>>>16,dr=I.i(D)&65535;E[2*w+2*D]+=_*dr,Z(E,2*w+2*D),E[2*w+2*D+1]+=b*dr,Z(E,2*w+2*D+1),E[2*w+2*D+1]+=_*vt,Z(E,2*w+2*D+1),E[2*w+2*D+2]+=b*vt,Z(E,2*w+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Z(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function ue(I,v){this.g=I,this.h=v}function Tt(I,v){if(S(v))throw Error("division by zero");if(S(I))return new ue(p,p);if(A(I))return v=Tt(M(I),v),new ue(M(v.g),M(v.h));if(A(v))return v=Tt(I,M(v)),new ue(M(v.g),v.h);if(I.g.length>30){if(A(I)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=v;w.l(I)<=0;)E=qt(E),w=qt(w);var D=Qe(E,1),b=Qe(w,1);for(w=Qe(w,2),E=Qe(E,2);!S(w);){var _=b.add(w);_.l(I)<=0&&(D=D.add(E),b=_),w=Qe(w,1),E=Qe(E,1)}return v=k(I,D.j(v)),new ue(D,v)}for(D=p;I.l(v)>=0;){for(E=Math.max(1,Math.floor(I.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),b=l(E),_=b.j(v);A(_)||_.l(I)>0;)E-=w,b=l(E),_=b.j(v);S(b)&&(b=m),D=D.add(b),I=k(I,_)}return new ue(D,I)}t.B=function(I){return Tt(this,I).h},t.and=function(I){let v=Math.max(this.g.length,I.g.length),E=[];for(let w=0;w<v;w++)E[w]=this.i(w)&I.i(w);return new s(E,this.h&I.h)},t.or=function(I){let v=Math.max(this.g.length,I.g.length),E=[];for(let w=0;w<v;w++)E[w]=this.i(w)|I.i(w);return new s(E,this.h|I.h)},t.xor=function(I){let v=Math.max(this.g.length,I.g.length),E=[];for(let w=0;w<v;w++)E[w]=this.i(w)^I.i(w);return new s(E,this.h^I.h)};function qt(I){let v=I.g.length+1,E=[];for(let w=0;w<v;w++)E[w]=I.i(w)<<1|I.i(w-1)>>>31;return new s(E,I.h)}function Qe(I,v){let E=v>>5;v%=32;let w=I.g.length-E,D=[];for(let b=0;b<w;b++)D[b]=v>0?I.i(b+E)>>>v|I.i(b+E+1)<<32-v:I.i(b+E);return new s(D,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wm=Yb.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,er=Yb.Integer=s}).apply(typeof Qb<"u"?Qb:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var Km,Wk,Ho,Qm,oc,vd,Ym,Zm,Jm;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in h))break e;h=h[C]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,h){return a.call.apply(a.bind,arguments)}function l(a,d,h){return l=u,l.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(g,C,T){for(var O=Array(arguments.length-2),J=2;J<arguments.length;J++)O[J-2]=arguments[J];return d.prototype[C].apply(g,O)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function S(a,d){for(let g=1;g<arguments.length;g++){let C=arguments[g];var h=typeof C;if(h=h!="object"?h:C?Array.isArray(C)?"array":h:"null",h=="array"||h=="object"&&typeof C.length=="number"){h=a.length||0;let T=C.length||0;a.length=h+T;for(let O=0;O<T;O++)a[h+O]=C[O]}else a.push(C)}}class A{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function M(a){s.setTimeout(()=>{throw a},0)}function k(){var a=I;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Z{constructor(){this.h=this.g=null}add(d,h){let g=ue.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var ue=new A(()=>new Tt,a=>a.reset());class Tt{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let qt,Qe=!1,I=new Z,v=()=>{let a=Promise.resolve(void 0);qt=()=>{a.then(E)}};function E(){for(var a;a=k();){try{a.h.call(a.g)}catch(h){M(h)}var d=ue;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Qe=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function vt(a,d){D.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(vt,D),vt.prototype.init=function(a,d){let h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&vt.Z.h.call(this)},vt.prototype.h=function(){vt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var dr="closure_listenable_"+(Math.random()*1e6|0),U0=0;function $0(a,d,h,g,C){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=C,this.key=++U0,this.da=this.fa=!1}function xc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Pc(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function H0(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function d_(a){let d={};for(let h in a)d[h]=a[h];return d}let f_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function h_(a,d){let h,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(h in g)a[h]=g[h];for(let T=0;T<f_.length;T++)h=f_[T],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function Oc(a){this.src=a,this.g={},this.h=0}Oc.prototype.add=function(a,d,h,g,C){let T=a.toString();a=this.g[T],a||(a=this.g[T]=[],this.h++);let O=Bf(a,d,g,C);return O>-1?(d=a[O],h||(d.fa=!1)):(d=new $0(d,this.src,T,!!g,C),d.fa=h,a.push(d)),d};function jf(a,d){let h=d.type;if(h in a.g){var g=a.g[h],C=Array.prototype.indexOf.call(g,d,void 0),T;(T=C>=0)&&Array.prototype.splice.call(g,C,1),T&&(xc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Bf(a,d,h,g){for(let C=0;C<a.length;++C){let T=a[C];if(!T.da&&T.listener==d&&T.capture==!!h&&T.ha==g)return C}return-1}var Uf="closure_lm_"+(Math.random()*1e6|0),$f={};function p_(a,d,h,g,C){if(g&&g.once)return m_(a,d,h,g,C);if(Array.isArray(d)){for(let T=0;T<d.length;T++)p_(a,d[T],h,g,C);return null}return h=Gf(h),a&&a[dr]?a.J(d,h,c(g)?!!g.capture:!!g,C):g_(a,d,h,!1,g,C)}function g_(a,d,h,g,C,T){if(!d)throw Error("Invalid event type");let O=c(C)?!!C.capture:!!C,J=zf(a);if(J||(a[Uf]=J=new Oc(a)),h=J.add(d,h,g,O,T),h.proxy)return h;if(g=z0(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)b||(C=O),C===void 0&&(C=!1),a.addEventListener(d.toString(),g,C);else if(a.attachEvent)a.attachEvent(v_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function z0(){function a(h){return d.call(a.src,a.listener,h)}let d=q0;return a}function m_(a,d,h,g,C){if(Array.isArray(d)){for(let T=0;T<d.length;T++)m_(a,d[T],h,g,C);return null}return h=Gf(h),a&&a[dr]?a.K(d,h,c(g)?!!g.capture:!!g,C):g_(a,d,h,!0,g,C)}function y_(a,d,h,g,C){if(Array.isArray(d))for(var T=0;T<d.length;T++)y_(a,d[T],h,g,C);else g=c(g)?!!g.capture:!!g,h=Gf(h),a&&a[dr]?(a=a.i,T=String(d).toString(),T in a.g&&(d=a.g[T],h=Bf(d,h,g,C),h>-1&&(xc(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[T],a.h--)))):a&&(a=zf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Bf(d,h,g,C)),(h=a>-1?d[a]:null)&&Hf(h))}function Hf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[dr])jf(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(v_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=zf(d))?(jf(h,a),h.h==0&&(h.src=null,d[Uf]=null)):xc(a)}}}function v_(a){return a in $f?$f[a]:$f[a]="on"+a}function q0(a,d){if(a.da)a=!0;else{d=new vt(d,this);let h=a.listener,g=a.ha||a.src;a.fa&&Hf(a),a=h.call(g,d)}return a}function zf(a){return a=a[Uf],a instanceof Oc?a:null}var qf="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gf(a){return typeof a=="function"?a:(a[qf]||(a[qf]=function(d){return a.handleEvent(d)}),a[qf])}function it(){w.call(this),this.i=new Oc(this),this.M=this,this.G=null}p(it,w),it.prototype[dr]=!0,it.prototype.removeEventListener=function(a,d,h,g){y_(this,a,d,h,g)};function ft(a,d){var h,g=a.G;if(g)for(h=[];g;g=g.G)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new D(d,a);else if(d instanceof D)d.target=d.target||a;else{var C=d;d=new D(g,a),h_(d,C)}C=!0;let T,O;if(h)for(O=h.length-1;O>=0;O--)T=d.g=h[O],C=kc(T,g,!0,d)&&C;if(T=d.g=a,C=kc(T,g,!0,d)&&C,C=kc(T,g,!1,d)&&C,h)for(O=0;O<h.length;O++)T=d.g=h[O],C=kc(T,g,!1,d)&&C}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let g=0;g<h.length;g++)xc(h[g]);delete a.g[d],a.h--}}this.G=null},it.prototype.J=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},it.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function kc(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let C=!0;for(let T=0;T<d.length;++T){let O=d[T];if(O&&!O.da&&O.capture==h){let J=O.listener,je=O.ha||O.src;O.fa&&jf(a.i,O),C=J.call(je,g)!==!1&&C}}return C&&!g.defaultPrevented}function G0(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function __(a){a.g=G0(()=>{a.g=null,a.i&&(a.i=!1,__(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class W0 extends w{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:__(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(a){w.call(this),this.h=a,this.g={}}p(Is,w);var E_=[];function D_(a){Pc(a.g,function(d,h){this.g.hasOwnProperty(h)&&Hf(d)},a),a.g={}}Is.prototype.N=function(){Is.Z.N.call(this),D_(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wf=s.JSON.stringify,K0=s.JSON.parse,Q0=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function I_(){}function w_(){}var ws={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kf(){D.call(this,"d")}p(Kf,D);function Qf(){D.call(this,"c")}p(Qf,D);var Gr={},C_=null;function Fc(){return C_=C_||new it}Gr.Ia="serverreachability";function b_(a){D.call(this,Gr.Ia,a)}p(b_,D);function Cs(a){let d=Fc();ft(d,new b_(d))}Gr.STAT_EVENT="statevent";function T_(a,d){D.call(this,Gr.STAT_EVENT,a),this.stat=d}p(T_,D);function ht(a){let d=Fc();ft(d,new T_(d,a))}Gr.Ja="timingevent";function S_(a,d){D.call(this,Gr.Ja,a),this.size=d}p(S_,D);function bs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ts(){this.g=!0}Ts.prototype.ua=function(){this.g=!1};function Y0(a,d,h,g,C,T){a.info(function(){if(a.g)if(T){var O="",J=T.split("&");for(let _e=0;_e<J.length;_e++){var je=J[_e].split("=");if(je.length>1){let Ue=je[0];je=je[1];let on=Ue.split("_");O=on.length>=2&&on[1]=="type"?O+(Ue+"="+je+"&"):O+(Ue+"=redacted&")}}}else O=null;else O=T;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+h+`
`+O})}function Z0(a,d,h,g,C,T,O){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+h+`
`+T+" "+O})}function Ji(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+X0(a,h)+(g?" "+g:"")})}function J0(a,d){a.info(function(){return"TIMEOUT: "+d})}Ts.prototype.info=function(){};function X0(a,d){if(!a.g)return d;if(!d)return null;try{let T=JSON.parse(d);if(T){for(a=0;a<T.length;a++)if(Array.isArray(T[a])){var h=T[a];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var C=g[0];if(C!="noop"&&C!="stop"&&C!="close")for(let O=1;O<g.length;O++)g[O]=""}}}}return Wf(T)}catch{return d}}var Vc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},A_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},M_;function Yf(){}p(Yf,I_),Yf.prototype.g=function(){return new XMLHttpRequest},M_=new Yf;function Ss(a){return encodeURIComponent(String(a))}function eA(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function fr(a,d,h,g){this.j=a,this.i=d,this.l=h,this.S=g||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new R_}function R_(){this.i=null,this.g="",this.h=!1}var N_={},Zf={};function Jf(a,d,h){a.M=1,a.A=jc(rn(d)),a.u=h,a.R=!0,x_(a,null)}function x_(a,d){a.F=Date.now(),Lc(a),a.B=rn(a.A);var h=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),q_(h.i,"t",g),a.C=0,h=a.j.L,a.h=new R_,a.g=uE(a.j,h?d:null,!a.u),a.P>0&&(a.O=new W0(l(a.Y,a,a.g),a.P)),d=a.V,h=a.g,g=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(E_[0]=C.toString()),C=E_);for(let T=0;T<C.length;T++){let O=p_(h,C[T],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.J?d_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Cs(),Y0(a.i,a.v,a.B,a.l,a.S,a.u)}fr.prototype.ba=function(a){a=a.target;let d=this.O;d&&gr(a)==3?d.j():this.Y(a)},fr.prototype.Y=function(a){try{if(a==this.g)e:{let J=gr(this.g),je=this.g.ya(),_e=this.g.ca();if(!(J<3)&&(J!=3||this.g&&(this.h.h||this.g.la()||J_(this.g)))){this.K||J!=4||je==7||(je==8||_e<=0?Cs(3):Cs(2)),Xf(this);var d=this.g.ca();this.X=d;var h=tA(this);if(this.o=d==200,Z0(this.i,this.v,this.B,this.l,this.S,J,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,C=this.g;if((g=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var T=g;break t}}T=null}if(a=T)Ji(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eh(this,a);else{this.o=!1,this.m=3,ht(12),Wr(this),As(this);break e}}if(this.R){a=!0;let Ue;for(;!this.K&&this.C<h.length;)if(Ue=nA(this,h),Ue==Zf){J==4&&(this.m=4,ht(14),a=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==N_){this.m=4,ht(15),Ji(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else Ji(this.i,this.l,Ue,null),eh(this,Ue);if(P_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J!=4||h.length!=0||this.h.h||(this.m=1,ht(16),a=!1),this.o=this.o&&a,!a)Ji(this.i,this.l,h,"[Invalid Chunked Response]"),Wr(this),As(this);else if(h.length>0&&!this.W){this.W=!0;var O=this.j;O.g==this&&O.aa&&!O.P&&(O.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),ah(O),O.P=!0,ht(11))}}else Ji(this.i,this.l,h,null),eh(this,h);J==4&&Wr(this),this.o&&!this.K&&(J==4?oE(this.j,this):(this.o=!1,Lc(this)))}else mA(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Wr(this),As(this)}}}catch{}};function tA(a){if(!P_(a))return a.g.la();let d=J_(a.g);if(d==="")return"";let h="",g=d.length,C=gr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Wr(a),As(a),"";a.h.i=new s.TextDecoder}for(let T=0;T<g;T++)a.h.h=!0,h+=a.h.i.decode(d[T],{stream:!(C&&T==g-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function P_(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function nA(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Zf:(h=Number(d.substring(h,g)),isNaN(h)?N_:(g+=1,g+h>d.length?Zf:(d=d.slice(g,g+h),a.C=g+h,d)))}fr.prototype.cancel=function(){this.K=!0,Wr(this)};function Lc(a){a.T=Date.now()+a.H,O_(a,a.H)}function O_(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=bs(l(a.aa,a),d)}function Xf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}fr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(J0(this.i,this.B),this.M!=2&&(Cs(),ht(17)),Wr(this),this.m=2,As(this)):O_(this,this.T-a)};function As(a){a.j.I==0||a.K||oE(a.j,a)}function Wr(a){Xf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,D_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function eh(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||th(h.h,a))){if(!a.L&&th(h.h,a)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)qc(h),Hc(h);else break e;sh(h),ht(18)}}else h.xa=C[1],0<h.xa-h.K&&C[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=bs(l(h.Va,h),6e3));V_(h.h)<=1&&h.ta&&(h.ta=void 0)}else Qr(h,11)}else if((a.L||h.g==a)&&qc(h),!_(d))for(C=h.Ba.g.parse(d),d=0;d<C.length;d++){let _e=C[d],Ue=_e[0];if(!(Ue<=h.K))if(h.K=Ue,_e=_e[1],h.I==2)if(_e[0]=="c"){h.M=_e[1],h.ba=_e[2];let on=_e[3];on!=null&&(h.ka=on,h.j.info("VER="+h.ka));let Yr=_e[4];Yr!=null&&(h.za=Yr,h.j.info("SVER="+h.za));let mr=_e[5];mr!=null&&typeof mr=="number"&&mr>0&&(g=1.5*mr,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let yr=a.g;if(yr){let Wc=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wc){var T=g.h;T.g||Wc.indexOf("spdy")==-1&&Wc.indexOf("quic")==-1&&Wc.indexOf("h2")==-1||(T.j=T.l,T.g=new Set,T.h&&(nh(T,T.h),T.h=null))}if(g.G){let ch=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;ch&&(g.wa=ch,De(g.J,g.G,ch))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var O=a;if(g.na=cE(g,g.L?g.ba:null,g.W),O.L){L_(g.h,O);var J=O,je=g.O;je&&(J.H=je),J.D&&(Xf(J),Lc(J)),g.g=O}else rE(g);h.i.length>0&&zc(h)}else _e[0]!="stop"&&_e[0]!="close"||Qr(h,7);else h.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Qr(h,7):oh(h):_e[0]!="noop"&&h.l&&h.l.qa(_e),h.A=0)}}Cs(4)}catch{}}var rA=class{constructor(a,d){this.g=a,this.map=d}};function k_(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function F_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function V_(a){return a.h?1:a.g?a.g.size:0}function th(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function nh(a,d){a.g?a.g.add(d):a.h=d}function L_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}k_.prototype.cancel=function(){if(this.i=j_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function j_(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return y(a.i)}var B_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iA(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let g=a[h].indexOf("="),C,T=null;g>=0?(C=a[h].substring(0,g),T=a[h].substring(g+1)):C=a[h],d(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function hr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof hr?(this.l=a.l,Ms(this,a.j),this.o=a.o,this.g=a.g,Rs(this,a.u),this.h=a.h,rh(this,G_(a.i)),this.m=a.m):a&&(d=String(a).match(B_))?(this.l=!1,Ms(this,d[1]||"",!0),this.o=Ns(d[2]||""),this.g=Ns(d[3]||"",!0),Rs(this,d[4]),this.h=Ns(d[5]||"",!0),rh(this,d[6]||"",!0),this.m=Ns(d[7]||"")):(this.l=!1,this.i=new Ps(null,this.l))}hr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(xs(d,U_,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(xs(d,U_,!0),"@"),a.push(Ss(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(xs(h,h.charAt(0)=="/"?aA:sA,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",xs(h,uA)),a.join("")},hr.prototype.resolve=function(a){let d=rn(this),h=!!a.j;h?Ms(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var g=a.h;if(h)Rs(d,a.u);else if(h=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var C=d.h.lastIndexOf("/");C!=-1&&(g=d.h.slice(0,C+1)+g)}if(C=g,C==".."||C==".")g="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){g=C.lastIndexOf("/",0)==0,C=C.split("/");let T=[];for(let O=0;O<C.length;){let J=C[O++];J=="."?g&&O==C.length&&T.push(""):J==".."?((T.length>1||T.length==1&&T[0]!="")&&T.pop(),g&&O==C.length&&T.push("")):(T.push(J),g=!0)}g=T.join("/")}else g=C}return h?d.h=g:h=a.i.toString()!=="",h?rh(d,G_(a.i)):h=!!a.m,h&&(d.m=a.m),d};function rn(a){return new hr(a)}function Ms(a,d,h){a.j=h?Ns(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Rs(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function rh(a,d,h){d instanceof Ps?(a.i=d,lA(a.i,a.l)):(h||(d=xs(d,cA)),a.i=new Ps(d,a.l))}function De(a,d,h){a.i.set(d,h)}function jc(a){return De(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ns(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function xs(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,oA),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var U_=/[#\/\?@]/g,sA=/[#\?:]/g,aA=/[#\?]/g,cA=/[#\?@]/g,uA=/#/g;function Ps(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kr(a){a.g||(a.g=new Map,a.h=0,a.i&&iA(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Ps.prototype,t.add=function(a,d){Kr(this),this.i=null,a=Xi(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function $_(a,d){Kr(a),d=Xi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function H_(a,d){return Kr(a),d=Xi(a,d),a.g.has(d)}t.forEach=function(a,d){Kr(this),this.g.forEach(function(h,g){h.forEach(function(C){a.call(d,C,g,this)},this)},this)};function z_(a,d){Kr(a);let h=[];if(typeof d=="string")H_(a,d)&&(h=h.concat(a.g.get(Xi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}t.set=function(a,d){return Kr(this),this.i=null,a=Xi(this,a),H_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=z_(this,a),a.length>0?String(a[0]):d):d};function q_(a,d,h){$_(a,d),h.length>0&&(a.i=null,a.g.set(Xi(a,d),y(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let C=Ss(h);h=z_(this,h);for(let T=0;T<h.length;T++){let O=C;h[T]!==""&&(O+="="+Ss(h[T])),a.push(O)}}return this.i=a.join("&")};function G_(a){let d=new Ps;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Xi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function lA(a,d){d&&!a.j&&(Kr(a),a.i=null,a.g.forEach(function(h,g){let C=g.toLowerCase();g!=C&&($_(this,g),q_(this,C,h))},a)),a.j=d}function dA(a,d){let h=new Ts;if(s.Image){let g=new Image;g.onload=f(pr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(pr,h,"TestLoadImage: error",!1,d,g),g.onabort=f(pr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(pr,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function fA(a,d){let h=new Ts,g=new AbortController,C=setTimeout(()=>{g.abort(),pr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(T=>{clearTimeout(C),T.ok?pr(h,"TestPingServer: ok",!0,d):pr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),pr(h,"TestPingServer: error",!1,d)})}function pr(a,d,h,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(h)}catch{}}function hA(){this.g=new Q0}function Bc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Bc,I_),Bc.prototype.g=function(){return new Uc(this.i,this.h)};function Uc(a,d){it.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Uc,it),t=Uc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,ks(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;W_(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function W_(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Os(this):ks(this),this.readyState==3&&W_(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Os(this))},t.Na=function(a){this.g&&(this.response=a,Os(this))},t.ga=function(){this.g&&Os(this)};function Os(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ks(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function ks(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function K_(a){let d="";return Pc(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function ih(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=K_(h),typeof a=="string"?h!=null&&Ss(h):De(a,d,h))}function Ae(a){it.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,it);var pA=/^https?$/i,gA=["POST","PUT"];t=Ae.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():M_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(T){Q_(this,T);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)h.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let T of g.keys())h.set(T,g.get(T));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(T=>T.toLowerCase()=="content-type"),C=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(gA,d,void 0)>=0)||g||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[T,O]of h)this.g.setRequestHeader(T,O);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(T){Q_(this,T)}};function Q_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Y_(a),$c(a)}function Y_(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ft(this,"complete"),ft(this,"abort"),$c(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$c(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Z_(this):this.Xa())},t.Xa=function(){Z_(this)};function Z_(a){if(a.h&&typeof o<"u"){if(a.v&&gr(a)==4)setTimeout(a.Ca.bind(a),0);else if(ft(a,"readystatechange"),gr(a)==4){a.h=!1;try{let T=a.ca();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=T===0){let O=String(a.D).match(B_)[1]||null;!O&&s.self&&s.self.location&&(O=s.self.location.protocol.slice(0,-1)),g=!pA.test(O?O.toLowerCase():"")}h=g}if(h)ft(a,"complete"),ft(a,"success");else{a.o=6;try{var C=gr(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Y_(a)}}finally{$c(a)}}}}function $c(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||ft(a,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),K0(d)}};function J_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function mA(a){let d={};a=(a.g&&gr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var h=eA(a[g]);let C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let T=d[C]||[];d[C]=T,T.push(h)}H0(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function X_(a){this.za=0,this.i=[],this.j=new Ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fs("baseRetryDelayMs",5e3,a),this.Za=Fs("retryDelaySeedMs",1e4,a),this.Ta=Fs("forwardChannelMaxRetries",2,a),this.va=Fs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new k_(a&&a.concurrentRequestLimit),this.Ba=new hA,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=X_.prototype,t.ka=8,t.I=1,t.connect=function(a,d,h,g){ht(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=cE(this,null,this.W),zc(this)};function oh(a){if(eE(a),a.I==3){var d=a.V++,h=rn(a.J);if(De(h,"SID",a.M),De(h,"RID",d),De(h,"TYPE","terminate"),Vs(a,h),d=new fr(a,a.j,d),d.M=2,d.A=jc(rn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=uE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Lc(d)}aE(a)}function Hc(a){a.g&&(ah(a),a.g.cancel(),a.g=null)}function eE(a){Hc(a),a.v&&(s.clearTimeout(a.v),a.v=null),qc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function zc(a){if(!F_(a.h)&&!a.m){a.m=!0;var d=a.Ea;qt||v(),Qe||(qt(),Qe=!0),I.add(d,a),a.D=0}}function yA(a,d){return V_(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=bs(l(a.Ea,a,d),sE(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let C=new fr(this,this.j,a),T=this.o;if(this.U&&(T?(T=d_(T),h_(T,this.U)):T=this.U),this.u!==null||this.R||(C.J=T,T=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=nE(this,C,d),h=rn(this.J),De(h,"RID",a),De(h,"CVER",22),this.G&&De(h,"X-HTTP-Session-Id",this.G),Vs(this,h),T&&(this.R?d="headers="+Ss(K_(T))+"&"+d:this.u&&ih(h,this.u,T)),nh(this.h,C),this.Ra&&De(h,"TYPE","init"),this.S?(De(h,"$req",d),De(h,"SID","null"),C.U=!0,Jf(C,h,null)):Jf(C,h,d),this.I=2}}else this.I==3&&(a?tE(this,a):this.i.length==0||F_(this.h)||tE(this))};function tE(a,d){var h;d?h=d.l:h=a.V++;let g=rn(a.J);De(g,"SID",a.M),De(g,"RID",h),De(g,"AID",a.K),Vs(a,g),a.u&&a.o&&ih(g,a.u,a.o),h=new fr(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=nE(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),nh(a.h,h),Jf(h,g,d)}function Vs(a,d){a.H&&Pc(a.H,function(h,g){De(d,g,h)}),a.l&&Pc({},function(h,g){De(d,g,h)})}function nE(a,d,h){h=Math.min(a.i.length,h);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var C=a.i;let J=-1;for(;;){let je=["count="+h];J==-1?h>0?(J=C[0].g,je.push("ofs="+J)):J=0:je.push("ofs="+J);let _e=!0;for(let Ue=0;Ue<h;Ue++){var T=C[Ue].g;let on=C[Ue].map;if(T-=J,T<0)J=Math.max(0,C[Ue].g-100),_e=!1;else try{T="req"+T+"_"||"";try{var O=on instanceof Map?on:Object.entries(on);for(let[Yr,mr]of O){let yr=mr;c(mr)&&(yr=Wf(mr)),je.push(T+Yr+"="+encodeURIComponent(yr))}}catch(Yr){throw je.push(T+"type="+encodeURIComponent("_badmap")),Yr}}catch{g&&g(on)}}if(_e){O=je.join("&");break e}}O=void 0}return a=a.i.splice(0,h),d.G=a,O}function rE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;qt||v(),Qe||(qt(),Qe=!0),I.add(d,a),a.A=0}}function sh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=bs(l(a.Da,a),sE(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,iE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=bs(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Hc(this),iE(this))};function ah(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function iE(a){a.g=new fr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=rn(a.na);De(d,"RID","rpc"),De(d,"SID",a.M),De(d,"AID",a.K),De(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&De(d,"TO",a.ia),De(d,"TYPE","xmlhttp"),Vs(a,d),a.u&&a.o&&ih(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=jc(rn(d)),h.u=null,h.R=!0,x_(h,a)}t.Va=function(){this.C!=null&&(this.C=null,Hc(this),sh(this),ht(19))};function qc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function oE(a,d){var h=null;if(a.g==d){qc(a),ah(a),a.g=null;var g=2}else if(th(a.h,d))h=d.G,L_(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var C=a.D;g=Fc(),ft(g,new S_(g,h)),zc(a)}else rE(a);else if(C=d.m,C==3||C==0&&d.X>0||!(g==1&&yA(a,d)||g==2&&sh(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),C){case 1:Qr(a,5);break;case 4:Qr(a,10);break;case 3:Qr(a,6);break;default:Qr(a,2)}}}function sE(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function Qr(a,d){if(a.j.info("Error code "+d),d==2){var h=l(a.bb,a),g=a.Ua;let C=!g;g=new hr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ms(g,"https"),jc(g),C?dA(g.toString(),h):fA(g.toString(),h)}else ht(2);a.I=0,a.l&&a.l.pa(d),aE(a),eE(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function aE(a){if(a.I=0,a.ja=[],a.l){let d=j_(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function cE(a,d,h){var g=h instanceof hr?rn(h):new hr(h);if(g.g!="")d&&(g.g=d+"."+g.g),Rs(g,g.u);else{var C=s.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;let T=new hr(null);g&&Ms(T,g),d&&(T.g=d),C&&Rs(T,C),h&&(T.h=h),g=T}return h=a.G,d=a.wa,h&&d&&De(g,h,d),De(g,"VER",a.ka),Vs(a,g),g}function uE(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Ae(new Bc({ab:h})):new Ae(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lE(){}t=lE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gc(){}Gc.prototype.g=function(a,d){return new St(a,d)};function St(a,d){it.call(this),this.g=new X_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new eo(this)}p(St,it),St.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){oh(this.g)},St.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=Wf(a),a=h);d.i.push(new rA(d.Ya++,a)),d.I==3&&zc(d)},St.prototype.N=function(){this.g.l=null,delete this.j,oh(this.g),delete this.g,St.Z.N.call(this)};function dE(a){Kf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(dE,Kf);function fE(){Qf.call(this),this.status=1}p(fE,Qf);function eo(a){this.g=a}p(eo,lE),eo.prototype.ra=function(){ft(this.g,"a")},eo.prototype.qa=function(a){ft(this.g,new dE(a))},eo.prototype.pa=function(a){ft(this.g,new fE)},eo.prototype.oa=function(){ft(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,Jm=tr.createWebChannelTransport=function(){return new Gc},Zm=tr.getStatEventTarget=function(){return Fc()},Ym=tr.Event=Gr,vd=tr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vc.NO_ERROR=0,Vc.TIMEOUT=8,Vc.HTTP_ERROR=6,oc=tr.ErrorCode=Vc,A_.COMPLETE="complete",Qm=tr.EventType=A_,w_.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",it.prototype.listen=it.prototype.J,Ho=tr.WebChannel=w_,Wk=tr.FetchXmlHttpFactory=Bc,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,Km=tr.XhrIo=Ae}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});var We=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");var ds="12.8.0";function FT(t){ds=t}var ji=new $o("@firebase/firestore");function zo(){return ji.logLevel}function F(t,...e){if(ji.logLevel<=oe.DEBUG){let n=e.map(Rv);ji.debug(`Firestore (${ds}): ${t}`,...n)}}function ir(t,...e){if(ji.logLevel<=oe.ERROR){let n=e.map(Rv);ji.error(`Firestore (${ds}): ${t}`,...n)}}function Ur(t,...e){if(ji.logLevel<=oe.WARN){let n=e.map(Rv);ji.warn(`Firestore (${ds}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function $(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VT(t,r,n)}function VT(t,e,n){let r=`FIRESTORE (${ds}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||VT(e,i,r)}function K(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var bd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Td=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}},iy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Sd=class{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new bd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new We(e)}},oy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},sy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oy(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ad=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Md=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zb(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ad(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ad(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Kk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bi=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Kk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ne(t,e){return t<e?-1:t>e?1:0}function ay(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return Xm(i)===Xm(o)?ne(i,o):Xm(i)?1:-1}return ne(t.length,e.length)}var Qk=55296,Yk=57343;function Xm(t){let e=t.charCodeAt(0);return e>=Qk&&e<=Yk}function Zo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Zb="__name__",Rd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ne(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):ay(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}},Se=class t extends Rd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Zk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=class t extends Rd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Zk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zb}static keyField(){return new t([Zb])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new V(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};function LT(t,e,n){if(!n)throw new V(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jT(t,e,n,r){if(e===!0&&r===!0)throw new V(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jb(t){if(!B.isDocumentKey(t))throw new V(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xb(t){if(B.isDocumentKey(t))throw new V(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function BT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$(12329,{type:typeof t})}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=cf(t);throw new V(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xe(t,e){let n={typeString:t};return e&&(n.value=e),n}function fs(t,e){if(!BT(t))throw new V(R.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(R.INVALID_ARGUMENT,n);return!0}var eT=-62135596800,tT=1e6,Pe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tT);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eT)throw new V(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tT}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fs(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-eT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:xe("string",Pe._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};var Y=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Pe(0,0))}static max(){return new t(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dc=-1,Nd=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Nd.UNKNOWN_ID=-1;function Jk(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new Ui(i,B.empty(),e)}function Xk(t){return new Ui(t.readTime,t.key,dc)}var Ui=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),B.empty(),dc)}static max(){return new t(Y.max(),B.empty(),dc)}};function eF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}var tF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function hs(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==tF)throw t;F("LocalStore","Unexpectedly lost primary lease")}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function nF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ps(t){return t.name==="IndexedDbTransactionError"}var Nv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),xv=-1;function uf(t){return t==null}function fc(t){return t===0&&1/t==-1/0}function rF(t){return typeof t=="number"&&Number.isInteger(t)&&!fc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var UT="";function iF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nT(e)),e=oF(t.get(n),e);return nT(e)}function oF(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case UT:n+="";break;default:n+=o}}return n}function nT(t){return t+UT+""}var sF="remoteDocuments",$T="owner";var HT="mutationQueues";var zT="mutations";var qT="documentMutations",aF="remoteDocumentsV14";var GT="remoteDocumentGlobal";var WT="targets";var KT="targetDocuments";var QT="targetGlobal",YT="collectionParents";var ZT="clientMetadata";var JT="bundles";var XT="namedQueries";var cF="indexConfiguration";var uF="indexState";var lF="indexEntries";var eS="documentOverlays";var dF="globals";var fF=[HT,zT,qT,sF,WT,$T,QT,KT,ZT,GT,YT,JT,XT],SK=[...fF,eS],hF=[HT,zT,qT,aF,WT,$T,QT,KT,ZT,GT,YT,JT,XT,eS],pF=hF,gF=[...pF,cF,uF,lF];var AK=[...gF,dF];function rT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},In=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xd(this.data.getIterator())}getIteratorFrom(e){return new xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},xd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var zt=class t{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ke(bt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Pd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pd("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var mF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ye(!!t,39018),typeof t=="string"){let e=0,n=mF.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}var nS="server_timestamp",rS="__type__",iS="__previous_value__",oS="__local_write_time__";function lf(t){return(t?.mapValue?.fields||{})[rS]?.stringValue===nS}function df(t){let e=t.mapValue.fields[iS];return lf(e)?df(e):e}function hc(t){let e=or(t.mapValue.fields[oS].timestampValue);return new Pe(e.seconds,e.nanos)}var uy=class{constructor(e,n,r,i,o,s,c,u,l,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f,this.apiKey=p}},Od="(default)",pc=class t{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function sS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new V(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(t.options.projectId,e)}var Pv="__type__",aS="__max__",_d={mapValue:{fields:{__type__:{stringValue:aS}}}},Ov="__vector__",Jo="value";function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lf(t)?4:uS(t)?9007199254740991:cS(t)?10:11:$(28295,{value:t})}function An(t,e){if(t===e)return!0;let n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hc(t).isEqual(hc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),c=or(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return sr(i.bytesValue).isEqual(sr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),c=Te(o.doubleValue);return s===c?fc(s)===fc(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(rT(s)!==rT(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!An(s[u],c[u])))return!1;return!0})(t,e);default:return $(52216,{left:t})}}function gc(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Xo(t,e){if(t===e)return 0;let n=$r(t),r=$r(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return iT(t.timestampValue,e.timestampValue);case 4:return iT(hc(t),hc(e));case 5:return ay(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=sr(o),u=sr(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ne(c[l],u[l]);if(f!==0)return f}return ne(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ne(Te(o.latitude),Te(s.latitude));return c!==0?c:ne(Te(o.longitude),Te(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return oT(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[Jo]?.arrayValue,f=u[Jo]?.arrayValue,p=ne(l?.values?.length||0,f?.values?.length||0);return p!==0?p:oT(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===_d.mapValue&&s===_d.mapValue)return 0;if(o===_d.mapValue)return 1;if(s===_d.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=ay(u[p],f[p]);if(m!==0)return m;let y=Xo(c[u[p]],l[f[p]]);if(y!==0)return y}return ne(u.length,f.length)})(t.mapValue,e.mapValue);default:throw $(23264,{he:n})}}function iT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);let n=or(t),r=or(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function oT(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Xo(n[i],r[i]);if(o)return o}return ne(n.length,r.length)}function es(t){return ly(t)}function ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return sr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return B.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=ly(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ly(n.fields[s])}`;return i+"}"})(t.mapValue):$(61005,{value:t})}function Id(t){switch($r(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=df(t);return e?16+Id(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Id(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return qr(r.fields,(o,s)=>{i+=o.length+Id(s)}),i})(t.mapValue);default:throw $(13486,{value:t})}}function dy(t){return!!t&&"integerValue"in t}function kv(t){return!!t&&"arrayValue"in t}function sT(t){return!!t&&"nullValue"in t}function aT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wd(t){return!!t&&"mapValue"in t}function cS(t){return(t?.mapValue?.fields||{})[Pv]?.stringValue===Ov}function cc(t){if(t.geoPointValue)return{geoPointValue:N({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:N({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return N({},t)}function uS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aS}var RK={mapValue:{fields:{[Pv]:{stringValue:Ov},[Jo]:{arrayValue:{}}}}};var Ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=cc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(cc(this.value))}};function lS(t){let e=[];return qr(t.fields,(n,r)=>{let i=new bt([n]);if(wd(r)){let o=lS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zt(e)}var tn=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $i=class{constructor(e,n){this.position=e,this.inclusive=n}};function cT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=Xo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var Hi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function yF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kd=class{},Le=class t extends kd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hy(e,n,r):n==="array-contains"?new my(e,r):n==="in"?new yy(e,r):n==="not-in"?new vy(e,r):n==="array-contains-any"?new _y(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new py(e,r):new gy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xo(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nn=class t extends kd{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return dS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function dS(t){return t.op==="and"}function fS(t){return vF(t)&&dS(t)}function vF(t){for(let e of t.filters)if(e instanceof nn)return!1;return!0}function fy(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+es(t.value);if(fS(t))return t.filters.map(e=>fy(e)).join(",");{let e=t.filters.map(n=>fy(n)).join(",");return`${t.op}(${e})`}}function hS(t,e){return t instanceof Le?(function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)})(t,e):t instanceof nn?(function(r,i){return i instanceof nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&hS(s,i.filters[c]),!0):!1})(t,e):void $(19439)}function pS(t){return t instanceof Le?(function(n){return`${n.field.canonicalString()} ${n.op} ${es(n.value)}`})(t):t instanceof nn?(function(n){return n.op.toString()+" {"+n.getFilters().map(pS).join(" ,")+"}"})(t):"Filter"}var hy=class extends Le{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},py=class extends Le{constructor(e,n){super(e,"in",n),this.keys=gS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gy=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=gS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function gS(t,e){return(e.arrayValue?.values||[]).map(n=>B.fromName(n.referenceValue))}var my=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return kv(n)&&gc(n.arrayValue,this.value)}},yy=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}},vy=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}},_y=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!kv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gc(this.value.arrayValue,r))}};var Ey=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function lT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Ey(t,e,n,r,i,o,s)}function Fv(t){let e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>es(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>es(r)).join(",")),e.Te=n}return e.Te}function Vv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uT(t.startAt,e.startAt)&&uT(t.endAt,e.endAt)}function Dy(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ts=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function _F(t,e,n,r,i,o,s,c){return new ts(t,e,n,r,i,o,s,c)}function Lv(t){return new ts(t)}function dT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EF(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function mS(t){return t.collectionGroup!==null}function Qo(t){let e=K(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Ke(bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Hi(o,r))}),n.has(bt.keyField().canonicalString())||e.Ie.push(new Hi(bt.keyField(),r))}return e.Ie}function wn(t){let e=K(t);return e.Ee||(e.Ee=DF(e,Qo(t))),e.Ee}function DF(t,e){if(t.limitType==="F")return lT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Hi(i.field,o)});let n=t.endAt?new $i(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $i(t.startAt.position,t.startAt.inclusive):null;return lT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fd(t,e,n){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ff(t,e){return Vv(wn(t),wn(e))&&t.limitType===e.limitType}function yS(t){return`${Fv(wn(t))}|lt:${t.limitType}`}function qo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pS(i)).join(", ")}]`),uf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>es(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>es(i)).join(",")),`Target(${r})`})(wn(t))}; limitType=${t.limitType})`}function hf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Qo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=cT(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Qo(r),i)||r.endAt&&!(function(s,c,u){let l=cT(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Qo(r),i))})(t,e)}function IF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vS(t){return(e,n)=>{let r=!1;for(let i of Qo(t)){let o=wF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wF(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Xo(u,l):$(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:t.dir})}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return tS(this.inner)}size(){return this.innerSize}};var CF=new Me(B.comparator);function cr(){return CF}var _S=new Me(B.comparator);function ac(...t){let e=_S;for(let n of t)e=e.insert(n.key,n);return e}function ES(t){let e=_S;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return uc()}function DS(){return uc()}function uc(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var bF=new Me(B.comparator),TF=new Ke(B.comparator);function te(...t){let e=TF;for(let n of t)e=e.add(n);return e}var SF=new Ke(ne);function AF(){return SF}function jv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fc(e)?"-0":e}}function IS(t){return{integerValue:""+t}}function MF(t,e){return rF(e)?IS(e):jv(t,e)}var ns=class{constructor(){this._=void 0}};function RF(t,e,n){return t instanceof rs?(function(i,o){let s={fields:{[rS]:{stringValue:nS},[oS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lf(o)&&(o=df(o)),o&&(s.fields[iS]=o),{mapValue:s}})(n,e):t instanceof zi?CS(t,e):t instanceof qi?bS(t,e):(function(i,o){let s=wS(i,o),c=fT(s)+fT(i.Ae);return dy(s)&&dy(i.Ae)?IS(c):jv(i.serializer,c)})(t,e)}function NF(t,e,n){return t instanceof zi?CS(t,e):t instanceof qi?bS(t,e):n}function wS(t,e){return t instanceof is?(function(r){return dy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var rs=class extends ns{},zi=class extends ns{constructor(e){super(),this.elements=e}};function CS(t,e){let n=TS(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var qi=class extends ns{constructor(e){super(),this.elements=e}};function bS(t,e){let n=TS(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var is=class extends ns{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function fT(t){return Te(t.integerValue||t.doubleValue)}function TS(t){return kv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xF(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof zi&&i instanceof zi||r instanceof qi&&i instanceof qi?Zo(r.elements,i.elements,An):r instanceof is&&i instanceof is?An(r.Ae,i.Ae):r instanceof rs&&i instanceof rs})(t.transform,e.transform)}var Iy=class{constructor(e,n){this.version=e,this.transformResults=n}},Cn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var os=class{};function SS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ss(t.key,Cn.none()):new Gi(t.key,t.data,Cn.none());{let n=t.data,r=Ct.empty(),i=new Ke(bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Mn(t.key,r,new zt(i.toArray()),Cn.none())}}function PF(t,e,n){t instanceof Gi?(function(i,o,s){let c=i.value.clone(),u=pT(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Mn?(function(i,o,s){if(!Cd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=pT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(AS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function lc(t,e,n,r){return t instanceof Gi?(function(o,s,c,u){if(!Cd(o.precondition,s))return c;let l=o.value.clone(),f=gT(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Mn?(function(o,s,c,u){if(!Cd(o.precondition,s))return c;let l=gT(o.fieldTransforms,u,s),f=s.data;return f.setAll(AS(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return Cd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function OF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=wS(r.transform,i||null);o!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,o))}return n||null}function hT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zo(r,i,(o,s)=>xF(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Gi=class extends os{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mn=class extends os{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function AS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function pT(t,e,n){let r=new Map;ye(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,NF(s,c,n[i]))}return r}function gT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,RF(o,s,e))}return r}var ss=class extends os{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wy=class extends os{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&PF(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=DS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=SS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,r)=>hT(n,r))&&Zo(this.baseMutations,e.baseMutations,(n,r)=>hT(n,r))}},by=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return bF})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Ty=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,se;function kF(t){switch(t){case R.OK:return $(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return $(15467,{code:t})}}function MS(t){if(t===void 0)return ir("GRPC error has no .code"),R.UNKNOWN;switch(t){case Fe.OK:return R.OK;case Fe.CANCELLED:return R.CANCELLED;case Fe.UNKNOWN:return R.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return R.INTERNAL;case Fe.UNAVAILABLE:return R.UNAVAILABLE;case Fe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Fe.NOT_FOUND:return R.NOT_FOUND;case Fe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Fe.ABORTED:return R.ABORTED;case Fe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Fe.DATA_LOSS:return R.DATA_LOSS;default:return $(39323,{code:t})}}(se=Fe||(Fe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var FF=null;function VF(){return new TextEncoder}var LF=new er([4294967295,4294967295],0);function mT(t){let e=VF().encode(t),n=new Wm;return n.update(e),new Uint8Array(n.digest())}function yT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new er([n,r],0),new er([i,o],0)]}var Ay=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Li(`Invalid padding: ${n}`);if(r<0)throw new Li(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Li(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Li(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=er.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(er.fromNumber(r)));return i.compare(LF)===1&&(i=new er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=mT(e),[r,i]=yT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=mT(e),[r,i]=yT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Li=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Me(ne),cr(),te())}},mc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,te(),te(),te())}};var Yo=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}},Ld=class{constructor(e,n){this.targetId=e,this.Ce=n}},jd=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bd=class{constructor(){this.ve=0,this.Fe=vT(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=te(),n=te(),r=te();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new mc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=vT()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},My=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=cr(),this.He=Ed(),this.Je=Ed(),this.Ze=new Me(ne)}Xe(e){for(let n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Dy(o))if(r===0){let s=new B(o.path);this.et(n,s,tn.newNoDocument(s,Y.min()))}else ye(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}FF?.lt((function(f,p,m,y,S){let A={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},M=p.unchangedNames;return M&&(A.bloomFilter={applied:S===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),A})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=sr(r).toUint8Array()}catch(u){if(u instanceof Pd)return Ur("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ay(s,i,o)}catch(u){return Ur(u instanceof Li?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Dy(c.target)){let u=new B(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,tn.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.Ke())}});let r=te();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Vd(e,n,this.Ze,this.je,r);return this.je=cr(),this.He=Ed(),this.Je=Ed(),this.Ze=new Me(ne),i}Ye(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Bd,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ke(ne),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ke(ne),this.He=this.He.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bd),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Ed(){return new Me(B.comparator)}function vT(){return new Me(B.comparator)}var jF={asc:"ASCENDING",desc:"DESCENDING"},BF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UF={and:"AND",or:"OR"},Ry=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ny(t,e){return t.useProto3Json||uf(e)?e:{value:e}}function Ud(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $F(t,e){return Ud(t,e.toTimestamp())}function bn(t){return ye(!!t,49232),Y.fromTimestamp((function(n){let r=or(n);return new Pe(r.seconds,r.nanos)})(t))}function Bv(t,e){return xy(t,e).canonicalString()}function xy(t,e){let n=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function NS(t){let e=Se.fromString(t);return ye(FS(e),10190,{key:e.toString()}),e}function Py(t,e){return Bv(t.databaseId,e.path)}function ey(t,e){let n=NS(e);if(n.get(1)!==t.databaseId.projectId)throw new V(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(PS(n))}function xS(t,e){return Bv(t.databaseId,e)}function HF(t){let e=NS(t);return e.length===4?Se.emptyPath():PS(e)}function Oy(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PS(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _T(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function zF(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(ye(f===void 0||typeof f=="string",58123),rt.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),rt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?R.UNKNOWN:MS(l.code);return new V(f,l.message||"")})(s);n=new jd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ey(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):Y.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Yo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ey(t,r.document),o=r.readTime?bn(r.readTime):Y.min(),s=tn.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Yo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ey(t,r.document),o=r.removedTargetIds||[];n=new Yo([],o,i,null)}else{if(!("filter"in e))return $(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Sy(i,o),c=r.targetId;n=new Ld(c,s)}}return n}function qF(t,e){let n;if(e instanceof Gi)n={update:_T(t,e.key,e.value)};else if(e instanceof ss)n={delete:Py(t,e.key)};else if(e instanceof Mn)n={update:_T(t,e.key,e.data),updateMask:eV(e.fieldMask)};else{if(!(e instanceof wy))return $(16599,{dt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof rs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof zi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof is)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw $(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$F(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)})(t,e.precondition)),n}function GF(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?bn(i.updateTime):bn(o);return s.isEqual(Y.min())&&(s=bn(o)),new Iy(s,i.transformResults||[])})(n,e))):[]}function WF(t,e){return{documents:[xS(t,e.path)]}}function KF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xS(t,i);let o=(function(l){if(l.length!==0)return kS(nn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:Go(m.field),direction:ZF(m.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Ny(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function QF(t){let e=HF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ye(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let m=OS(p);return m instanceof nn&&fS(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Hi(Wo(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,uf(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new $i(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new $i(y,m)})(n.endAt)),_F(e,i,s,o,c,"F",u,l)}function YF(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wo(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wo(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Wo(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Wo(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Le.create(Wo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return nn.create(n.compositeFilter.filters.map(r=>OS(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}})(n.compositeFilter.op))})(t):$(30097,{filter:t})}function ZF(t){return jF[t]}function JF(t){return BF[t]}function XF(t){return UF[t]}function Go(t){return{fieldPath:t.canonicalString()}}function Wo(t){return bt.fromServerFormat(t.fieldPath)}function kS(t){return t instanceof Le?(function(n){if(n.op==="=="){if(aT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NAN"}};if(sT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NAN"}};if(sT(n.value))return{unaryFilter:{field:Go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(n.field),op:JF(n.op),value:n.value}}})(t):t instanceof nn?(function(n){let r=n.getFilters().map(i=>kS(i));return r.length===1?r[0]:{compositeFilter:{op:XF(n.op),filters:r}}})(t):$(54877,{filter:t})}function eV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function VS(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}var yc=class t{constructor(e,n,r,i,o=Y.min(),s=Y.min(),c=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ky=class{constructor(e){this.yt=e}};function LS(t){let e=QF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fd(e,e.limit,"L"):e}var $d=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),fc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=or(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(sr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uS(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):cS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):$(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Jo,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Te(o)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),B.fromName(e).path.forEach(r=>{this.Ft(n,60),this.$t(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};$d.Wt=new $d;var Fy=class{constructor(){this.Sn=new Vy}addToCollectionParentIndex(e,n){return this.Sn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Ui.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Vy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Se.comparator)).toArray()}};var NK=new Uint8Array(0);var ET={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jS=41943040,Ht=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(jS,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);var vc=class t{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new t(0)}static ar(){return new t(-1)}};var DT="LruGarbageCollector",tV=1048576;function IT([t,e],[n,r]){let i=ne(t,n);return i===0?ne(e,r):i}var Ly=class{constructor(e){this.Pr=e,this.buffer=new Ke(IT),this.Tr=0}Ir(){return++this.Tr}Er(e){let n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();IT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},jy=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){F(DT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ps(n)?F(DT,"Ignoring IndexedDB error during garbage collection: ",n):await hs(n)}await this.Ar(3e5)})}},By=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(Nv.ce);let r=new Ly(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(ET)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ET):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),zo()<=oe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function nV(t,e){return new By(t,e)}var Uy=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $y=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Hy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lc(r.mutation,i,zt.empty(),Pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){let i=Vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ac();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=cr(),s=uc(),c=(function(){return uc()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Mn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),lc(f.mutation,l,f.mutation.getFieldMask(),Pe.now())):s.set(l.key,zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>c.set(l,new $y(f,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=uc(),i=new Me((s,c)=>s-c),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||zt.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||te()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=DS();f.forEach(m=>{if(!o.has(m)){let y=SS(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return EF(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(Vi()),c=dc,u=o;return s.next(l=>x.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,te())).next(f=>({batchId:c,changes:ES(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=ac();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ac();return this.indexManager.getCollectionParents(e,o).next(c=>x.forEach(c,u=>{let l=(function(p,m){return new ts(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,tn.newInvalidDocument(f)))});let c=ac();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&lc(f.mutation,l,zt.empty(),Pe.now()),hf(n,l)&&(c=c.insert(u,l))}),c})}};var zy=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return x.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:LS(i.bundledQuery),readTime:bn(i.readTime)}})(n)),x.resolve()}};var qy=class{constructor(){this.overlays=new Me(B.comparator),this.Lr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Vi();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Vi(),o=n.length+1,s=new B(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Vi(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=Vi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return x.resolve(c)}bt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ty(n,r));let o=this.Lr.get(n);o===void 0&&(o=te(),this.Lr.set(n,o)),this.Lr.set(n,o.add(r.key))}};var Gy=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var _c=class{constructor(){this.kr=new Ke(Ve.Kr),this.qr=new Ke(Ve.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ve(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){let n=new B(new Se([])),r=new Ve(n,e),i=new Ve(n,e+1),o=[];return this.qr.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let n=new B(new Se([])),r=new Ve(n,e),i=new Ve(n,e+1),o=te();return this.qr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ve(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return B.comparator(e.key,n.key)||ne(e.Hr,n.Hr)}static Ur(e,n){return ne(e.Hr,n.Hr)||B.comparator(e.key,n.key)}};var Wy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ke(Ve.Kr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cy(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Jr=this.Jr.add(new Ve(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?xv:this.Yn-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ne);return n.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),x.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new B(o),0),c=new Ke(ne);return this.Jr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),x.resolve(this.Yr(c))}Yr(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return x.forEach(n.mutations,i=>{let o=new Ve(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){let r=new Ve(n,0),i=this.Jr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ky=class{constructor(e){this.ti=e,this.docs=(function(){return new Me(B.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,c=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||eF(Xk(f),r)<=0||(i.has(f.key)||hf(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){$(9500)}ni(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qy(this)}getSize(e){return x.resolve(this.size)}},Qy=class extends Uy{constructor(e){super(),this.Mr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}};var Yy=class{constructor(e){this.persistence=e,this.ri=new ar(n=>Fv(n),Vv),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ii=0,this.si=new _c,this.targetCount=0,this.oi=vc._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),x.resolve()}lr(e){this.ri.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.oi=new vc(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.lr(n),x.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ri.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.si.jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.si.containsKey(n))}};var Hd=class{constructor(e,n){this._i={},this.overlays={},this.ai=new Nv(0),this.ui=!1,this.ui=!0,this.ci=new Gy,this.referenceDelegate=e(this),this.li=new Yy(this),this.indexManager=new Fy,this.remoteDocumentCache=(function(i){return new Ky(i)})(r=>this.referenceDelegate.hi(r)),this.serializer=new ky(n),this.Pi=new zy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Wy(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Zy(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(o=>this.referenceDelegate.Ii(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}},Zy=class extends cy{constructor(e){super(),this.currentSequenceNumber=e}},Jy=class t{constructor(e){this.persistence=e,this.Ri=new _c,this.Ai=null}static Vi(e){return new t(e)}get di(){if(this.Ai)return this.Ai;throw $(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.di,r=>{let i=B.fromPath(r);return this.mi(e,i).next(o=>{o||n.removeEntry(i,Y.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return x.or([()=>x.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},zd=class t{constructor(e,n){this.persistence=e,this.fi=new ar(r=>iF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=nV(this,n)}static Vi(e,n){return new t(e,n)}Ti(){}Ii(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return x.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,s=>this.wr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),x.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Id(e.data.value)),n}wr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.fi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Xy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=te(),i=te();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ev=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tv=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Mb()?8:nF(Ab())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.gs(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ps(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ev;return this.ys(e,n,s).next(c=>{if(o.result=c,this.As)return this.ws(e,n,s,c.size)})}).next(()=>o.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(zo()<=oe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(zo()<=oe.DEBUG&&F("QueryEngine","Query:",qo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(zo()<=oe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):x.resolve())}gs(e,n){if(dT(n))return x.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Fd(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=te(...o);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ss(n,l,s,u.readTime)?this.gs(e,Fd(n,null,"F")):this.Ds(e,l,n,u)}))})))}ps(e,n,r,i){return dT(n)||i.isEqual(Y.min())?x.resolve(null):this.fs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ss(n,s,r,i)?x.resolve(null):(zo()<=oe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qo(n)),this.Ds(e,s,n,Jk(i,dc)).next(c=>c))})}bs(e,n){let r=new Ke(vS(e));return n.forEach((i,o)=>{hf(e,o)&&(r=r.add(o))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,r){return zo()<=oe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",qo(n)),this.fs.getDocumentsMatchingQuery(e,n,Ui.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Uv="LocalStore",rV=3e8,nv=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Me(ne),this.Fs=new ar(o=>Fv(o),Vv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hy(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}};function iV(t,e,n,r){return new nv(t,e,n,r)}async function BS(t,e){let n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=te();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ns:l,removedBatchIds:s,addedBatchIds:c}))})})}function oV(t,e){let n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>f.getEntry(u,S)).next(A=>{let M=l.docVersions.get(S);ye(M!==null,48541),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=te();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function US(t){let e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function sV(t,e){let n=K(t),r=e.snapshotVersion,i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(n.li.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.li.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(rt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(A,M,k){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=rV?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,y,f)&&c.push(n.li.updateTargetData(o,y))});let u=cr(),l=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(aV(o,s,e.documentUpdates).next(f=>{u=f.Bs,l=f.Ls})),!r.isEqual(Y.min())){let f=n.li.getLastRemoteSnapshotVersion(o).next(p=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return x.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.vs=i,o))}function aV(t,e,n){let r=te(),i=te();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):F(Uv,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Bs:s,Ls:i}})}function cV(t,e){let n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uV(t,e){let n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.li.allocateTargetId(r).next(s=>(i=new yc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function rv(t,e,n){let r=K(t),i=r.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ps(s))throw s;F(Uv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function wT(t,e,n){let r=K(t),i=Y.min(),o=te();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=K(u),m=p.Fs.get(f);return m!==void 0?x.resolve(p.vs.get(m)):p.li.getTargetData(l,f)})(r,s,wn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Y.min(),n?o:te())).next(c=>(lV(r,IF(e),c),{documents:c,ks:o})))}function lV(t,e,n){let r=t.Ms.get(e)||Y.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ms.set(e,r)}var qd=class{constructor(){this.activeTargetIds=AF()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iv=class{constructor(){this.vo=new qd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new qd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ov=class{Mo(e){}shutdown(){}};var CT="ConnectivityMonitor",Gd=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){F(CT,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){F(CT,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dd=null;function sv(){return Dd===null?Dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dd++,"0x"+Dd.toString(16)}var ty="RestConnection",dV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},av=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=sv(),c=this.Qo(e,n.toUriEncodedString());F(ty,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,o);let{host:l}=new URL(c),f=hd(l);return this.zo(e,c,u,r,f).then(p=>(F(ty,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ur(ty,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ds})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Qo(e,n){let r=dV[e],i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var cv=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var dt="WebChannelConnection",sc=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})},Wd=class t extends av{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!t.c_){let e=Zm();sc(e,Ym.STAT_EVENT,n=>{n.stat===vd.PROXY?F(dt,"STAT_EVENT: detected buffering proxy"):n.stat===vd.NOPROXY&&F(dt,"STAT_EVENT: detected no buffering proxy")}),t.c_=!0}}zo(e,n,r,i,o){let s=sv();return new Promise((c,u)=>{let l=new Km;l.setWithCredentials(!0),l.listenOnce(Qm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case oc.NO_ERROR:let p=l.getResponseJson();F(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case oc.TIMEOUT:F(dt,`RPC '${e}' ${s} timed out`),u(new V(R.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:let m=l.getStatus();if(F(dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let A=(function(k){let Z=k.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(Z)>=0?Z:R.UNKNOWN})(S.status);u(new V(A,S.message))}else u(new V(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(R.UNAVAILABLE,"Connection failed."));break;default:$(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(dt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(dt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=sv(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");F(dt,`Creating RPC '${e}' stream ${i}: ${l}`,c);let f=s.createWebChannel(l,c);this.I_(f);let p=!1,m=!1,y=new cv({Ho:S=>{m?F(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(F(dt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),F(dt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Jo:()=>f.close()});return sc(f,Ho.EventType.OPEN,()=>{m||(F(dt,`RPC '${e}' stream ${i} transport opened.`),y.i_())}),sc(f,Ho.EventType.CLOSE,()=>{m||(m=!0,F(dt,`RPC '${e}' stream ${i} transport closed`),y.o_(),this.E_(f))}),sc(f,Ho.EventType.ERROR,S=>{m||(m=!0,Ur(dt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),y.o_(new V(R.UNAVAILABLE,"The operation could not be completed")))}),sc(f,Ho.EventType.MESSAGE,S=>{if(!m){let A=S.data[0];ye(!!A,16349);let M=A,k=M?.error||M[0]?.error;if(k){F(dt,`RPC '${e}' stream ${i} received error:`,k);let Z=k.status,ue=(function(Qe){let I=Fe[Qe];if(I!==void 0)return MS(I)})(Z),Tt=k.message;ue===void 0&&(ue=R.INTERNAL,Tt="Unknown error status: "+Z+" with message "+k.message),m=!0,y.o_(new V(ue,Tt)),f.close()}else F(dt,`RPC '${e}' stream ${i} received:`,A),y.__(A)}}),t.u_(),setTimeout(()=>{y.s_()},0),y}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Jm()}};function fV(t){return new Wd(t)}function ny(){return typeof document<"u"?document:null}function Ic(t){return new Ry(t,!0)}Wd.c_=!1;var Kd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var bT="PersistentStream",Qd=class{constructor(e,n,r,i,o,s,c,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kd(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new V(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(F(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=zF(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?bn(s.readTime):Y.min()})(e);return this.listener.J_(n,r)}Z_(e){let n={};n.database=Oy(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Dy(u)?{documents:WF(o,u)}:{query:KF(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=RS(o,s.resumeToken);let l=Ny(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=Ud(o,s.snapshotVersion.toTimestamp());let l=Ny(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=YF(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){let n={};n.database=Oy(this.serializer),n.removeTarget=e,this.K_(n)}},lv=class extends Qd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=GF(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Oy(this.serializer),this.K_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>qF(this.serializer,r))};this.K_(n)}};var dv=class{},fv=class extends dv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new V(R.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,xy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(R.UNKNOWN,o.toString())})}jo(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,xy(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(R.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function hV(t,e,n,r){return new fv(t,e,n,r)}var hv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Wi="RemoteStore",pv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{Yi(this)&&(F(Wi,"Restarting streams for network reachability change."),await(async function(u){let l=K(u);l.Ea.add(4),await wc(l),l.Va.set("Unknown"),l.Ea.delete(4),await pf(l)})(this))})}),this.Va=new hv(r,i)}};async function pf(t){if(Yi(t))for(let e of t.Ra)await e(!0)}async function wc(t){for(let e of t.Ra)await e(!1)}function $S(t,e){let n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qv(n)?zv(n):gs(n).O_()&&Hv(n,e))}function $v(t,e){let n=K(t),r=gs(n);n.Ia.delete(e),r.O_()&&HS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yi(n)&&n.Va.set("Unknown"))}function Hv(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gs(t).Z_(e)}function HS(t,e){t.da.$e(e),gs(t).X_(e)}function zv(t){t.da=new My({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gs(t).start(),t.Va.ua()}function qv(t){return Yi(t)&&!gs(t).x_()&&t.Ia.size>0}function Yi(t){return K(t).Ea.size===0}function zS(t){t.da=void 0}async function pV(t){t.Va.set("Online")}async function gV(t){t.Ia.forEach((e,n)=>{Hv(t,e)})}async function mV(t,e){zS(t),qv(t)?(t.Va.ha(e),zv(t)):t.Va.set("Unknown")}async function yV(t,e,n){if(t.Va.set("Online"),e instanceof jd&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.da.removeTarget(c))})(t,e)}catch(r){F(Wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yd(t,r)}else if(e instanceof Yo?t.da.Xe(e):e instanceof Ld?t.da.st(e):t.da.tt(e),!n.isEqual(Y.min()))try{let r=await US(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.da.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),HS(o,u);let p=new yc(f.target,u,l,f.sequenceNumber);Hv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){F(Wi,"Failed to raise snapshot:",r),await Yd(t,r)}}async function Yd(t,e,n){if(!ps(e))throw e;t.Ea.add(1),await wc(t),t.Va.set("Offline"),n||(n=()=>US(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(Wi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pf(t)})}function qS(t,e){return e().catch(n=>Yd(t,n,e))}async function gf(t){let e=K(t),n=Hr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xv;for(;vV(e);)try{let i=await cV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,_V(e,i)}catch(i){await Yd(e,i)}GS(e)&&WS(e)}function vV(t){return Yi(t)&&t.Ta.length<10}function _V(t,e){t.Ta.push(e);let n=Hr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function GS(t){return Yi(t)&&!Hr(t).x_()&&t.Ta.length>0}function WS(t){Hr(t).start()}async function EV(t){Hr(t).ra()}async function DV(t){let e=Hr(t);for(let n of t.Ta)e.ea(n.mutations)}async function IV(t,e,n){let r=t.Ta.shift(),i=by.from(r,e,n);await qS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gf(t)}async function wV(t,e){e&&Hr(t).Y_&&await(async function(r,i){if((function(s){return kF(s)&&s!==R.ABORTED})(i.code)){let o=r.Ta.shift();Hr(r).B_(),await qS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await gf(r)}})(t,e),GS(t)&&WS(t)}async function TT(t,e){let n=K(t);n.asyncQueue.verifyOperationInProgress(),F(Wi,"RemoteStore received new credentials");let r=Yi(n);n.Ea.add(3),await wc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pf(n)}async function CV(t,e){let n=K(t);e?(n.Ea.delete(2),await pf(n)):e||(n.Ea.add(2),await wc(n),n.Va.set("Unknown"))}function gs(t){return t.ma||(t.ma=(function(n,r,i){let o=K(n);return o.sa(),new uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:pV.bind(null,t),Yo:gV.bind(null,t),t_:mV.bind(null,t),J_:yV.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),qv(t)?zv(t):t.Va.set("Unknown")):(await t.ma.stop(),zS(t))})),t.ma}function Hr(t){return t.fa||(t.fa=(function(n,r,i){let o=K(n);return o.sa(),new lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:EV.bind(null,t),t_:wV.bind(null,t),ta:DV.bind(null,t),na:IV.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await gf(t)):(await t.fa.stop(),t.Ta.length>0&&(F(Wi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var gv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gv(t,e){if(ir("AsyncQueue",`${e}: ${t}`),ps(t))return new V(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Ec=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=ac(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Zd=class{constructor(){this.ga=new Me(B.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Ki=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Ec.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var mv=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},yv=class{constructor(){this.queries=ST(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=K(n),o=i.queries;i.queries=ST(),o.forEach((s,c)=>{for(let u of c.ba)u.onError(r)})})(this,new V(R.ABORTED,"Firestore shutting down"))}};function ST(){return new ar(t=>yS(t),ff)}async function bV(t,e){let n=K(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new mv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=Gv(s,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Wv(n)}async function TV(t,e){let n=K(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ba.indexOf(e);s>=0&&(o.ba.splice(s,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SV(t,e){let n=K(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.ba)c.Fa(i)&&(r=!0);s.wa=i}}r&&Wv(n)}function AV(t,e,n){let r=K(t),i=r.queries.get(e);if(i)for(let o of i.ba)o.onError(n);r.queries.delete(e)}function Wv(t){t.Ca.forEach(e=>{e.next()})}var vv,AT;(AT=vv||(vv={})).Ma="default",AT.Cache="cache";var _v=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vv.Cache}};var Jd=class{constructor(e){this.key=e}},Xd=class{constructor(e){this.key=e}},Ev=class{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=te(),this.mutatedKeys=te(),this.eu=vS(e),this.tu=new Ec(this.eu)}get nu(){return this.Za}ru(e,n){let r=n?n.iu:new Zd,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=hf(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==A&&(r.track({type:3,doc:y}),M=!0):this.su(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(c=!0)),M&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,S){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Vt:M})}};return A(y)-A(S)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Xa;return this.Xa=u,s.length!==0||l?{snapshot:new Ki(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zd,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Xd(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Jd(r))}),n}cu(e){this.Za=e.ks,this.Ya=te();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ki.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Kv="SyncEngine",Dv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Iv=class{constructor(e){this.key=e,this.hu=!1}},wv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ar(c=>yS(c),ff),this.Iu=new Map,this.Eu=new Set,this.Ru=new Me(B.comparator),this.Au=new Map,this.Vu=new _c,this.du={},this.mu=new Map,this.fu=vc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function MV(t,e,n=!0){let r=XS(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await KS(r,e,n,!0),i}async function RV(t,e){let n=XS(t);await KS(n,e,!0,!1)}async function KS(t,e,n,r){let i=await uV(t.localStore,wn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await NV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$S(t.remoteStore,i),c}async function NV(t,e,n,r,i){t.pu=(p,m,y)=>(async function(A,M,k,Z){let ue=M.view.ru(k);ue.Ss&&(ue=await wT(A.localStore,M.query,!1).then(({documents:I})=>M.view.ru(I,ue)));let Tt=Z&&Z.targetChanges.get(M.targetId),qt=Z&&Z.targetMismatches.get(M.targetId)!=null,Qe=M.view.applyChanges(ue,A.isPrimaryClient,Tt,qt);return RT(A,M.targetId,Qe.au),Qe.snapshot})(t,p,m,y);let o=await wT(t.localStore,e,!0),s=new Ev(e,o.ks),c=s.ru(o.documents),u=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);RT(t,n,l.au);let f=new Dv(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function xV(t,e,n){let r=K(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!ff(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$v(r.remoteStore,i.targetId),Cv(r,i.targetId)}).catch(hs)):(Cv(r,i.targetId),await rv(r.localStore,i.targetId,!0))}async function PV(t,e){let n=K(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$v(n.remoteStore,r.targetId))}async function OV(t,e,n){let r=UV(t);try{let i=await(function(s,c){let u=K(s),l=Pe.now(),f=c.reduce((y,S)=>y.add(S.key),te()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=cr(),A=te();return u.xs.getEntries(y,f).next(M=>{S=M,S.forEach((k,Z)=>{Z.isValidDocument()||(A=A.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let k=[];for(let Z of c){let ue=OF(Z,p.get(Z.key).overlayedDocument);ue!=null&&k.push(new Mn(Z.key,ue,lS(ue.value.mapValue),Cn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,c)}).next(M=>{m=M;let k=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,k)})}).then(()=>({batchId:m.batchId,changes:ES(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.du[s.currentUser.toKey()];l||(l=new Me(ne)),l=l.insert(c,u),s.du[s.currentUser.toKey()]=l})(r,i.batchId,n),await Cc(r,i.changes),await gf(r.remoteStore)}catch(i){let o=Gv(i,"Failed to persist write");n.reject(o)}}async function QS(t,e){let n=K(t);try{let r=await sV(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ye(s.hu,14607):i.removedDocuments.size>0&&(ye(s.hu,42227),s.hu=!1))}),await Cc(n,r,e)}catch(r){await hs(r)}}function MT(t,e,n){let r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=K(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.ba)m.va(c)&&(l=!0)}),l&&Wv(u)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kV(t,e,n){let r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Me(B.comparator);s=s.insert(o,tn.newNoDocument(o,Y.min()));let c=te().add(o),u=new Vd(Y.min(),new Map,new Me(ne),s,c);await QS(r,u),r.Ru=r.Ru.remove(o),r.Au.delete(e),Qv(r)}else await rv(r.localStore,e,!1).then(()=>Cv(r,e,n)).catch(hs)}async function FV(t,e){let n=K(t),r=e.batch.batchId;try{let i=await oV(n.localStore,e);ZS(n,r,null),YS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cc(n,i)}catch(i){await hs(i)}}async function VV(t,e,n){let r=K(t);try{let i=await(function(s,c){let u=K(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ye(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);ZS(r,e,n),YS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cc(r,i)}catch(i){await hs(i)}}function YS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ZS(t,e,n){let r=K(t),i=r.du[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Cv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||JS(t,r)})}function JS(t,e){t.Eu.delete(e.path.canonicalString());let n=t.Ru.get(e);n!==null&&($v(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Qv(t))}function RT(t,e,n){for(let r of n)r instanceof Jd?(t.Vu.addReference(r.key,e),LV(t,r)):r instanceof Xd?(F(Kv,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||JS(t,r.key)):$(19791,{wu:r})}function LV(t,e){let n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(F(Kv,"New document in limbo: "+n),t.Eu.add(r),Qv(t))}function Qv(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new B(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new Iv(n)),t.Ru=t.Ru.insert(n,r),$S(t.remoteStore,new yc(wn(Lv(n.path)),r,"TargetPurposeLimboResolution",Nv.ce))}}async function Cc(t,e,n){let r=K(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Xy.Es(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.J_(i),await(async function(u,l){let f=K(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Ts,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.Is,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ps(p))throw p;F(Uv,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.vs.get(m),S=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(S);f.vs=f.vs.insert(m,A)}}})(r.localStore,o))}async function jV(t,e){let n=K(t);if(!n.currentUser.isEqual(e)){F(Kv,"User change. New user:",e.toKey());let r=await BS(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new V(R.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cc(n,r.Ns)}}function BV(t,e){let n=K(t),r=n.Au.get(e);if(r&&r.hu)return te().add(r.key);{let i=te(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function XS(t){let e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Pu.J_=SV.bind(null,e.eventManager),e.Pu.yu=AV.bind(null,e.eventManager),e}function UV(t){let e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VV.bind(null,e),e}var Yv=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Ic(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return iV(this.persistence,new tv,n.initialUser,this.serializer)}Cu(n){return new Hd(Jy.Vi,this.serializer)}Du(n){return new iv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),ef=class extends Yv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof zd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jy(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Hd(r=>zd.Vi(r,n),this.serializer)}};var e0=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>MT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jV.bind(null,this.syncEngine),await CV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new yv})()}createDatastore(n){let r=Ic(n.databaseInfo.databaseId),i=fV(n.databaseInfo);return hV(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new pv(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>MT(this.syncEngine,r,0),(function(){return Gd.v()?new Gd:new ov})())}createSyncEngine(n,r){return(function(o,s,c,u,l,f,p){let m=new wv(o,s,c,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=K(r);F(Wi,"RemoteStore shutting down."),i.Ea.add(5),await wc(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var bv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var zr="FirestoreClient",Tv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=We.UNAUTHENTICATED,this.clientId=Bi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(zr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(zr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Gv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function ry(t,e){t.asyncQueue.verifyOperationInProgress(),F(zr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NT(t,e){t.asyncQueue.verifyOperationInProgress();let n=await $V(t);F(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>TT(e.remoteStore,i)),t._onlineComponents=e}async function $V(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(zr,"Using user provided OfflineComponentProvider");try{await ry(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await ry(t,new Yv)}}else F(zr,"Using default OfflineComponentProvider"),await ry(t,new ef(void 0));return t._offlineComponents}async function t0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(zr,"Using user provided OnlineComponentProvider"),await NT(t,t._uninitializedComponentsProvider._online)):(F(zr,"Using default OnlineComponentProvider"),await NT(t,new e0))),t._onlineComponents}function HV(t){return t0(t).then(e=>e.syncEngine)}async function zV(t){let e=await t0(t),n=e.eventManager;return n.onListen=MV.bind(null,e.syncEngine),n.onUnlisten=xV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PV.bind(null,e.syncEngine),n}function n0(t,e,n={}){let r=new Dn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let f=new bv({next:m=>{f.Nu(),s.enqueueAndForget(()=>TV(o,p)),m.fromCache&&u.source==="server"?l.reject(new V(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new _v(c,f,{includeMetadataChanges:!0,Ka:!0});return bV(o,p)})(await zV(t),t.asyncQueue,e,n,r)),r.promise}function r0(t,e){let n=new Dn;return t.asyncQueue.enqueueAndForget(async()=>OV(await HV(t),e,n)),n.promise}function i0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var qV="ComponentProvider",xT=new Map;function GV(t,e,n,r,i){return new uy(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i0(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var o0="firestore.googleapis.com",PT=!0,tf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new V(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o0,this.ssl=PT}else this.host=e.host,this.ssl=e.ssl??PT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tV)throw new V(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i0(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new V(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new V(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new V(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},as=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Td;switch(r.type){case"firstParty":return new sy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=xT.get(n);r&&(F(qV,"Removing Datastore"),xT.delete(n),r.terminate())})(this),Promise.resolve()}};function s0(t,e,n,r={}){t=lr(t,as);let i=hd(e),o=t._getSettings(),s=z(N({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(bb(`https://${c}`),Sb("Firestore",!0)),o.host!==o0&&o.host!==c&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=z(N({},o),{host:c,ssl:i,emulatorOptions:r});if(!ki(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=We.MOCK_USER;else{l=Tb(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new V(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new We(p)}t._authCredentials=new iy(new bd(l,f))}}var cs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fs(n,t._jsonSchema))return new t(e,r||null,new B(Se.fromString(n.referencePath)))}};nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:xe("string",nt._jsonSchemaVersion),referencePath:xe("string")};var nr=class t extends cs{constructor(e,n,r){super(e,n,Lv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function bc(t,e,...n){if(t=_n(t),LT("collection","path",e),t instanceof as){let r=Se.fromString(e,...n);return Xb(r),new nr(t,null,r)}{if(!(t instanceof nt||t instanceof nr))throw new V(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return Xb(r),new nr(t.firestore,null,r)}}function Rn(t,e,...n){if(t=_n(t),arguments.length===1&&(e=Bi.newId()),LT("doc","path",e),t instanceof as){let r=Se.fromString(e,...n);return Jb(r),new nt(t,null,new B(r))}{if(!(t instanceof nt||t instanceof nr))throw new V(R.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return Jb(r),new nt(t.firestore,t instanceof nr?t.converter:null,new B(r))}}var OT="AsyncQueue",nf=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kd(this,"async_queue_retry"),this._c=()=>{let r=ny();r&&F(OT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=ny();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=ny();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Dn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ps(e))throw e;F(OT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",kT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=gv.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&$(47125,{Pc:kT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function kT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var ur=class extends as{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nf(e),this._firestoreClient=void 0,await e}}};function Zv(t,e){let n=typeof t=="object"?t:Gb(),r=typeof t=="string"?t:e||Od,i=Hb(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Cb("firestore");o&&s0(i,...o)}return i}function mf(t){if(t._terminated)throw new V(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WV(t),t._firestoreClient}function WV(t){let e=t._freezeSettings(),n=GV(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Tv(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Tn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new V(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fs(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:xe("string",Tn._jsonSchemaVersion),bytes:xe("string")};var Qi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var us=class{constructor(e){this._methodName=e}};var rr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(fs(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};rr._jsonSchemaVersion="firestore/geoPoint/1.0",rr._jsonSchema={type:xe("string",rr._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};var Sn=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fs(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Sn._jsonSchemaVersion="firestore/vectorValue/1.0",Sn._jsonSchema={type:xe("string",Sn._jsonSchemaVersion),vectorValues:xe("object")};var KV=/^__.*__$/,Sv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gi(e,this.data,n,this.fieldTransforms)}},rf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function a0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{dataSource:t})}}var Av=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(N(N({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(a0(this.dataSource)&&KV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},Mv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ic(e)}createContext(e,n,r,i=!1){return new Av({dataSource:e,methodName:n,targetDoc:r,path:bt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Jv(t){let e=t._freezeSettings(),n=Ic(t._databaseId);return new Mv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c0(t,e,n,r,i,o={}){let s=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);Xv("Data must be an object, but it was:",s,r);let c=d0(r,s),u,l;if(o.merge)u=new zt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=ls(e,p,n);if(!s.contains(m))throw new V(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);h0(f,m)||f.push(m)}u=new zt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Sv(new Ct(c),u,l)}var of=class t extends us{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function u0(t,e,n,r){let i=t.createContext(1,e,n);Xv("Data must be an object, but it was:",i,r);let o=[],s=Ct.empty();qr(r,(u,l)=>{let f=e_(e,u,n);l=_n(l);let p=i.childContextForFieldPath(f);if(l instanceof of)o.push(f);else{let m=yf(l,p);m!=null&&(o.push(f),s.set(f,m))}});let c=new zt(o);return new rf(s,c,i.fieldTransforms)}function l0(t,e,n,r,i,o){let s=t.createContext(1,e,n),c=[ls(e,r,n)],u=[i];if(o.length%2!=0)throw new V(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(ls(e,o[m])),u.push(o[m+1]);let l=[],f=Ct.empty();for(let m=c.length-1;m>=0;--m)if(!h0(l,c[m])){let y=c[m],S=u[m];S=_n(S);let A=s.childContextForFieldPath(y);if(S instanceof of)l.push(y);else{let M=yf(S,A);M!=null&&(l.push(y),f.set(y,M))}}let p=new zt(l);return new rf(f,p,s.fieldTransforms)}function yf(t,e){if(f0(t=_n(t)))return Xv("Unsupported field value:",e,t),d0(t,e);if(t instanceof us)return(function(r,i){if(!a0(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=yf(c,i.childContextForArray(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Pe.fromDate(r);return{timestampValue:Ud(i.serializer,o)}}if(r instanceof Pe){let o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ud(i.serializer,o)}}if(r instanceof rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:RS(i.serializer,r._byteString)};if(r instanceof nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sn)return(function(s,c){let u=s instanceof Sn?s.toArray():s;return{mapValue:{fields:{[Pv]:{stringValue:Ov},[Jo]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw c.createError("VectorValues must only contain numeric values.");return jv(c.serializer,f)})}}}}}})(r,i);if(VS(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${cf(r)}`)})(t,e)}function d0(t,e){let n={};return tS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(r,i)=>{let o=yf(i,e.childContextForField(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function f0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof rr||t instanceof Tn||t instanceof nt||t instanceof us||t instanceof Sn||VS(t))}function Xv(t,e,n){if(!f0(n)||!BT(n)){let r=cf(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function ls(t,e,n){if((e=_n(e))instanceof Qi)return e._internalPath;if(typeof e=="string")return e_(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}var QV=new RegExp("[~\\*/\\[\\]]");function e_(t,e,n){if(e.search(QV)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qi(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(R.INVALID_ARGUMENT,c+t+u)}function h0(t,e){return t.some(n=>n.isEqual(e))}var Dc=class{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return qr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Jo].arrayValue?.values?.map(r=>Te(r.doubleValue));return new Sn(n)}convertGeoPoint(e){return new rr(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){let n=or(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);ye(FS(r),9688,{name:e});let i=new pc(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var af=class extends Dc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};var p0="@firebase/firestore",g0="4.10.0";var vf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new t_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let n=this._document.data.field(ls("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},t_=class extends vf{data(){return super.data()}};function XV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function eL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ms=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ys=class t extends vf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new vs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ls("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:xe("string",ys._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};var vs=class extends ys{data(e={}){return super.data(e)}},_s=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vs(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new vs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ms(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new vs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ms(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:tL(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function tL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:t})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:xe("string",_s._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};function _f(t){t=lr(t,cs);let e=lr(t.firestore,ur),n=mf(e),r=new af(e);return XV(t._query),n0(n,t._query).then(i=>new _s(e,r,t,i))}function Tc(t,e,n,...r){t=lr(t,nt);let i=lr(t.firestore,ur),o=Jv(i),s;return s=typeof(e=_n(e))=="string"||e instanceof Qi?l0(o,"updateDoc",t._key,e,n,r):u0(o,"updateDoc",t._key,e),n_(i,[s.toMutation(t._key,Cn.exists(!0))])}function Ef(t){return n_(lr(t.firestore,ur),[new ss(t._key,Cn.none())])}function Df(t,e){let n=lr(t.firestore,ur),r=Rn(t),i=eL(t.converter,e),o=Jv(t.firestore);return n_(n,[c0(o,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function n_(t,e){let n=mf(t);return r0(n,e)}(function(e,n=!0){FT(qb),rc(new Jn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ur(new Sd(r.getProvider("auth-internal")),new Md(s,r.getProvider("app-check-internal")),sS(s,i),s);return o=N({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Br(p0,g0,e),Br(p0,g0,"esm2020")})();var m0={production:!1,firebase:{apiKey:"AIzaSyDHHlcpgfX50kYngkyVHlUrkl6bUkU9c1Q",authDomain:"tokyo-trip-planner-f9f90.firebaseapp.com",databaseURL:"https://tokyo-trip-planner-f9f90-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tokyo-trip-planner-f9f90",storageBucket:"tokyo-trip-planner-f9f90.firebasestorage.app",messagingSenderId:"864146179312",appId:"1:864146179312:web:5a41432e7f17060d432e35"}};function nL(t,e){if(t&1&&(Gn(0,"a",4),be(1," \u{1F5FA}\uFE0F "),Wn()),t&2){let n=qe();Ta("href",n.place.mapsUrl,wg)}}function rL(t,e){if(t&1){let n=bi();Gn(0,"button",6),Aa("click",function(){Dt(n);let i=qe();return It(i.delete.emit(i.place.id))}),be(1," \u{1F5D1}\uFE0F "),Wn()}}var If=class t{place;toggle=new Ie;delete=new Ie;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xt({type:t,selectors:[["place-item"]],inputs:{place:"place"},outputs:{toggle:"toggle",delete:"delete"},decls:10,vars:9,consts:[[1,"flex","items-center","justify-between","gap-2","py-1"],[1,"flex","items-center","gap-2"],["type","checkbox",3,"change","checked"],[1,"text-xs","px-2","py-0.5","rounded","bg-gray-100"],["target","_blank",1,"text-blue-500","text-sm",3,"href"],["title","Eliminar",1,"text-red-500","hover:text-red-700"],["title","Eliminar",1,"text-red-500","hover:text-red-700",3,"click"]],template:function(n,r){n&1&&(Gn(0,"div",0)(1,"div",1)(2,"input",2),Aa("change",function(){return r.toggle.emit(r.place.id)}),Wn(),Gn(3,"span",3),be(4),Wn(),Gn(5,"span"),be(6),Wn()(),Gn(7,"div",1),xr(8,nL,2,1,"a",4),xr(9,rL,2,0,"button",5),Wn()()),n&2&&(Ti("opacity-50",r.place.visited),Ee(2),Ta("checked",r.place.visited),Ee(2),mn(" ",r.place.type," "),Ee(),Ti("line-through",r.place.visited),Ee(),mn(" ",r.place.name," "),Ee(2),Pr(r.place.mapsUrl?8:-1),Ee(),Pr(r.place.visited?-1:9))},dependencies:[yn],encapsulation:2})};var iL=(t,e)=>e.id;function oL(t,e){if(t&1){let n=bi();le(0,"place-item",5),yt("toggle",function(i){Dt(n);let o=qe(2);return It(o.onToggle(i))})("delete",function(i){Dt(n);let o=qe(2);return It(o.onDelete(i))}),me()}if(t&2){let n=e.$implicit;Bt("place",n)}}function sL(t,e){if(t&1&&(le(0,"div",3),Ca(1,oL,1,1,"place-item",4,iL),me()),t&2){let n=qe();Ee(),ba(n.places)}}var wf=class t{day;places;toggleVisited;deletePlace;open=!0;onToggle(e){this.toggleVisited(e)}formatDate(e){let[n,r,i]=e.split("-");return`${i}/${r}/${n}`}onDelete(e){this.deletePlace(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xt({type:t,selectors:[["day-accordion"]],inputs:{day:"day",places:"places",toggleVisited:"toggleVisited",deletePlace:"deletePlace"},decls:7,vars:3,consts:[[1,"flex","justify-between","items-center","cursor-pointer",3,"click"],[1,"font-semibold","text-lg"],[1,"text-gray-400","text-xl"],[1,"mt-3","space-y-1"],[3,"place"],[3,"toggle","delete","place"]],template:function(n,r){n&1&&(le(0,"div")(1,"div",0),yt("click",function(){return r.open=!r.open}),le(2,"h3",1),be(3),me(),le(4,"span",2),be(5),me()(),xr(6,sL,3,0,"div",3),me()),n&2&&(Ee(3),mn(" ",r.formatDate(r.day.date)," "),Ee(2),mn(" ",r.open?"\u2304":"\u203A"," "),Ee(),Pr(r.open?6:-1))},dependencies:[yn,If],encapsulation:2})};var aL=(t,e)=>e.date;function cL(t,e){if(t&1&&(le(0,"div",2),Or(1,"day-accordion",3),me()),t&2){let n=e.$implicit,r=qe();Ee(),Bt("day",n)("places",r.getPlacesForDay(n))("toggleVisited",r.toggleVisited)("deletePlace",r.deletePlace)}}var Cf=class t{days;places;toggleVisited;deletePlace;getPlacesForDay(e){return this.places().filter(n=>e.placeIds.includes(n.id))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xt({type:t,selectors:[["timeline"]],inputs:{days:"days",places:"places",toggleVisited:"toggleVisited",deletePlace:"deletePlace"},decls:5,vars:2,consts:[[1,"text-sm","text-gray-500","mb-4"],[1,"space-y-4"],[1,"bg-white","rounded-xl","shadow","p-4"],[3,"day","places","toggleVisited","deletePlace"]],template:function(n,r){n&1&&(le(0,"div",0),be(1),me(),le(2,"div",1),Ca(3,cL,2,4,"div",2,aL),me()),n&2&&(Ee(),Ml(" \u{1F4C5} ",r.days().length," d\xEDas \xB7 \u{1F4CD} ",r.places().length," sitios "),Ee(2),ba(r.days()))},dependencies:[yn,wf],encapsulation:2})};var b0=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ve(wi),ve(Ar))};static \u0275dir=wt({type:t})}return t})(),c_=(()=>{class t extends b0{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Sr(t)))(i||t)}})();static \u0275dir=wt({type:t,features:[qn]})}return t})(),Mf=new j("");var uL={provide:Mf,useExisting:Vn(()=>Rf),multi:!0};function lL(){let t=Ut()?Ut().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var dL=new j(""),Rf=(()=>{class t extends b0{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!lL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ve(wi),ve(Ar),ve(dL,8))};static \u0275dir=wt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&yt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[So([uL]),qn]})}return t})();var fL=new j(""),hL=new j("");function T0(t){return t!=null}function S0(t){return Ci(t)?ke(t):t}function A0(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function M0(t,e){return e.map(n=>n(t))}function pL(t){return!t.validate}function R0(t){return t.map(e=>pL(e)?e:n=>e.validate(n))}function gL(t){if(!t)return null;let e=t.filter(T0);return e.length==0?null:function(n){return A0(M0(n,e))}}function N0(t){return t!=null?gL(R0(t)):null}function mL(t){if(!t)return null;let e=t.filter(T0);return e.length==0?null:function(n){let r=M0(n,e).map(S0);return xh(r).pipe(we(A0))}}function x0(t){return t!=null?mL(R0(t)):null}function y0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function yL(t){return t._rawValidators}function vL(t){return t._rawAsyncValidators}function r_(t){return t?Array.isArray(t)?t:[t]:[]}function Tf(t,e){return Array.isArray(t)?t.includes(e):t===e}function v0(t,e){let n=r_(e);return r_(t).forEach(i=>{Tf(n,i)||n.push(i)}),n}function _0(t,e){return r_(e).filter(n=>!Tf(t,n))}var Sf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=N0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=x0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},i_=class extends Sf{name;get formDirective(){return null}get path(){return null}},Nc=class extends Sf{_parent=null;name=null;valueAccessor=null},o_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var P0=(()=>{class t extends o_{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ve(Nc,2))};static \u0275dir=wt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ti("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qn]})}return t})();var Sc="VALID",bf="INVALID",Es="PENDING",Ac="DISABLED",Zi=class{},Af=class extends Zi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Mc=class extends Zi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Rc=class extends Zi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ds=class extends Zi{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var s_=class extends Zi{source;constructor(e){super(),this.source=e}};function _L(t){return(Nf(t)?t.validators:t)||null}function EL(t){return Array.isArray(t)?N0(t):t||null}function DL(t,e){return(Nf(e)?e.asyncValidators:t)||null}function IL(t){return Array.isArray(t)?x0(t):t||null}function Nf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var a_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ct(this.statusReactive)}set status(e){ct(()=>this.statusReactive.set(e))}_status=Ao(()=>this.statusReactive());statusReactive=tt(void 0);get valid(){return this.status===Sc}get invalid(){return this.status===bf}get pending(){return this.status==Es}get disabled(){return this.status===Ac}get enabled(){return this.status!==Ac}errors;get pristine(){return ct(this.pristineReactive)}set pristine(e){ct(()=>this.pristineReactive.set(e))}_pristine=Ao(()=>this.pristineReactive());pristineReactive=tt(!0);get dirty(){return!this.pristine}get touched(){return ct(this.touchedReactive)}set touched(e){ct(()=>this.touchedReactive.set(e))}_touched=Ao(()=>this.touchedReactive());touchedReactive=tt(!1);get untouched(){return!this.touched}_events=new $e;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(v0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(v0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_0(e,this._rawAsyncValidators))}hasValidator(e){return Tf(this._rawValidators,e)}hasAsyncValidator(e){return Tf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(z(N({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Rc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Rc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(z(N({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Mc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Mc(!0,r))}markAsPending(e={}){this.status=Es;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ds(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(z(N({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this.errors=null,this._forEachChild(i=>{i.disable(z(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,r)),this._events.next(new Ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(N({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this._forEachChild(r=>{r.enable(z(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(N({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sc||this.status===Es)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Af(this.value,n)),this._events.next(new Ds(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(z(N({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ac:Sc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Es,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=S0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ds(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ie,this.statusChanges=new Ie}_calculateStatus(){return this._allControlsDisabled()?Ac:this.errors?bf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Es)?Es:this._anyControlsHaveStatus(bf)?bf:Sc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Mc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Rc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=EL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=IL(this._rawAsyncValidators)}};var O0=new j("",{factory:()=>u_}),u_="always";function wL(t,e){return[...e.path,t]}function CL(t,e,n=u_){TL(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),SL(t,e),ML(t,e),AL(t,e),bL(t,e)}function E0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function TL(t,e){let n=yL(t);e.validator!==null?t.setValidators(y0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=vL(t);e.asyncValidator!==null?t.setAsyncValidators(y0(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();E0(e._rawValidators,i),E0(e._rawAsyncValidators,i)}function SL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&k0(t,e)})}function AL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&k0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function k0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ML(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function RL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function NL(t){return Object.getPrototypeOf(t.constructor)===c_}function xL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Rf?n=o:NL(o)?r=o:i=o}),i||r||n||null}function D0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function I0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var PL=class extends a_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(_L(n),DL(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(I0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new s_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){D0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){D0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){I0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OL={provide:Nc,useExisting:Vn(()=>l_)},w0=Promise.resolve(),l_=(()=>{class t extends Nc{_changeDetectorRef;callSetDisabledState;control=new PL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ie;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=xL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),RL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){CL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){w0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Gg(r);w0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?wL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ve(i_,9),ve(fL,10),ve(hL,10),ve(Mf,10),ve(Mo,8),ve(O0,8))};static \u0275dir=wt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[So([OL]),qn,Tr]})}return t})();var kL={provide:Mf,useExisting:Vn(()=>xf),multi:!0};function F0(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function FL(t){return t.split(":")[0]}var xf=(()=>{class t extends c_{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=P(Nr).injector;destroyRef=P(pn);cdr=P(Mo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ea({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=F0(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=FL(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Sr(t)))(i||t)}})();static \u0275dir=wt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&yt("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[So([kL]),qn]})}return t})(),V0=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(F0(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(ve(Ar),ve(wi),ve(xf,9))};static \u0275dir=wt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),VL={provide:Mf,useExisting:Vn(()=>L0),multi:!0};function C0(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function LL(t){return t.split(":")[0]}var L0=(()=>{class t extends c_{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=LL(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Sr(t)))(i||t)}})();static \u0275dir=wt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&yt("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[So([VL]),qn]})}return t})(),j0=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(C0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(C0(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(ve(Ar),ve(wi),ve(L0,9))};static \u0275dir=wt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var jL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rr({type:t});static \u0275inj=Ln({})}return t})();var B0=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:O0,useValue:n.callSetDisabledState??u_}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rr({type:t});static \u0275inj=Ln({imports:[jL]})}return t})();var Pf=class t{trip={id:"tokyo-2026",name:"Tokyo Trip \u{1F1EF}\u{1F1F5}",startDate:new Date("2026-11-01T11:25:00"),endDate:new Date("2026-11-17T23:59:59")};getStartDateISO(){return this.toISODate(this.trip.startDate)}getEndDateISO(){return this.toISODate(this.trip.endDate)}toISODate(e){return e.toISOString().split("T")[0]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})};function $L(t,e){if(t&1){let n=bi();le(0,"div",0)(1,"div",1)(2,"h2",2),be(3,"A\xF1adir sitio"),me(),le(4,"div",3)(5,"input",4),Ai("ngModelChange",function(i){Dt(n);let o=qe();return To(o.name,i)||(o.name=i),It(i)}),me(),le(6,"select",5),Ai("ngModelChange",function(i){Dt(n);let o=qe();return To(o.type,i)||(o.type=i),It(i)}),le(7,"option",6),be(8,"Comida"),me(),le(9,"option",7),be(10,"Visita"),me()(),le(11,"input",8),Ai("ngModelChange",function(i){Dt(n);let o=qe();return To(o.day,i)||(o.day=i),It(i)}),me(),le(12,"input",9),Ai("ngModelChange",function(i){Dt(n);let o=qe();return To(o.mapsUrl,i)||(o.mapsUrl=i),It(i)}),me()(),le(13,"div",10)(14,"button",11),yt("click",function(){Dt(n);let i=qe();return It(i.close())}),be(15," Cancelar "),me(),le(16,"button",12),yt("click",function(){Dt(n);let i=qe();return It(i.submit())}),be(17," Guardar "),me()()()()}if(t&2){let n=qe();Ee(5),Si("ngModel",n.name),Ee(),Si("ngModel",n.type),Ee(5),Si("ngModel",n.day),Bt("min",n.minDate)("max",n.maxDate),Ee(),Si("ngModel",n.mapsUrl),Ee(4),Bt("disabled",!n.canSubmit())}}var Of=class t{constructor(e){this.tripService=e;this.minDate=this.tripService.getStartDateISO(),this.maxDate=this.tripService.getEndDateISO()}open;closeModal=new Ie;save=new Ie;name="";type="food";day="";mapsUrl="";minDate;maxDate;ngOnChanges(){this.open()&&!this.day&&(this.day=this.minDate)}canSubmit(){return this.name.trim()&&this.day}close(){this.closeModal.emit()}submit(){this.save.emit({name:this.name.trim(),type:this.type,day:this.day,mapsUrl:this.mapsUrl.trim()||""}),this.close(),this.reset()}reset(){this.name="",this.type="food",this.day="",this.mapsUrl=""}static \u0275fac=function(n){return new(n||t)(ve(Pf))};static \u0275cmp=xt({type:t,selectors:[["add-place-modal"]],inputs:{open:"open"},outputs:{closeModal:"closeModal",save:"save"},features:[Tr],decls:1,vars:1,consts:[[1,"fixed","inset-0","bg-black/40","flex","justify-center","items-center","z-50"],[1,"bg-white","rounded-xl","p-6","w-full","max-w-md"],[1,"text-xl","font-bold","mb-4"],[1,"flex","flex-col","gap-3"],["placeholder","Nombre del sitio",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"border","p-2","rounded",3,"ngModelChange","ngModel"],["value","food"],["value","visit"],["type","date",1,"border","p-2","rounded",3,"ngModelChange","ngModel","min","max"],["placeholder","Google Maps (opcional)",1,"border","p-2","rounded",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2","mt-6"],[1,"px-4","py-2",3,"click"],[1,"px-4","py-2","bg-blue-500","text-white","rounded",3,"click","disabled"]],template:function(n,r){n&1&&xr(0,$L,18,7,"div",0),n&2&&Pr(r.open()?0:-1)},dependencies:[B0,V0,j0,Rf,xf,P0,l_],encapsulation:2})};var kf=class t{collectionRef=bc(Ff,"places");places=tt([]);async loadPlaces(){let n=(await _f(this.collectionRef)).docs.map(r=>z(N({id:r.id},r.data()),{createdAt:r.data().createdAt?.toDate?.()??new Date}));this.places.set(n)}async addPlace(e){let n=await Df(this.collectionRef,z(N({},e),{createdAt:new Date}));return this.places.update(r=>[...r,z(N({},e),{id:n.id,createdAt:new Date})]),n.id}async toggleVisited(e){let n=this.places().find(r=>r.id===e);n&&(await Tc(Rn(this.collectionRef,e),{visited:!n.visited}),this.places.update(r=>r.map(i=>i.id===e?z(N({},i),{visited:!i.visited}):i)))}async deletePlace(e){await Ef(Rn(this.collectionRef,e)),this.places.update(n=>n.filter(r=>r.id!==e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})};var Vf=class t{collectionRef=bc(Ff,"days");days=tt([]);async loadDays(){let e=await _f(this.collectionRef);this.days.set(e.docs.map(n=>N({id:n.id},n.data())))}async addPlaceToDay(e,n){let r=this.days().find(o=>o.date===e);if(!r){let s={id:(await Df(this.collectionRef,{date:e,placeIds:[n]})).id,date:e,placeIds:[n]};this.days.update(c=>[...c,s]);return}if(r.placeIds.includes(n))return;let i=[...r.placeIds,n];await Tc(Rn(this.collectionRef,r.id),{placeIds:i}),this.days.update(o=>o.map(s=>s.id===r.id?z(N({},s),{placeIds:i}):s))}async removePlaceFromAllDays(e){let n=this.days().filter(r=>r.placeIds.includes(e));for(let r of n){let i=r.placeIds.filter(o=>o!==e);if(i.length===0){await Ef(Rn(this.collectionRef,r.id)),this.days.update(o=>o.filter(s=>s.id!==r.id));continue}await Tc(Rn(this.collectionRef,r.id),{placeIds:i}),this.days.update(o=>o.map(s=>s.id===r.id?z(N({},s),{placeIds:i}):s))}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"})};var Lf=class t{constructor(e,n){this.placesService=e;this.itineraryService=n;this.places=this.placesService.places,this.days=this.itineraryService.days}countdown=tt("");flightDate=new Date("2026-11-01T11:25:00");places;days;showAddModal=tt(!1);async ngOnInit(){await this.placesService.loadPlaces(),await this.itineraryService.loadDays(),this.updateCountdown(),setInterval(()=>this.updateCountdown(),1e3)}updateCountdown(){let e=new Date,n=this.flightDate.getTime()-e.getTime();if(n<=0){this.countdown.set("\xA1Ya estamos volando! \u2708\uFE0F");return}let r=Math.floor(n/1e3)%60,i=Math.floor(n/(1e3*60))%60,o=Math.floor(n/(1e3*60*60))%24,s=Math.floor(n/(1e3*60*60*24));this.countdown.set(`${s}d ${o}h ${i}m ${r}s`)}toggleVisited=e=>{this.placesService.toggleVisited(e)};deletePlace=async e=>{let n=this.places().find(r=>r.id===e);if(n){if(n.visited){alert("No puedes eliminar un sitio ya visitado \u{1F609}");return}confirm("\xBFEliminar este sitio del viaje?")&&(await this.itineraryService.removePlaceFromAllDays(e),await this.placesService.deletePlace(e))}};openAddModal=()=>this.showAddModal.set(!0);closeAddModal=()=>this.showAddModal.set(!1);onAddPlace=async e=>{let n=await this.placesService.addPlace({name:e.name,type:e.type,mapsUrl:e.mapsUrl||"",visited:!1});await this.itineraryService.addPlaceToDay(e.day,n)};static \u0275fac=function(n){return new(n||t)(ve(kf),ve(Vf))};static \u0275cmp=xt({type:t,selectors:[["app-root"]],decls:17,vars:6,consts:[[1,"w-full","flex","justify-center","mt-6"],[1,"px-6","py-4","rounded-2xl","bg-linear-to-r","from-red-500","to-orange-400","text-white","shadow-lg","text-center"],[1,"text-sm","uppercase","tracking-widest","opacity-80"],[1,"text-4xl","font-mono","font-bold","mt-2"],[1,"text-xs","mt-1","opacity-80"],[1,"text-4xl","font-bold","text-red-500","mt-6"],[1,"mt-2","text-gray-600"],[1,"fixed","bottom-6","right-6","bg-red-500","text-white","rounded-full","w-14","h-14","text-3xl","shadow-lg",3,"click"],[3,"closeModal","save","open"],[3,"days","places","toggleVisited","deletePlace"]],template:function(n,r){n&1&&(le(0,"div",0)(1,"div",1)(2,"div",2),be(3,"Vuelo Madrid \u2192 Tokio"),me(),le(4,"div",3),be(5),me(),le(6,"div",4),be(7,"1 de noviembre \xB7 11:25"),me()()(),le(8,"h1",5),be(9,"Tokyo Trip Planner \u{1F1EF}\u{1F1F5}"),me(),le(10,"p",6),be(11,"Cuenta atr\xE1s y planificaci\xF3n del viaje"),me(),le(12,"button",7),yt("click",function(){return r.openAddModal()}),be(13,` \uFF0B
`),me(),le(14,"add-place-modal",8),yt("closeModal",function(){return r.closeAddModal()})("save",function(o){return r.onAddPlace(o)}),me(),Or(15,"timeline",9)(16,"router-outlet")),n&2&&(Ee(5),mn("\u23F3 ",r.countdown()),Ee(9),Bt("open",r.showAddModal),Ee(),Bt("days",r.days)("places",r.places)("toggleVisited",r.toggleVisited)("deletePlace",r.deletePlace))},dependencies:[yn,Ya,Cf,Of],encapsulation:2})};var qL=Gm(m0.firebase),Ff=Zv(qL);nm(Lf,{providers:[Sm(mb)]});export{Ff as db};
