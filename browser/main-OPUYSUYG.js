var OC=Object.defineProperty,kC=Object.defineProperties;var LC=Object.getOwnPropertyDescriptors;var Zy=Object.getOwnPropertySymbols;var FC=Object.prototype.hasOwnProperty,VC=Object.prototype.propertyIsEnumerable;var Xy=(t,e,n)=>e in t?OC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})FC.call(e,n)&&Xy(t,n,e[n]);if(Zy)for(var n of Zy(e))VC.call(e,n)&&Xy(t,n,e[n]);return t},ie=(t,e)=>kC(t,LC(e));var We=null,Va=!1,Td=1,jC=null,mt=Symbol("SIGNAL");function $(t){let e=We;return We=t,e}function ja(){return We}var Ua={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ba(t){if(Va)throw new Error("");if(We===null)return;We.consumerOnSignalRead(t);let e=We.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=We.recomputing;if(r&&(n=e!==void 0?e.nextProducer:We.producers,n!==void 0&&n.producer===t)){We.producersTail=n,n.lastReadVersion=t.version;return}let o=t.consumersTail;if(o!==void 0&&o.consumer===We&&(!r||BC(o,We)))return;let i=ao(We),s={producer:t,consumer:We,nextProducer:n,prevConsumer:o,lastReadVersion:t.version,nextConsumer:void 0};We.producersTail=s,e!==void 0?e.nextProducer=s:We.producers=s,i&&ov(t,s)}function ev(){Td++}function tv(t){if(!(ao(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Td)){if(!t.producerMustRecompute(t)&&!$a(t)){wd(t);return}t.producerRecomputeValue(t),wd(t)}}function bd(t){if(t.consumers===void 0)return;let e=Va;Va=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||UC(r)}}finally{Va=e}}function Sd(){return We?.consumerAllowSignalWrites!==!1}function UC(t){t.dirty=!0,bd(t),t.consumerMarkedDirty?.(t)}function wd(t){t.dirty=!1,t.lastCleanEpoch=Td}function Ha(t){return t&&nv(t),$(t)}function nv(t){t.producersTail=void 0,t.recomputing=!0}function Cd(t,e){$(e),t&&rv(t)}function rv(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ao(t))do n=Dd(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function $a(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(tv(n),r!==n.version))return!0}return!1}function Ui(t){if(ao(t)){let e=t.producers;for(;e!==void 0;)e=Dd(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function ov(t,e){let n=t.consumersTail,r=ao(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let o=t.producers;o!==void 0;o=o.nextProducer)ov(o.producer,o)}function Dd(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,o=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!ao(e)){let i=e.producers;for(;i!==void 0;)i=Dd(i)}return n}function ao(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function iv(t){jC?.(t)}function BC(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function sv(t,e){return Object.is(t,e)}function HC(){throw new Error}var av=HC;function cv(t){av(t)}function Ad(t){av=t}var $C=null;function Rd(t,e){let n=Object.create(za);n.value=t,e!==void 0&&(n.equal=e);let r=()=>uv(n);return r[mt]=n,iv(n),[r,s=>Bi(n,s),s=>lv(n,s)]}function uv(t){return Ba(t),t.value}function Bi(t,e){Sd()||cv(t),t.equal(t.value,e)||(t.value=e,zC(t))}function lv(t,e){Sd()||cv(t),Bi(t,e(t.value))}var za=ie(x({},Ua),{equal:sv,value:void 0,kind:"signal"});function zC(t){t.version++,ev(),bd(t),$C?.(t)}function Nd(t){let e=$(null);try{return t()}finally{$(e)}}function G(t){return typeof t=="function"}function co(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qa=co(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Be=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(G(r))try{r()}catch(i){e=i instanceof qa?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{dv(i)}catch(s){e=e??[],s instanceof qa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)dv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};Be.EMPTY=(()=>{let t=new Be;return t.closed=!0,t})();var Md=Be.EMPTY;function Ga(t){return t instanceof Be||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function dv(t){G(t)?t():t.unsubscribe()}var bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var uo={setTimeout(t,e,...n){let{delegate:r}=uo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=uo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wa(t){uo.setTimeout(()=>{let{onUnhandledError:e}=bt;if(e)e(t);else throw t})}function $i(){}var fv=xd("C",void 0,void 0);function hv(t){return xd("E",void 0,t)}function pv(t){return xd("N",t,void 0)}function xd(t,e,n){return{kind:t,value:e,error:n}}var ur=null;function lo(t){if(bt.useDeprecatedSynchronousErrorHandling){let e=!ur;if(e&&(ur={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ur;if(ur=null,n)throw r}}else t()}function gv(t){bt.useDeprecatedSynchronousErrorHandling&&ur&&(ur.errorThrown=!0,ur.error=t)}var lr=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ga(e)&&e.add(this)):this.destination=WC}static create(e,n,r){return new fo(e,n,r)}next(e){this.isStopped?Od(pv(e),this):this._next(e)}error(e){this.isStopped?Od(hv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Od(fv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qC=Function.prototype.bind;function Pd(t,e){return qC.call(t,e)}var kd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ka(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ka(r)}else Ka(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ka(n)}}},fo=class extends lr{constructor(e,n,r){super();let o;if(G(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&bt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Pd(e.next,i),error:e.error&&Pd(e.error,i),complete:e.complete&&Pd(e.complete,i)}):o=e}this.destination=new kd(o)}};function Ka(t){bt.useDeprecatedSynchronousErrorHandling?gv(t):Wa(t)}function GC(t){throw t}function Od(t,e){let{onStoppedNotification:n}=bt;n&&uo.setTimeout(()=>n(t,e))}var WC={closed:!0,next:$i,error:GC,complete:$i};var ho=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(t){return t}function Ld(...t){return Fd(t)}function Fd(t){return t.length===0?St:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=QC(n)?n:new fo(n,r,o);return lo(()=>{let{operator:s,source:c}=this;i.add(s?s.call(i,c):c?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=mv(r),new r((o,i)=>{let s=new fo({next:c=>{try{n(c)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ho](){return this}pipe(...n){return Fd(n)(this)}toPromise(n){return n=mv(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function mv(t){var e;return(e=t??bt.Promise)!==null&&e!==void 0?e:Promise}function KC(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}function QC(t){return t&&t instanceof lr||KC(t)&&Ga(t)}function YC(t){return G(t?.lift)}function ue(t){return e=>{if(YC(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,o){return new Vd(t,e,n,r,o)}var Vd=class extends lr{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=o?function(c){try{o(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var yv=co(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Qa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new yv}next(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Md:(this.currentObservers=null,i.push(n),new Be(()=>{this.currentObservers=null,Hi(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new Qa(e,n),t})(),Qa=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Md}};var He=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $e=new se(t=>t.complete());function vv(t){return t&&G(t.schedule)}function _v(t){return t[t.length-1]}function Ev(t){return G(_v(t))?t.pop():void 0}function Vn(t){return vv(_v(t))?t.pop():void 0}function wv(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?i(h.value):o(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Iv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(t){return this instanceof dr?(this.v=t,this):new dr(t)}function Tv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(o[y]=function(R){return new Promise(function(M,L){i.push([y,R,M,L])>1||u(y,R)})},D&&(o[y]=D(o[y])))}function u(y,D){try{l(r[y](D))}catch(R){m(i[0][3],R)}}function l(y){y.value instanceof dr?Promise.resolve(y.value.v).then(h,p):m(i[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),i.shift(),i.length&&u(i[0][0],i[0][1])}}function bv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Iv=="function"?Iv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(c,u){s=t[i](s),o(c,u,s.done,s.value)})}}function o(i,s,c,u){Promise.resolve(u).then(function(l){i({value:l,done:c})},s)}}var Ya=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ja(t){return G(t?.then)}function Za(t){return G(t[ho])}function Xa(t){return Symbol.asyncIterator&&G(t?.[Symbol.asyncIterator])}function ec(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tc=JC();function nc(t){return G(t?.[tc])}function rc(t){return Tv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield dr(n.read());if(o)return yield dr(void 0);yield yield dr(r)}}finally{n.releaseLock()}})}function oc(t){return G(t?.getReader)}function Me(t){if(t instanceof se)return t;if(t!=null){if(Za(t))return ZC(t);if(Ya(t))return XC(t);if(Ja(t))return eD(t);if(Xa(t))return Sv(t);if(nc(t))return tD(t);if(oc(t))return nD(t)}throw ec(t)}function ZC(t){return new se(e=>{let n=t[ho]();if(G(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XC(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function eD(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wa)})}function tD(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Sv(t){return new se(e=>{rD(t,e).catch(n=>e.error(n))})}function nD(t){return Sv(rc(t))}function rD(t,e){var n,r,o,i;return wv(this,void 0,void 0,function*(){try{for(n=bv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function ot(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function ic(t,e=0){return ue((n,r)=>{n.subscribe(he(r,o=>ot(r,t,()=>r.next(o),e),()=>ot(r,t,()=>r.complete(),e),o=>ot(r,t,()=>r.error(o),e)))})}function sc(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Cv(t,e){return Me(t).pipe(sc(e),ic(e))}function Dv(t,e){return Me(t).pipe(sc(e),ic(e))}function Av(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Rv(t,e){return new se(n=>{let r;return ot(n,e,()=>{r=t[tc](),ot(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>G(r?.return)&&r.return()})}function ac(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Nv(t,e){return ac(rc(t),e)}function Mv(t,e){if(t!=null){if(Za(t))return Cv(t,e);if(Ya(t))return Av(t,e);if(Ja(t))return Dv(t,e);if(Xa(t))return ac(t,e);if(nc(t))return Rv(t,e);if(oc(t))return Nv(t,e)}throw ec(t)}function xe(t,e){return e?Mv(t,e):Me(t)}function te(...t){let e=Vn(t);return xe(t,e)}function jd(t,e){let n=G(t)?t:()=>t,r=o=>o.error(n());return new se(e?o=>e.schedule(r,0,o):r)}function cc(t){return!!t&&(t instanceof se||G(t.lift)&&G(t.subscribe))}var fr=co(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ee(t,e){return ue((n,r)=>{let o=0;n.subscribe(he(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:oD}=Array;function iD(t,e){return oD(e)?t(...e):t(e)}function xv(t){return Ee(e=>iD(t,e))}var{isArray:sD}=Array,{getPrototypeOf:aD,prototype:cD,keys:uD}=Object;function Pv(t){if(t.length===1){let e=t[0];if(sD(e))return{args:e,keys:null};if(lD(e)){let n=uD(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function lD(t){return t&&typeof t=="object"&&aD(t)===cD}function Ov(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Ud(...t){let e=Vn(t),n=Ev(t),{args:r,keys:o}=Pv(t);if(r.length===0)return xe([],e);let i=new se(dD(r,e,o?s=>Ov(o,s):St));return n?i.pipe(xv(n)):i}function dD(t,e,n=St){return r=>{kv(e,()=>{let{length:o}=t,i=new Array(o),s=o,c=o;for(let u=0;u<o;u++)kv(e,()=>{let l=xe(t[u],e),h=!1;l.subscribe(he(r,p=>{i[u]=p,h||(h=!0,c--),c||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kv(t,e,n){t?ot(n,t,e):e()}function Lv(t,e,n,r,o,i,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?D(R):u.push(R),D=R=>{i&&e.next(R),l++;let M=!1;Me(n(R,h++)).subscribe(he(e,L=>{o?.(L),i?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?ot(e,s,()=>D(L)):D(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(he(e,y,()=>{p=!0,m()})),()=>{c?.()}}function tt(t,e,n=1/0){return G(e)?tt((r,o)=>Ee((i,s)=>e(r,i,o,s))(Me(t(r,o))),n):(typeof e=="number"&&(n=e),ue((r,o)=>Lv(r,o,t,n)))}function Fv(t=1/0){return tt(St,t)}function Vv(){return Fv(1)}function po(...t){return Vv()(xe(t,Vn(t)))}function zi(t){return new se(e=>{Me(t()).subscribe(e)})}function Xt(t,e){return ue((n,r)=>{let o=0;n.subscribe(he(r,i=>t.call(e,i,o++)&&r.next(i)))})}function qi(t){return ue((e,n)=>{let r=null,o=!1,i;r=e.subscribe(he(n,void 0,void 0,s=>{i=Me(t(s,qi(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function uc(t,e){return G(e)?tt(t,e,1):tt(t,1)}function jv(t){return ue((e,n)=>{let r=!1;e.subscribe(he(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function en(t){return t<=0?()=>$e:ue((e,n)=>{let r=0;e.subscribe(he(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Uv(t=fD){return ue((e,n)=>{let r=!1;e.subscribe(he(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function fD(){return new fr}function Bd(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function tn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((o,i)=>t(o,i,r)):St,en(1),n?jv(e):Uv(()=>new fr))}function lc(t){return t<=0?()=>$e:ue((e,n)=>{let r=[];e.subscribe(he(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Hd(...t){let e=Vn(t);return ue((n,r)=>{(e?po(t,n,e):po(t,n)).subscribe(r)})}function nn(t,e){return ue((n,r)=>{let o=null,i=0,s=!1,c=()=>s&&!o&&r.complete();n.subscribe(he(r,u=>{o?.unsubscribe();let l=0,h=i++;Me(t(u,h)).subscribe(o=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{o=null,c()}))},()=>{s=!0,c()}))})}function Gi(t){return ue((e,n)=>{Me(t).subscribe(he(n,()=>n.complete(),$i)),!n.closed&&e.subscribe(n)})}function Lt(t,e,n){let r=G(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;o.subscribe(he(i,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),i.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),i.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),i.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}var $d;function dc(){return $d}function Ft(t){let e=$d;return $d=t,e}var Bv=Symbol("NotFound");function go(t){return t===Bv||t?.name==="\u0275NotFound"}var U=class extends Error{code;constructor(e,n){super(Zi(e,n)),this.code=e}};function mD(t){return`NG0${Math.abs(t)}`}function Zi(t,e){return`${mD(t)}${e?": "+e:""}`}function le(t){for(let e in t)if(t[e]===le)return e;throw Error("")}function jn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(jn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function of(t,e){return t?e?`${t} ${e}`:t:e||""}var yD=le({__forward_ref__:le});function yc(t){return t.__forward_ref__=yc,t.toString=function(){return jn(this())},t}function it(t){return sf(t)?t():t}function sf(t){return typeof t=="function"&&t.hasOwnProperty(yD)&&t.__forward_ref__===yc}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xi(t){return vD(t,vc)}function af(t){return Xi(t)!==null}function vD(t,e){return t.hasOwnProperty(e)&&t[e]||null}function _D(t){let e=t?.[vc]??null;return e||null}function qd(t){return t&&t.hasOwnProperty(hc)?t[hc]:null}var vc=le({\u0275prov:le}),hc=le({\u0275inj:le}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cf(t){return t&&!!t.\u0275providers}var uf=le({\u0275cmp:le}),lf=le({\u0275dir:le}),df=le({\u0275pipe:le}),ff=le({\u0275mod:le}),Ki=le({\u0275fac:le}),vr=le({__NG_ELEMENT_ID__:le}),Hv=le({__NG_ENV_ID__:le});function hf(t){return _c(t,"@NgModule"),t[ff]||null}function Bn(t){return _c(t,"@Component"),t[uf]||null}function pf(t){return _c(t,"@Directive"),t[lf]||null}function Gv(t){return _c(t,"@Pipe"),t[df]||null}function _c(t,e){if(t==null)throw new U(-919,!1)}function Wv(t){return typeof t=="string"?t:t==null?"":String(t)}var Kv=le({ngErrorCode:le}),ED=le({ngErrorMessage:le}),ID=le({ngTokenPath:le});function gf(t,e){return Qv("",-200,e)}function Ec(t,e){throw new U(-201,!1)}function Qv(t,e,n){let r=new U(e,t);return r[Kv]=e,r[ED]=t,n&&(r[ID]=n),r}function wD(t){return t[Kv]}var Gd;function Yv(){return Gd}function lt(t){let e=Gd;return Gd=t,e}function mf(t,e,n){let r=Xi(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Ec(t,"")}var TD={},hr=TD,bD="__NG_DI_FLAG__",Wd=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=pr(n)||0;try{return this.injector.get(e,r&8?null:hr,r)}catch(o){if(go(o))return o;throw o}}};function SD(t,e=0){let n=dc();if(n===void 0)throw new U(-203,!1);if(n===null)return mf(t,void 0,e);{let r=CD(e),o=n.retrieve(t,r);if(go(o)){if(r.optional)return null;throw o}return o}}function Z(t,e=0){return(Yv()||SD)(it(t),e)}function O(t,e){return Z(t,pr(e))}function pr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function CD(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Kd(t){let e=[];for(let n=0;n<t.length;n++){let r=it(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let c=r[s],u=DD(c);typeof u=="number"?u===-1?o=c.token:i|=u:o=c}e.push(Z(o,i))}else e.push(Z(r))}return e}function DD(t){return t[bD]}function gr(t,e){let n=t.hasOwnProperty(Ki);return n?t[Ki]:null}function Ic(t,e){t.forEach(n=>Array.isArray(n)?Ic(n,e):e(n))}function yf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function es(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var _r={},mr=[],vo=new B(""),vf=new B("",-1),_f=new B(""),Qi=class{get(e,n=hr){if(n===hr){let o=Qv("",-201);throw o.name="\u0275NotFound",o}return n}};function wc(t){return{\u0275providers:t}}function Jv(...t){return{\u0275providers:Ef(!0,t),\u0275fromNgModule:!0}}function Ef(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return Ic(e,s=>{let c=s;pc(c,i,[],r)&&(o||=[],o.push(c))}),o!==void 0&&Zv(o,i),n}function Zv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];If(o,i=>{e(i,r)})}}function pc(t,e,n,r){if(t=it(t),!t)return!1;let o=null,i=qd(t),s=!i&&Bn(t);if(!i&&!s){let u=t.ngModule;if(i=qd(u),i)o=u;else return!1}else{if(s&&!s.standalone)return!1;o=t}let c=r.has(o);if(s){if(c)return!1;if(r.add(o),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)pc(l,e,n,r)}}else if(i){if(i.imports!=null&&!c){r.add(o);let l;Ic(i.imports,h=>{pc(h,e,n,r)&&(l||=[],l.push(h))}),l!==void 0&&Zv(l,e)}if(!c){let l=gr(o)||(()=>new o);e({provide:o,useFactory:l,deps:mr},o),e({provide:_f,useValue:o,multi:!0},o),e({provide:vo,useValue:()=>Z(o),multi:!0},o)}let u=i.providers;if(u!=null&&!c){let l=t;If(u,h=>{e(h,l)})}}else return!1;return o!==t&&t.providers!==void 0}function If(t,e){for(let n of t)cf(n)&&(n=n.\u0275providers),Array.isArray(n)?If(n,e):e(n)}var AD=le({provide:String,useValue:le});function Xv(t){return t!==null&&typeof t=="object"&&AD in t}function RD(t){return!!(t&&t.useExisting)}function ND(t){return!!(t&&t.useFactory)}function gc(t){return typeof t=="function"}var ts=new B(""),fc={},$v={},zd;function ns(){return zd===void 0&&(zd=new Qi),zd}var Re=class{},yr=class extends Re{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Yd(e,s=>this.processProvider(s)),this.records.set(vf,mo(void 0,this)),o.has("environment")&&this.records.set(Re,mo(void 0,this));let i=this.records.get(ts);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(_f,mr,{self:!0}))}retrieve(e,n){let r=pr(n)||0;try{return this.get(e,hr,r)}catch(o){if(go(o))return o;throw o}}destroy(){Wi(this),this._destroyed=!0;let e=$(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$(e)}}onDestroy(e){return Wi(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Wi(this);let n=Ft(this),r=lt(void 0),o;try{return e()}finally{Ft(n),lt(r)}}get(e,n=hr,r){if(Wi(this),e.hasOwnProperty(Hv))return e[Hv](this);let o=pr(r),i,s=Ft(this),c=lt(void 0);try{if(!(o&4)){let l=this.records.get(e);if(l===void 0){let h=kD(e)&&Xi(e);h&&this.injectableDefInScope(h)?l=mo(Qd(e),fc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,o)}let u=o&2?ns():this.parent;return n=o&8&&n===hr?null:n,u.get(e,n)}catch(u){let l=wD(u);throw l===-200||l===-201?new U(l,null):u}finally{lt(c),Ft(s)}}resolveInjectorInitializers(){let e=$(null),n=Ft(this),r=lt(void 0),o;try{let i=this.get(vo,mr,{self:!0});for(let s of i)s()}finally{Ft(n),lt(r),$(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=it(e);let n=gc(e)?e:it(e&&e.provide),r=xD(e);if(!gc(e)&&e.multi===!0){let o=this.records.get(n);o||(o=mo(void 0,fc,!0),o.factory=()=>Kd(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let o=$(null);try{if(n.value===$v)throw gf(jn(e));return n.value===fc&&(n.value=$v,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&OD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=it(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qd(t){let e=Xi(t),n=e!==null?e.factory:gr(t);if(n!==null)return n;if(t instanceof B)throw new U(204,!1);if(t instanceof Function)return MD(t);throw new U(204,!1)}function MD(t){if(t.length>0)throw new U(204,!1);let n=_D(t);return n!==null?()=>n.factory(t):()=>new t}function xD(t){if(Xv(t))return mo(void 0,t.useValue);{let e=e_(t);return mo(e,fc)}}function e_(t,e,n){let r;if(gc(t)){let o=it(t);return gr(o)||Qd(o)}else if(Xv(t))r=()=>it(t.useValue);else if(ND(t))r=()=>t.useFactory(...Kd(t.deps||[]));else if(RD(t))r=(o,i)=>Z(it(t.useExisting),i!==void 0&&i&8?8:void 0);else{let o=it(t&&(t.useClass||t.provide));if(PD(t))r=()=>new o(...Kd(t.deps));else return gr(o)||Qd(o)}return r}function Wi(t){if(t.destroyed)throw new U(205,!1)}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function PD(t){return!!t.deps}function OD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kD(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Yd(t,e){for(let n of t)Array.isArray(n)?Yd(n,e):n&&cf(n)?Yd(n.\u0275providers,e):e(n)}function Qe(t,e){let n;t instanceof yr?(Wi(t),n=t):n=new Wd(t);let r,o=Ft(n),i=lt(void 0);try{return e()}finally{Ft(o),lt(i)}}function t_(){return Yv()!==void 0||dc()!=null}var Ct=0,K=1,Y=2,Pe=3,yt=4,vt=5,_o=6,Eo=7,Oe=8,sn=9,an=10,ze=11,Io=12,wf=13,wo=14,ft=15,Er=16,Ir=17,wr=18,cn=19,Tf=20,rn=21,Tc=22,rs=23,ht=24,bc=25,Tr=26,st=27,n_=1,bf=6,Hn=7,os=8,is=9,we=10;function un(t){return Array.isArray(t)&&typeof t[n_]=="object"}function Dt(t){return Array.isArray(t)&&t[n_]===!0}function Sf(t){return(t.flags&4)!==0}function br(t){return t.componentOffset>-1}function Sc(t){return(t.flags&1)===1}function Sr(t){return!!t.template}function To(t){return(t[Y]&512)!==0}function Cr(t){return(t[Y]&256)===256}var r_="svg",o_="math";function _t(t){for(;Array.isArray(t);)t=t[Ct];return t}function i_(t,e){return _t(e[t])}function ln(t,e){return _t(e[t.index])}function Cc(t,e){return t.data[e]}function jt(t,e){let n=e[t];return un(n)?n:n[Ct]}function Dc(t){return(t[Y]&128)===128}function s_(t){return Dt(t[Pe])}function bo(t,e){return e==null?null:t[e]}function Cf(t){t[Ir]=0}function Df(t){t[Y]&1024||(t[Y]|=1024,Dc(t)&&as(t))}function ss(t){return!!(t[Y]&9216||t[ht]?.dirty)}function Ac(t){t[an].changeDetectionScheduler?.notify(8),t[Y]&64&&(t[Y]|=1024),ss(t)&&as(t)}function as(t){t[an].changeDetectionScheduler?.notify(0);let e=Un(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!Dc(e)));)e=Un(e)}function Af(t,e){if(Cr(t))throw new U(911,!1);t[rn]===null&&(t[rn]=[]),t[rn].push(e)}function a_(t,e){if(t[rn]===null)return;let n=t[rn].indexOf(e);n!==-1&&t[rn].splice(n,1)}function Un(t){let e=t[Pe];return Dt(e)?e[Pe]:e}function c_(t){return t[Eo]??=[]}function u_(t){return t.cleanup??=[]}var fe={lFrame:b_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Jd=!1;function l_(){return fe.lFrame.elementDepthCount}function d_(){fe.lFrame.elementDepthCount++}function f_(){fe.lFrame.elementDepthCount--}function h_(){return fe.bindingsEnabled}function p_(){return fe.skipHydrationRootTNode!==null}function g_(t){return fe.skipHydrationRootTNode===t}function m_(){fe.skipHydrationRootTNode=null}function ke(){return fe.lFrame.lView}function So(){return fe.lFrame.tView}function dn(){let t=Rf();for(;t!==null&&t.type===64;)t=t.parent;return t}function Rf(){return fe.lFrame.currentTNode}function y_(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Co(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function Nf(){return fe.lFrame.isParent}function v_(){fe.lFrame.isParent=!1}function Mf(){return Jd}function xf(t){let e=Jd;return Jd=t,e}function __(t){return fe.lFrame.bindingIndex=t}function Pf(){return fe.lFrame.bindingIndex++}function E_(){return fe.lFrame.inI18n}function I_(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Rc(e)}function w_(){return fe.lFrame.currentDirectiveIndex}function Rc(t){fe.lFrame.currentDirectiveIndex=t}function Of(t){fe.lFrame.currentQueryIndex=t}function LD(t){let e=t[K];return e.type===2?e.declTNode:e.type===1?t[vt]:null}function kf(t,e,n){if(n&4){let o=e,i=t;for(;o=o.parent,o===null&&!(n&1);)if(o=LD(i),o===null||(i=i[wo],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=fe.lFrame=T_();return r.currentTNode=e,r.lView=t,!0}function Nc(t){let e=T_(),n=t[K];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function T_(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?b_(t):e}function b_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function S_(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Lf=S_;function Mc(){let t=S_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cs(){return fe.lFrame.selectedIndex}function $n(t){fe.lFrame.selectedIndex=t}function C_(){return fe.lFrame.currentNamespace}var D_=!0;function xc(){return D_}function Pc(t){D_=t}function Zd(t,e=null,n=null,r){let o=Ff(t,e,n,r);return o.resolveInjectorInitializers(),o}function Ff(t,e=null,n=null,r,o=new Set){let i=[n||mr,Jv(t)];return r=r||(typeof t=="object"?void 0:jn(t)),new yr(i,e||ns(),r||null,o)}var Vt=class t{static THROW_IF_NOT_FOUND=hr;static NULL=new Qi;static create(e,n){if(Array.isArray(e))return Zd({name:""},n,e,"");{let r=e.name??"";return Zd({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>Z(vf)});static __NG_ELEMENT_ID__=-1},Le=new B(""),Dr=(()=>{class t{static __NG_ELEMENT_ID__=FD;static __NG_ENV_ID__=n=>n}return t})(),Xd=class extends Dr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Cr(this._lView)}onDestroy(e){let n=this._lView;return Af(n,e),()=>a_(n,e)}};function FD(){return new Xd(ke())}var A_=!1,R_=new B(""),zn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new He(!1);debugTaskTracker=O(R_,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new se(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),ef=class extends Ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,t_()&&(this.destroyRef=O(Dr,{optional:!0})??void 0,this.pendingTasks=O(zn,{optional:!0})??void 0)}emit(e){let n=$(null);try{super.next(e)}finally{$(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:o,error:i,complete:s});return e instanceof Be&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},nt=ef;function mc(...t){}function Vf(t){let e,n;function r(){t=mc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function N_(t){return queueMicrotask(()=>t()),()=>{t=mc}}var jf="isAngularZone",Yi=jf+"_ID",VD=0,dt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nt(!1);onMicrotaskEmpty=new nt(!1);onStable=new nt(!1);onError=new nt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=A_}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,BD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,jD,mc,mc);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},jD={};function Uf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function UD(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Vf(()=>{t.callbackScheduled=!1,tf(t),t.isCheckStableRunning=!0,Uf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tf(t)}function BD(t){let e=()=>{UD(t)},n=VD++;t._inner=t._inner.fork({name:"angular",properties:{[jf]:!0,[Yi]:n,[Yi+n]:!0},onInvokeTask:(r,o,i,s,c,u)=>{if(HD(u))return r.invokeTask(i,s,c,u);try{return zv(t),r.invokeTask(i,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),qv(t)}},onInvoke:(r,o,i,s,c,u,l)=>{try{return zv(t),r.invoke(i,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!$D(u)&&e(),qv(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,tf(t),Uf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function tf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function zv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qv(t){t._nesting--,Uf(t)}var Ji=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nt;onMicrotaskEmpty=new nt;onStable=new nt;onError=new nt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function HD(t){return M_(t,"__ignore_ng_zone__")}function $D(t){return M_(t,"__scheduler_tick__")}function M_(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},fn=new B("",{factory:()=>{let t=O(dt),e=O(Re),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(on),n.handleError(r))})}}}),x_={provide:vo,useValue:()=>{let t=O(on,{optional:!0})},multi:!0};function qn(t,e){let[n,r,o]=Rd(t,e?.equal),i=n,s=i[mt];return i.set=r,i.update=o,i.asReadonly=P_.bind(i),i}function P_(){let t=this[mt];if(t.readonlyFn===void 0){let e=()=>this();e[mt]=t,t.readonlyFn=e}return t.readonlyFn}var yo=class{},us=new B("",{factory:()=>!0});var Bf=new B("");var Hf=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new nf})}return t})(),nf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},rf=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};function hn(t){return Nd(t)}function Kc(t){return{toString:t}.toString()}function rA(t){return typeof t=="function"}function lE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Fc=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},hh=(()=>{let t=()=>dE;return t.ngInherit=!0,t})();function dE(t){return t.type.prototype.ngOnChanges&&(t.setInput=iA),oA}function oA(){let t=hE(this),e=t?.current;if(e){let n=t.previous;if(n===_r)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function iA(t,e,n,r,o){let i=this.declaredInputs[r],s=hE(t)||sA(t,{previous:_r,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[i];c[i]=new Fc(l&&l.currentValue,n,u===_r),lE(t,e,o,n)}var fE="__ngSimpleChanges__";function hE(t){return t[fE]||null}function sA(t,e){return t[fE]=e}var O_=[];var pe=function(t,e=null,n){for(let r=0;r<O_.length;r++){let o=O_[r];o(t,e,n)}},ae=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ae||{});function aA(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=dE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function cA(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=i;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Oc(t,e,n){pE(t,e,3,n)}function kc(t,e,n,r){(t[Y]&3)===n&&pE(t,e,n,r)}function $f(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function pE(t,e,n,r){let o=r!==void 0?t[Ir]&65535:0,i=r??-1,s=e.length-1,c=0;for(let u=o;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Ir]+=65536),(c<i||i==-1)&&(uA(t,n,e,u),t[Ir]=(t[Ir]&4294901760)+u+2),u++}function k_(t,e){pe(ae.LifecycleHookStart,t,e);let n=$(null);try{e.call(t)}finally{$(n),pe(ae.LifecycleHookEnd,t,e)}}function uA(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],c=t[s];o?t[Y]>>14<t[Ir]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,k_(c,i)):k_(c,i)}var Ao=-1,fs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function lA(t){return(t.flags&8)!==0}function dA(t){return(t.flags&16)!==0}function fA(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,i)}else{let i=o,s=n[++r];pA(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function hA(t){return t===3||t===4||t===6}function pA(t){return t.charCodeAt(0)===64}function ph(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?L_(t,n,o,null,e[++r]):L_(t,n,o,null,null))}}return t}function L_(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let c=t[i++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=i-1;break}}}for(;i<t.length;){let c=t[i];if(typeof c=="number")break;if(c===n){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),o!==null&&t.splice(i++,0,o)}function gE(t){return t!==Ao}function Vc(t){return t&32767}function gA(t){return t>>16}function jc(t,e){let n=gA(t),r=e;for(;n>0;)r=r[wo],n--;return r}var Qf=!0;function F_(t){let e=Qf;return Qf=t,e}var mA=256,mE=mA-1,yE=5,yA=0,Ut={};function vA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vr)&&(r=n[vr]),r==null&&(r=n[vr]=yA++);let o=r&mE,i=1<<o;e.data[t+(o>>yE)]|=i}function vE(t,e){let n=_E(t,e);if(n!==-1)return n;let r=e[K];r.firstCreatePass&&(t.injectorIndex=e.length,zf(r.data,t),zf(e,null),zf(r.blueprint,null));let o=gh(t,e),i=t.injectorIndex;if(gE(o)){let s=Vc(o),c=jc(o,e),u=c[K].data;for(let l=0;l<8;l++)e[i+l]=c[s+l]|u[s+l]}return e[i+8]=o,i}function zf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _E(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function gh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=bE(o),r===null)return Ao;if(n++,o=o[wo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ao}function _A(t,e,n){vA(t,e,n)}function EE(t,e,n){if(n&8||t!==void 0)return t;Ec(e,"NodeInjector")}function IE(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=t[sn],i=lt(void 0);try{return o?o.get(e,r,n&8):mf(e,r,n&8)}finally{lt(i)}}return EE(r,e,n)}function wE(t,e,n,r=0,o){if(t!==null){if(e[Y]&2048&&!(r&2)){let s=bA(t,e,n,r,Ut);if(s!==Ut)return s}let i=TE(t,e,n,r,Ut);if(i!==Ut)return i}return IE(e,n,r,o)}function TE(t,e,n,r,o){let i=wA(n);if(typeof i=="function"){if(!kf(e,t,r))return r&1?EE(o,n,r):IE(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Ec(n);else return s}finally{Lf()}}else if(typeof i=="number"){let s=null,c=_E(t,e),u=Ao,l=r&1?e[ft][vt]:null;for((c===-1||r&4)&&(u=c===-1?gh(t,e):e[c+8],u===Ao||!j_(r,!1)?c=-1:(s=e[K],c=Vc(u),e=jc(u,e)));c!==-1;){let h=e[K];if(V_(i,c,h.data)){let p=EA(c,e,n,s,r,l);if(p!==Ut)return p}u=e[c+8],u!==Ao&&j_(r,e[K].data[c+8]===l)&&V_(i,c,e)?(s=h,c=Vc(u),e=jc(u,e)):c=-1}}return o}function EA(t,e,n,r,o,i){let s=e[K],c=s.data[t+8],u=r==null?br(c)&&Qf:r!=s&&(c.type&3)!==0,l=o&1&&i===c,h=IA(c,s,n,u,l);return h!==null?Yf(e,s,h,c,o):Ut}function IA(t,e,n,r,o){let i=t.providerIndexes,s=e.data,c=i&1048575,u=t.directiveStart,l=t.directiveEnd,h=i>>20,p=r?c:c+h,m=o?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&n===D||y>=u&&D.type===n)return y}if(o){let y=s[u];if(y&&Sr(y)&&y.type===n)return u}return null}function Yf(t,e,n,r,o){let i=t[n],s=e.data;if(i instanceof fs){let c=i;if(c.resolving)throw gf("");let u=F_(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?lt(c.injectImpl):null,m=kf(t,r,0);try{i=t[n]=c.factory(void 0,o,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&aA(n,s[n],e)}finally{p!==null&&lt(p),F_(u),c.resolving=!1,Lf()}}return i}function wA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(vr)?t[vr]:void 0;return typeof e=="number"?e>=0?e&mE:TA:e}function V_(t,e,n){let r=1<<t;return!!(n[e+(t>>yE)]&r)}function j_(t,e){return!(t&2)&&!(t&1&&e)}var Ar=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return wE(this._tNode,this._lView,e,pr(r),n)}};function TA(){return new Ar(dn(),ke())}function Qc(t){return Kc(()=>{let e=t.prototype.constructor,n=e[Ki]||Jf(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[Ki]||Jf(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Jf(t){return sf(t)?()=>{let e=Jf(it(t));return e&&e()}:gr(t)}function bA(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[Y]&2048&&!To(s);){let c=TE(i,s,n,r|2,Ut);if(c!==Ut)return c;let u=i.parent;if(!u){let l=s[Tf];if(l){let h=l.get(n,Ut,r);if(h!==Ut)return h}u=bE(s),s=s[wo]}i=u}return o}function bE(t){let e=t[K],n=e.type;return n===2?e.declTNode:n===1?t[vt]:null}function SA(){return mh(dn(),ke())}function mh(t,e){return new SE(ln(t,e))}var SE=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=SA}return t})();function CE(t){return(t.flags&128)===128}var yh=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(yh||{}),DE=new Map,CA=0;function DA(){return CA++}function AA(t){DE.set(t[cn],t)}function Zf(t){DE.delete(t[cn])}var U_="__ngContext__";function Ro(t,e){un(e)?(t[U_]=e[cn],AA(e)):t[U_]=e}function AE(t){return NE(t[Io])}function RE(t){return NE(t[yt])}function NE(t){for(;t!==null&&!Dt(t);)t=t[yt];return t}var RA;function vh(t){RA=t}var Yc=new B("",{factory:()=>NA}),NA="ng";var Jc=new B(""),ms=new B("",{providedIn:"platform",factory:()=>"unknown"});var Zc=new B("",{factory:()=>O(Le).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ME="r";var xE="di";var PE=!1,OE=new B("",{factory:()=>PE});var MA=(t,e,n,r)=>{};function xA(t,e,n,r){MA(t,e,n,r)}function _h(t){return(t.flags&32)===32}var PA=()=>null;function kE(t,e,n=!1){return PA(t,e,n)}function LE(t,e){let n=t.contentQueries;if(n!==null){let r=$(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let c=t.data[s];Of(i),c.contentQueries(2,e[s],s)}}}finally{$(r)}}}function Xf(t,e,n){Of(0);let r=$(null);try{e(t,n)}finally{$(r)}}function FE(t,e,n){if(Sf(e)){let r=$(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{$(r)}}}var Rt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Rt||{});function OA(t,e){return t.createText(e)}function kA(t,e,n){t.setValue(e,n)}function VE(t,e,n){return t.createElement(e,n)}function Uc(t,e,n,r,o){t.insertBefore(e,n,r,o)}function jE(t,e,n){t.appendChild(e,n)}function B_(t,e,n,r,o){r!==null?Uc(t,e,n,r,o):jE(t,e,n)}function UE(t,e,n,r){t.removeChild(null,e,n,r)}function LA(t,e,n){t.setAttribute(e,"style",n)}function FA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function BE(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&fA(t,e,r),o!==null&&FA(t,e,o),i!==null&&LA(t,e,i)}function HE(t){return t instanceof Function?t():t}function VA(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}var $E="ng-template";function jA(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&VA(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Eh(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Eh(t){return t.type===4&&t.value!==$E}function UA(t,e,n){let r=t.type===4&&!n?$E:t.value;return e===r}function BA(t,e,n){let r=4,o=t.attrs,i=o!==null?zA(o):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!At(r)&&!At(u))return!1;if(s&&At(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!UA(t,u,n)||u===""&&e.length===1){if(At(r))return!1;s=!0}}else if(r&8){if(o===null||!jA(t,o,u,n)){if(At(r))return!1;s=!0}}else{let l=e[++c],h=HA(u,o,Eh(t),n);if(h===-1){if(At(r))return!1;s=!0;continue}if(l!==""){let p;if(h>i?p="":p=o[h+1].toLowerCase(),r&2&&l!==p){if(At(r))return!1;s=!0}}}}return At(r)||s}function At(t){return(t&1)===0}function HA(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let c=e[++o];for(;typeof c=="string";)c=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return qA(e,t)}function $A(t,e,n=!1){for(let r=0;r<e.length;r++)if(BA(t,e[r],n))return!0;return!1}function zA(t){for(let e=0;e<t.length;e++){let n=t[e];if(hA(n))return e}return t.length}function qA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function H_(t,e){return t?":not("+e.trim()+")":e}function GA(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];o+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!At(s)&&(e+=H_(i,o),o=""),r=s,i=i||!At(r);n++}return o!==""&&(e+=H_(i,o)),e}function WA(t){return t.map(GA).join(",")}function KA(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!At(o))break;o=i}r++}return n.length&&e.push(1,...n),e}var xo={};function Ih(t,e,n,r,o,i,s,c,u,l,h){let p=st+r,m=p+o,y=QA(p,m),D=typeof l=="function"?l():l;return y[K]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function QA(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:xo);return n}function YA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ih(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wh(t,e,n,r,o,i,s,c,u,l,h){let p=e.blueprint.slice();return p[Ct]=o,p[Y]=r|4|128|8|64|1024,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),Cf(p),p[Pe]=p[wo]=t,p[Oe]=n,p[an]=s||t&&t[an],p[ze]=c||t&&t[ze],p[sn]=u||t&&t[sn]||null,p[vt]=i,p[cn]=DA(),p[_o]=h,p[Tf]=l,p[ft]=e.type==2?t[ft]:p,p}function JA(t,e,n){let r=ln(e,t),o=YA(n),i=t[an].rendererFactory,s=Th(t,wh(t,o,null,zE(n),r,e,null,i.createRenderer(r,n),null,null,null));return t[e.index]=s}function zE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function qE(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Th(t,e){return t[Io]?t[wf][yt]=e:t[Io]=e,t[wf]=e,e}function ys(t=1){GE(So(),ke(),cs()+t,!1)}function GE(t,e,n,r){if(!r)if((e[Y]&3)===3){let i=t.preOrderCheckHooks;i!==null&&Oc(e,i,n)}else{let i=t.preOrderHooks;i!==null&&kc(e,i,0,n)}$n(n)}var Xc=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Xc||{});function eh(t,e,n,r){let o=$(null);try{let[i,s,c]=t.inputs[n],u=null;(s&Xc.SignalBased)!==0&&(u=e[i][mt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,i):lE(e,u,i,r)}finally{$(o)}}var xr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(xr||{}),ZA;function bh(t,e){return ZA(t,e)}var Rr=new Set,Sh=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Sh||{}),vs=new B(""),$_=new Set;function eu(t){$_.has(t)||($_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var WE=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var KE=new B("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:O(Re)})});function QE(t,e,n){let r=t.get(KE);if(Array.isArray(e))for(let o of e)r.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function XA(t,e){let n=t.get(KE);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function eR(t,e){for(let[n,r]of e)QE(t,r.animateFns)}function z_(t,e,n,r){let o=t?.[Tr]?.enter;e!==null&&o&&o.has(n.index)&&eR(r,o)}function Do(t,e,n,r,o,i,s,c){if(o!=null){let u,l=!1;Dt(o)?u=o:un(o)&&(l=!0,o=o[Ct]);let h=_t(o);t===0&&r!==null?(z_(c,r,i,n),s==null?jE(e,r,h):Uc(e,r,h,s||null,!0)):t===1&&r!==null?(z_(c,r,i,n),Uc(e,r,h,s||null,!0)):t===2?q_(c,i,n,p=>{UE(e,h,l,p)}):t===3&&q_(c,i,n,()=>{e.destroyNode(h)}),u!=null&&hR(e,t,n,u,i,r,s)}}function tR(t,e){YE(t,e),e[Ct]=null,e[vt]=null}function nR(t,e,n,r,o,i){r[Ct]=o,r[vt]=e,nu(t,r,n,1,o,i)}function YE(t,e){e[an].changeDetectionScheduler?.notify(9),nu(t,e,e[ze],2,null,null)}function rR(t){let e=t[Io];if(!e)return qf(t[K],t);for(;e;){let n=null;if(un(e))n=e[Io];else{let r=e[we];r&&(n=r)}if(!n){for(;e&&!e[yt]&&e!==t;)un(e)&&qf(e[K],e),e=e[Pe];e===null&&(e=t),un(e)&&qf(e[K],e),n=e&&e[yt]}e=n}}function Ch(t,e){let n=t[is],r=n.indexOf(e);n.splice(r,1)}function tu(t,e){if(Cr(e))return;let n=e[ze];n.destroyNode&&nu(t,e,n,3,null,null),rR(e)}function qf(t,e){if(Cr(e))return;let n=$(null);try{e[Y]&=-129,e[Y]|=256,e[ht]&&Ui(e[ht]),sR(t,e),iR(t,e),e[K].type===1&&e[ze].destroy();let r=e[Er];if(r!==null&&Dt(e[Pe])){r!==e[Pe]&&Ch(r,e);let o=e[wr];o!==null&&o.detachView(t)}Zf(e)}finally{$(n)}}function q_(t,e,n,r){let o=t?.[Tr];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);t&&Rr.add(t[cn]),QE(n,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(c),oR(t,r)}else t&&Rr.delete(t[cn]),r(!1)},o)}function oR(t,e){let n=t[Tr]?.running;if(n){n.then(()=>{t[Tr].running=void 0,Rr.delete(t[cn]),e(!0)});return}e(!1)}function iR(t,e){let n=t.cleanup,r=e[Eo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[Eo]=null);let o=e[rn];if(o!==null){e[rn]=null;for(let s=0;s<o.length;s++){let c=o[s];c()}}let i=e[rs];if(i!==null){e[rs]=null;for(let s of i)s.destroy()}}function sR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof fs)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let c=o[i[s]],u=i[s+1];pe(ae.LifecycleHookStart,c,u);try{u.call(c)}finally{pe(ae.LifecycleHookEnd,c,u)}}else{pe(ae.LifecycleHookStart,o,i);try{i.call(o)}finally{pe(ae.LifecycleHookEnd,o,i)}}}}}function aR(t,e,n){return cR(t,e.parent,n)}function cR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ct];if(br(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===Rt.None||o===Rt.Emulated)return null}return ln(r,n)}function uR(t,e,n){return dR(t,e,n)}function lR(t,e,n){return t.type&40?ln(t,n):null}var dR=lR,G_;function Dh(t,e,n,r){let o=aR(t,r,e),i=e[ze],s=r.parent||e[vt],c=uR(s,r,e);if(o!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)B_(i,o,n[u],c,!1);else B_(i,o,n,c,!1);G_!==void 0&&G_(i,r,e,n,o)}function ls(t,e){if(e!==null){let n=e.type;if(n&3)return ln(e,t);if(n&4)return th(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ls(t,r);{let o=t[e.index];return Dt(o)?th(-1,o):_t(o)}}else{if(n&128)return ls(t,e.next);if(n&32)return bh(e,t)()||_t(t[e.index]);{let r=JE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Un(t[ft]);return ls(o,r)}else return ls(t,e.next)}}}return null}function JE(t,e){if(e!==null){let r=t[ft][vt],o=e.projection;return r.projection[o]}return null}function th(t,e){let n=we+t+1;if(n<e.length){let r=e[n],o=r[K].firstChild;if(o!==null)return ls(r,o)}return e[Hn]}function Ah(t,e,n,r,o,i,s){for(;n!=null;){let c=r[sn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Ro(_t(u),r),n.flags|=2),!_h(n))if(l&8)Ah(t,e,n.child,r,o,i,!1),Do(e,t,c,o,u,n,i,r);else if(l&32){let h=bh(n,r),p;for(;p=h();)Do(e,t,c,o,p,n,i,r);Do(e,t,c,o,u,n,i,r)}else l&16?fR(t,e,r,n,o,i):Do(e,t,c,o,u,n,i,r);n=s?n.projectionNext:n.next}}function nu(t,e,n,r,o,i){Ah(n,r,t.firstChild,e,o,i,!1)}function fR(t,e,n,r,o,i){let s=n[ft],u=s[vt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Do(e,t,n[sn],o,h,r,i,n)}else{let l=u,h=s[Pe];CE(r)&&(l.flags|=128),Ah(t,e,l,h,o,i,!0)}}function hR(t,e,n,r,o,i,s){let c=r[Hn],u=_t(r);c!==u&&Do(e,t,n,i,c,o,s);for(let l=we;l<r.length;l++){let h=r[l];nu(h[K],h,t,e,i,c)}}function ZE(t,e,n,r,o){let i=cs(),s=r&2;try{$n(-1),s&&e.length>st&&GE(t,e,st,!1);let c=s?ae.TemplateUpdateStart:ae.TemplateCreateStart;pe(c,o,n),n(r,o)}finally{$n(i);let c=s?ae.TemplateUpdateEnd:ae.TemplateCreateEnd;pe(c,o,n)}}function XE(t,e,n){yR(t,e,n),(n.flags&64)===64&&vR(t,e,n)}function eI(t,e,n=ln){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],c=s===-1?n(e,t):t[s];t[o++]=c}}}function pR(t,e,n,r){let i=r.get(OE,PE)||n===Rt.ShadowDom||n===Rt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,i);return gR(s),s}function gR(t){mR(t)}var mR=()=>null;function yR(t,e,n){let r=n.directiveStart,o=n.directiveEnd;br(n)&&JA(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||vE(n,e);let i=n.initialInputs;for(let s=r;s<o;s++){let c=t.data[s],u=Yf(e,t,s,n);if(Ro(u,e),i!==null&&IR(e,s-r,u,c,n,i),Sr(c)){let l=jt(n.index,e);l[Oe]=Yf(e,t,s,n)}}}function vR(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=w_();try{$n(i);for(let c=r;c<o;c++){let u=t.data[c],l=e[c];Rc(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_R(u,l)}}finally{$n(-1),Rc(s)}}function _R(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ER(t,e){let n=t.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];$A(e,i.selectors,!1)&&(r??=[],Sr(i)?r.unshift(i):r.push(i))}return r}function IR(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];eh(r,n,u,l)}}function wR(t,e,n,r,o){let i=st+n,s=e[K],c=o(s,e,t,r,n);e[i]=c,Co(t,!0);let u=t.type===2;return u?(BE(e[ze],c,t),(l_()===0||Sc(t))&&Ro(c,e),d_()):Ro(c,e),xc()&&(!u||!_h(t))&&Dh(s,e,c,t),t}function TR(t){let e=t;return Nf()?v_():(e=e.parent,Co(e,!1)),e}function bR(t,e){let n=t[sn];if(!n)return;let r;try{r=n.get(fn,null)}catch{r=null}r?.(e)}function tI(t,e,n,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];eh(p,n[l],h,o),c=!0}if(i)for(let u of i){let l=n[u],h=e.data[u];eh(h,l,r,o),c=!0}return c}function SR(t,e){let n=jt(e,t),r=n[K];CR(r,n);let o=n[Ct];o!==null&&n[_o]===null&&(n[_o]=kE(o,n[sn])),pe(ae.ComponentStart);try{Rh(r,n,n[Oe])}finally{pe(ae.ComponentEnd,n[Oe])}}function CR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rh(t,e,n){Nc(e);try{let r=t.viewQuery;r!==null&&Xf(1,r,n);let o=t.template;o!==null&&ZE(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wr]?.finishViewCreation(t),t.staticContentQueries&&LE(t,e),t.staticViewQueries&&Xf(2,t.viewQuery,n);let i=t.components;i!==null&&DR(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,Mc()}}function DR(t,e){for(let n=0;n<e.length;n++)SR(t,e[n])}function nI(t,e,n,r){let o=$(null);try{let i=e.tView,c=t[Y]&4096?4096:16,u=wh(t,i,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Er]=l;let h=t[wr];return h!==null&&(u[wr]=h.createEmbeddedView(i)),Rh(i,u,n),u}finally{$(o)}}function Bc(t,e){return!e||e.firstChild===null||CE(t)}function hs(t,e,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=e[n.index];i!==null&&r.push(_t(i)),Dt(i)&&rI(i,r);let s=n.type;if(s&8)hs(t,e,n.child,r);else if(s&32){let c=bh(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=JE(e,n);if(Array.isArray(c))r.push(...c);else{let u=Un(e[ft]);hs(u[K],u,c,r,!0)}}n=o?n.projectionNext:n.next}return r}function rI(t,e){for(let n=we;n<t.length;n++){let r=t[n],o=r[K].firstChild;o!==null&&hs(r[K],r,o,e)}t[Hn]!==t[Ct]&&e.push(t[Hn])}function oI(t){if(t[bc]!==null){for(let e of t[bc])e.impl.addSequence(e);t[bc].length=0}}var iI=[];function AR(t){return t[ht]??RR(t)}function RR(t){let e=iI.pop()??Object.create(MR);return e.lView=t,e}function NR(t){t.lView[ht]!==t&&(t.lView=null,iI.push(t))}var MR=ie(x({},Ua),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{as(t.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function xR(t){let e=t[ht]??Object.create(PR);return e.lView=t,e}var PR=ie(x({},Ua),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Un(t.lView);for(;e&&!sI(e[K]);)e=Un(e);e&&Df(e)},consumerOnSignalRead(){this.lView[ht]=this}});function sI(t){return t.type!==2}function aI(t){if(t[rs]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[rs])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Y]&8192)}}var OR=100;function cI(t,e=0){let r=t[an].rendererFactory,o=!1;o||r.begin?.();try{kR(t,e)}finally{o||r.end?.()}}function kR(t,e){let n=Mf();try{xf(!0),nh(t,e);let r=0;for(;ss(t);){if(r===OR)throw new U(103,!1);r++,nh(t,1)}}finally{xf(n)}}function LR(t,e,n,r){if(Cr(e))return;let o=e[Y],i=!1,s=!1;Nc(e);let c=!0,u=null,l=null;i||(sI(t)?(l=AR(e),u=Ha(l)):ja()===null?(c=!1,l=xR(e),u=Ha(l)):e[ht]&&(Ui(e[ht]),e[ht]=null));try{Cf(e),__(t.bindingStartIndex),n!==null&&ZE(t,e,n,2,r);let h=(o&3)===3;if(!i)if(h){let y=t.preOrderCheckHooks;y!==null&&Oc(e,y,null)}else{let y=t.preOrderHooks;y!==null&&kc(e,y,0,null),$f(e,0)}if(s||FR(e),aI(e),uI(e,0),t.contentQueries!==null&&LE(t,e),!i)if(h){let y=t.contentCheckHooks;y!==null&&Oc(e,y)}else{let y=t.contentHooks;y!==null&&kc(e,y,1),$f(e,1)}jR(t,e);let p=t.components;p!==null&&dI(e,p,0);let m=t.viewQuery;if(m!==null&&Xf(2,m,r),!i)if(h){let y=t.viewCheckHooks;y!==null&&Oc(e,y)}else{let y=t.viewHooks;y!==null&&kc(e,y,2),$f(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tc]){for(let y of e[Tc])y();e[Tc]=null}i||(oI(e),e[Y]&=-73)}catch(h){throw i||as(e),h}finally{l!==null&&(Cd(l,u),c&&NR(l)),Mc()}}function uI(t,e){for(let n=AE(t);n!==null;n=RE(n))for(let r=we;r<n.length;r++){let o=n[r];lI(o,e)}}function FR(t){for(let e=AE(t);e!==null;e=RE(e)){if(!(e[Y]&2))continue;let n=e[is];for(let r=0;r<n.length;r++){let o=n[r];Df(o)}}}function VR(t,e,n){pe(ae.ComponentStart);let r=jt(e,t);try{lI(r,n)}finally{pe(ae.ComponentEnd,r[Oe])}}function lI(t,e){Dc(t)&&nh(t,e)}function nh(t,e){let r=t[K],o=t[Y],i=t[ht],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&$a(i)),s||=!1,i&&(i.dirty=!1),t[Y]&=-9217,s)LR(r,t,r.template,t[Oe]);else if(o&8192){let c=$(null);try{aI(t),uI(t,1);let u=r.components;u!==null&&dI(t,u,1),oI(t)}finally{$(c)}}}function dI(t,e,n){for(let r=0;r<e.length;r++)VR(t,e[r],n)}function jR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)$n(~o);else{let i=o,s=n[++r],c=n[++r];I_(s,i);let u=e[i];pe(ae.HostBindingsUpdateStart,u);try{c(2,u)}finally{pe(ae.HostBindingsUpdateEnd,u)}}}}finally{$n(-1)}}function Nh(t,e){let n=Mf()?64:1088;for(t[an].changeDetectionScheduler?.notify(e);t;){t[Y]|=n;let r=Un(t);if(To(t)&&!r)return t;t=r}return null}function fI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function UR(t,e){let n=we+e;if(n<t.length)return t[n]}function Mh(t,e,n,r=!0){let o=e[K];if(HR(o,e,t,n),r){let s=th(n,t),c=e[ze],u=c.parentNode(t[Hn]);u!==null&&nR(o,t[vt],c,e,u,s)}let i=e[_o];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function BR(t,e){let n=ps(t,e);return n!==void 0&&tu(n[K],n),n}function ps(t,e){if(t.length<=we)return;let n=we+e,r=t[n];if(r){let o=r[Er];o!==null&&o!==t&&Ch(o,r),e>0&&(t[n-1][yt]=r[yt]);let i=es(t,we+e);tR(r[K],r);let s=i[wr];s!==null&&s.detachView(i[K]),r[Pe]=null,r[yt]=null,r[Y]&=-129}return r}function HR(t,e,n,r){let o=we+r,i=n.length;r>0&&(n[o-1][yt]=e),r<i-we?(e[yt]=n[o],yf(n,we+r,e)):(n.push(e),e[yt]=null),e[Pe]=n;let s=e[Er];s!==null&&n!==s&&hI(s,e);let c=e[wr];c!==null&&c.insertView(t),Ac(e),e[Y]|=128}function hI(t,e){let n=t[is],r=e[Pe];if(un(r))t[Y]|=2;else{let o=r[Pe][ft];e[ft]!==o&&(t[Y]|=2)}n===null?t[is]=[e]:n.push(e)}var Nr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[K];return hs(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Oe]}set context(e){this._lView[Oe]=e}get destroyed(){return Cr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pe];if(Dt(e)){let n=e[os],r=n?n.indexOf(this):-1;r>-1&&(ps(e,r),es(n,r))}this._attachedToViewContainer=!1}tu(this._lView[K],this._lView)}onDestroy(e){Af(this._lView,e)}markForCheck(){Nh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){Ac(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,cI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=To(this._lView),n=this._lView[Er];n!==null&&!e&&Ch(n,this._lView),YE(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=To(this._lView),r=this._lView[Er];r!==null&&!n&&hI(r,this._lView),Ac(this._lView)}};function xh(t,e,n,r,o){let i=t.data[e];if(i===null)i=$R(t,e,n,r,o),E_()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=y_();i.injectorIndex=s===null?-1:s.injectorIndex}return Co(i,!0),i}function $R(t,e,n,r,o){let i=Rf(),s=Nf(),c=s?i:i&&i.parent,u=t.data[e]=qR(t,c,n,e,r,o);return zR(t,u,i,s),u}function zR(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function qR(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,c=0;return p_()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function GR(t){let e=t[bf]??[],r=t[Pe][ze],o=[];for(let i of e)i.data[xE]!==void 0?o.push(i):WR(i,r);t[bf]=o}function WR(t,e){let n=0,r=t.firstChild;if(r){let o=t.data[ME];for(;n<o;){let i=r.nextSibling;UE(e,r,!1),r=i,n++}}}var KR=()=>null,QR=()=>null;function rh(t,e){return KR(t,e)}function YR(t,e,n){return QR(t,e,n)}var pI=class{},ru=class{},oh=class{resolveComponentFactory(e){throw new U(917,!1)}},_s=class{static NULL=new oh},Mr=class{};var gI=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var Lc={},ih=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let o=this.injector.get(e,Lc,r);return o!==Lc||n===Lc?o:this.parentInjector.get(e,n,r)}};function W_(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")i=c;else if(i==1)o=of(o,c);else if(i==2){let u=c,l=e[++s];r=of(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function ou(t,e=0){let n=ke();if(n===null)return Z(t,e);let r=dn();return wE(r,n,it(t),e)}function JR(t,e,n,r,o){let i=r===null?null:{"":-1},s=o(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}eN(t,e,n,c,i,u,l)}i!==null&&r!==null&&ZR(n,r,i)}function ZR(t,e,n){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new U(-301,!1);r.push(e[o],i)}}function XR(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function eN(t,e,n,r,o,i,s){let c=r.length,u=null;for(let m=0;m<c;m++){let y=r[m];u===null&&Sr(y)&&(u=y,XR(t,n,m)),_A(vE(n,e),t,y.type)}sN(n,t.data.length,c),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=qE(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=ph(n.mergedAttrs,y.hostAttrs),nN(t,n,e,p,y),iN(p,y,o),s!==null&&s.has(y)){let[R,M]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,M+n.directiveStart])}else(i===null||!i.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}tN(t,n,i)}function tN(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=t.data[r];if(n===null||!n.has(o))K_(0,e,o,r),K_(1,e,o,r),Y_(e,r,!1);else{let i=n.get(o);Q_(0,e,i,r),Q_(1,e,i,r),Y_(e,r,!0)}}}function K_(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),mI(e,i)}}function Q_(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,i),mI(e,s)}}function mI(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Y_(t,e,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!n&&o===null||n&&i===null||Eh(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&o.hasOwnProperty(u)){let l=o[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&i.hasOwnProperty(u)){let l=i[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function nN(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=gr(o.type,!0)),s=new fs(i,Sr(o),ou,null);t.blueprint[r]=s,n[r]=s,rN(t,e,r,qE(t,n,o.hostVars,xo),o)}function rN(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;oN(s)!=c&&s.push(c),s.push(n,r,i)}}function oN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sr(e)&&(n[""]=t)}}function sN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function yI(t,e,n,r,o,i,s,c){let u=e[K],l=u.consts,h=bo(l,s),p=xh(u,t,n,r,h);return i&&JR(u,e,p,bo(l,c),o),p.mergedAttrs=ph(p.mergedAttrs,p.attrs),p.attrs!==null&&W_(p,p.attrs,!1),p.mergedAttrs!==null&&W_(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function vI(t,e){cA(t,e),Sf(e)&&t.queries.elementEnd(e)}function _I(t,e,n){if(n===xo)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Gf(t,e,n){return function r(o){let i=br(t)?jt(t.index,e):e;Nh(i,5);let s=e[Oe],c=J_(e,s,n,o),u=r.__ngNextListenerFn__;for(;u;)c=J_(e,s,u,o)&&c,u=u.__ngNextListenerFn__;return c}}function J_(t,e,n,r){let o=$(null);try{return pe(ae.OutputStart,e,n),n(r)!==!1}catch(i){return bR(t,i),!1}finally{pe(ae.OutputEnd,e,n),$(o)}}function aN(t,e,n,r,o,i,s,c){let u=Sc(t),l=!1,h=null;if(!r&&u&&(h=uN(e,n,i,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=ln(t,n),m=r?r(p):p;xA(n,m,i,c);let y=o.listen(m,i,c);if(!cN(i)){let D=r?R=>r(_t(R[t.index])):t.index;EI(D,e,n,i,c,y,!1)}}return l}function cN(t){return t.startsWith("animation")||t.startsWith("transition")}function uN(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let c=e[Eo],u=o[i+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(i+=2)}return null}function EI(t,e,n,r,o,i,s){let c=e.firstCreatePass?u_(e):null,u=c_(n),l=u.length;u.push(o,i),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function Z_(t,e,n,r,o,i){let s=e[n],c=e[K],l=c.data[n].outputs[r],p=s[l].subscribe(i);EI(t.index,c,e,o,i,p,!0)}var sh=Symbol("BINDING");var Hc=class extends _s{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Bn(e);return new No(n,this.ngModule)}};function lN(t){return Object.keys(t).map(e=>{let[n,r,o]=t[e],i={propName:n,templateName:e,isSignal:(r&Xc.SignalBased)!==0};return o&&(i.transform=o),i})}function dN(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function fN(t,e,n){let r=e instanceof Re?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ih(n,r):n}function hN(t){let e=t.get(Mr,null);if(e===null)throw new U(407,!1);let n=t.get(gI,null),r=t.get(yo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function pN(t,e){let n=II(t);return VE(e,n,n==="svg"?r_:n==="math"?o_:null)}function II(t){return(t.selectors[0][0]||"div").toLowerCase()}var No=class extends ru{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=lN(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=dN(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=WA(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o,i,s){pe(ae.DynamicComponentStart);let c=$(null);try{let u=this.componentDef,l=gN(r,u,s,i),h=fN(u,o||this.ngModule,e),p=hN(h),m=p.rendererFactory.createRenderer(null,u),y=r?pR(m,r,u.encapsulation,h):pN(u,m),D=s?.some(X_)||i?.some(L=>typeof L!="function"&&L.bindings.some(X_)),R=wh(null,l,null,512|zE(u),null,null,p,m,h,null,kE(y,h,!0));R[st]=y,Nc(R);let M=null;try{let L=yI(st,R,2,"#host",()=>l.directiveRegistry,!0,0);BE(m,y,L),Ro(y,R),XE(l,R,L),FE(l,L,R),vI(l,L),n!==void 0&&yN(L,this.ngContentSelectors,n),M=jt(L.index,R),R[Oe]=M[Oe],Rh(l,R,null)}catch(L){throw M!==null&&Zf(M),Zf(R),L}finally{pe(ae.DynamicComponentEnd),Mc()}return new $c(this.componentType,R,!!D)}finally{$(c)}}};function gN(t,e,n,r){let o=t?["ng-version","21.1.2"]:KA(e.selectors[0]),i=null,s=null,c=0;if(n)for(let h of n)c+=h[sh].requiredVars,h.create&&(h.targetIdx=0,(i??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[sh].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(i??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=pf(p);u.push(m)}return Ih(0,null,mN(i,s),1,c,u,null,null,null,[o],null)}function mN(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function X_(t){let e=t[sh].kind;return e==="input"||e==="twoWay"}var $c=class extends pI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Cc(n[K],st),this.location=mh(this._tNode,n),this.instance=jt(this._tNode.index,n)[Oe],this.hostView=this.changeDetectorRef=new Nr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView,i=tI(r,o[K],o,e,n);this.previousInputValues.set(e,n);let s=jt(r.index,o);Nh(s,1)}get injector(){return new Ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yN(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var iu=(()=>{class t{static __NG_ELEMENT_ID__=vN}return t})();function vN(){let t=dn();return EN(t,ke())}var _N=iu,wI=class extends _N{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return mh(this._hostTNode,this._hostLView)}get injector(){return new Ar(this._hostTNode,this._hostLView)}get parentInjector(){let e=gh(this._hostTNode,this._hostLView);if(gE(e)){let n=jc(e,this._hostLView),r=Vc(e),o=n[K].data[r+8];return new Ar(o,n)}else return new Ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=eE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-we}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=rh(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(c,o,Bc(this._hostTNode,s)),c}createComponent(e,n,r,o,i,s,c){let u=e&&!rA(e),l;if(u)l=n;else{let M=n||{};l=M.index,r=M.injector,o=M.projectableNodes,i=M.environmentInjector||M.ngModuleRef,s=M.directives,c=M.bindings}let h=u?e:new No(Bn(e)),p=r||this.parentInjector;if(!i&&h.ngModule==null){let L=(u?p:this.parentInjector).get(Re,null);L&&(i=L)}let m=Bn(h.componentType??{}),y=rh(this._lContainer,m?.id??null),D=y?.firstChild??null,R=h.create(p,o,D,i,s,c);return this.insertImpl(R.hostView,l,Bc(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(s_(o)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=o[Pe],l=new wI(u,u[vt],u[Pe]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return Mh(s,o,i,r),e.attachToViewContainerRef(),yf(Wf(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=eE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ps(this._lContainer,n);r&&(es(Wf(this._lContainer),n),tu(r[K],r))}detach(e){let n=this._adjustIndex(e,-1),r=ps(this._lContainer,n);return r&&es(Wf(this._lContainer),n)!=null?new Nr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function eE(t){return t[os]}function Wf(t){return t[os]||(t[os]=[])}function EN(t,e){let n,r=e[t.index];return Dt(r)?n=r:(n=fI(r,e,null,t),e[t.index]=n,Th(e,n)),wN(n,e,t,r),new wI(n,t,e)}function IN(t,e){let n=t[ze],r=n.createComment(""),o=ln(e,t),i=n.parentNode(o);return Uc(n,i,r,n.nextSibling(o),!1),r}var wN=SN,TN=()=>!1;function bN(t,e,n){return TN(t,e,n)}function SN(t,e,n,r){if(t[Hn])return;let o;n.type&8?o=_t(r):o=IN(e,n),t[Hn]=o}var Mo=class{},su=class{};var zc=class extends Mo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hc(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;let i=hf(e);this._bootstrapComponents=HE(i.bootstrap),this._r3Injector=Ff(e,n,[{provide:Mo,useValue:this},{provide:_s,useValue:this.componentFactoryResolver},...r],jn(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qc=class extends su{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new zc(this.moduleType,e,[])}};var gs=class extends Mo{injector;componentFactoryResolver=new Hc(this);instance=null;constructor(e){super();let n=new yr([...e.providers,{provide:Mo,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],e.parent||ns(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Es(t,e,n=null){return new gs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var CN=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Ef(!1,n.type),o=r.length>0?Es([r],this._injector,""):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(Z(Re))})}return t})();function Is(t){return Kc(()=>{let e=TI(t),n=ie(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===yh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(CN).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Rt.Emulated,styles:t.styles||mr,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&eu("NgStandalone"),bI(n);let r=t.dependencies;return n.directiveDefs=tE(r,DN),n.pipeDefs=tE(r,Gv),n.id=NN(n),n})}function DN(t){return Bn(t)||pf(t)}function AN(t,e){if(t==null)return _r;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,c,u;Array.isArray(o)?(c=o[0],i=o[1],s=o[2]??i,u=o[3]||null):(i=o,s=o,c=Xc.None,u=null),n[i]=[r,c,u],e[i]=s}return n}function RN(t){if(t==null)return _r;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ph(t){return Kc(()=>{let e=TI(t);return bI(e),e})}function TI(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||_r,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||mr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:AN(t.inputs,e),outputs:RN(t.outputs),debugInfo:null}}function bI(t){t.features?.forEach(e=>e(t))}function tE(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let o of n){let i=e(o);i!==null&&r.push(i)}return r}:null}function NN(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function MN(t,e,n,r,o,i,s,c){if(n.firstCreatePass){t.mergedAttrs=ph(t.mergedAttrs,t.attrs);let h=t.tView=Ih(2,t,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),Co(t,!1);let u=xN(n,e,t,r);xc()&&Dh(n,e,u,t),Ro(u,e);let l=fI(u,e,u,t);e[r+st]=l,Th(e,l),bN(l,t,e)}function nE(t,e,n,r,o,i,s,c,u,l,h){let p=n+st,m;if(e.firstCreatePass){if(m=xh(e,p,4,s||null,c||null),l!=null){let y=bo(e.consts,l);m.localNames=[];for(let D=0;D<y.length;D+=2)m.localNames.push(y[D],-1)}}else m=e.data[p];return MN(m,t,e,n,r,o,i,u),l!=null&&eI(t,m,h),m}var xN=PN;function PN(t,e,n,r){return Pc(!0),e[ze].createComment("")}var Oh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var kh=new B("");function ws(t){return!!t&&typeof t.then=="function"}function SI(t){return!!t&&typeof t.subscribe=="function"}var CI=new B("");var Lh=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(CI,{optional:!0})??[];injector=O(Vt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=Qe(this.injector,o);if(ws(i))n.push(i);else if(SI(i)){let s=new Promise((c,u)=>{i.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),au=new B("");function DI(){Ad(()=>{let t="";throw new U(600,t)})}function AI(t){return t.isBoundToModule}var ON=10;var Po=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(fn);afterRenderManager=O(WE);zonelessEnabled=O(us);rootEffectScheduler=O(Hf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ke;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(zn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ee(n=>!n))}constructor(){O(vs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(Re);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Vt.NULL){return this._injector.get(dt).run(()=>{pe(ae.BootstrapComponentStart);let s=n instanceof ru;if(!this._injector.get(Lh).done){let D="";throw new U(405,D)}let u;s?u=n:u=this._injector.get(_s).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=AI(u)?void 0:this._injector.get(Mo),h=r||u.selector,p=u.create(o,[],h,l),m=p.location.nativeElement,y=p.injector.get(kh,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),ds(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),pe(ae.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ae.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Sh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ae.ChangeDetectionEnd),new U(101,!1);let n=$(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,$(n),this.afterTick.next(),pe(ae.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ON;){pe(ae.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ae.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!ss(o))continue;let i=r&&!this.zonelessEnabled?0:1;cI(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ss(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ds(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(au,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ds(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ds(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var tB=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ah=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),o=Math.max(e,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(e,n){this.attach(n,this.detach(e))}};function Kf(t,e,n,r,o){return t===n&&Object.is(e,r)?1:Object.is(o(t,e),o(n,r))?-1:0}function kN(t,e,n,r){let o,i,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){$(r);let l=e.length-1;for($(null);s<=c&&s<=l;){let h=t.at(s),p=e[s],m=Kf(s,h,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),D=e[l],R=Kf(c,y,l,D,n);if(R!==0){R<0&&t.updateValue(c,D),c--,l--;continue}let M=n(s,h),L=n(c,y),Q=n(s,p);if(Object.is(Q,L)){let oe=n(l,D);Object.is(oe,M)?(t.swap(s,c),t.updateValue(c,D),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(o??=new Gc,i??=oE(t,s,c,n),ch(t,o,s,Q))t.updateValue(s,p),s++,c++;else if(i.has(Q))o.set(M,t.detach(s)),c--;else{let oe=t.create(s,e[s]);t.attach(s,oe),s++,c++}}for(;s<=l;)rE(t,o,n,s,e[s]),s++}else if(e!=null){$(r);let l=e[Symbol.iterator]();$(null);let h=l.next();for(;!h.done&&s<=c;){let p=t.at(s),m=h.value,y=Kf(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,h=l.next();else{o??=new Gc,i??=oE(t,s,c,n);let D=n(s,m);if(ch(t,o,s,D))t.updateValue(s,m),s++,c++,h=l.next();else if(!i.has(D))t.attach(s,t.create(s,m)),s++,c++,h=l.next();else{let R=n(s,p);o.set(R,t.detach(s)),c--}}}for(;!h.done;)rE(t,o,n,t.length,h.value),h=l.next()}for(;s<=c;)t.destroy(t.detach(c--));o?.forEach(l=>{t.destroy(l)})}function ch(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function rE(t,e,n,r,o){if(ch(t,e,r,n(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function oE(t,e,n,r){let o=new Set;for(let i=e;i<=n;i++)o.add(r(i,t.at(i)));return o}var Gc=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),e(r,n)}}};var uh=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-we}};var lh=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Fh(t,e,n,r,o,i,s,c,u,l,h,p,m){eu("NgControlFlow");let y=ke(),D=So(),R=u!==void 0,M=ke(),L=c?s.bind(M[ft][Oe]):s,Q=new lh(R,L);M[st+t]=Q,nE(y,D,t+1,e,n,r,o,bo(D.consts,i),256),R&&nE(y,D,t+2,u,l,h,p,bo(D.consts,m),512)}var dh=class extends ah{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-we}at(e){return this.getLView(e)[Oe].$implicit}attach(e,n){let r=n[_o];this.needsIndexUpdate||=e!==this.length,Mh(this.lContainer,n,e,Bc(this.templateTNode,r)),LN(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,FN(this.lContainer,e),VN(this.lContainer,e)}create(e,n){let r=rh(this.lContainer,this.templateTNode.tView.ssrId);return nI(this.hostLView,this.templateTNode,new uh(this.lContainer,n,e),{dehydratedView:r})}destroy(e){tu(e[K],e)}updateValue(e,n){this.getLView(e)[Oe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Oe].$index=e}getLView(e){return jN(this.lContainer,e)}};function Vh(t){let e=$(null),n=cs();try{let r=ke(),o=r[K],i=r[n],s=n+1,c=iE(r,s);if(i.liveCollection===void 0){let l=sE(o,s);i.liveCollection=new dh(c,r,l)}else i.liveCollection.reset();let u=i.liveCollection;if(kN(u,t,i.trackByFn,e),u.updateIndexes(),i.hasEmptyBlock){let l=Pf(),h=u.length===0;if(_I(r,l,h)){let p=n+2,m=iE(r,p);if(h){let y=sE(o,p),D=YR(m,y,r),R=nI(r,y,void 0,{dehydratedView:D});Mh(m,R,0,Bc(y,D))}else o.firstUpdatePass&&GR(m),BR(m,0)}}}finally{$(e)}}function iE(t,e){return t[e]}function LN(t,e){if(t.length<=we)return;let n=we+e,r=t[n],o=r?r[Tr]:void 0;if(r&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let i=r[sn];XA(i,o),Rr.delete(r[cn]),o.detachedLeaveAnimationFns=void 0}}function FN(t,e){if(t.length<=we)return;let n=we+e,r=t[n],o=r?r[Tr]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function VN(t,e){return ps(t,e)}function jN(t,e){return UR(t,e)}function sE(t,e){return Cc(t,e)}function aE(t,e,n,r,o){tI(e,t,n,o?"class":"style",r)}function Bt(t,e,n,r){let o=ke(),i=o[K],s=t+st,c=i.firstCreatePass?yI(s,o,2,e,ER,h_(),n,r):i.data[s];if(wR(c,o,t,e,UN),Sc(c)){let u=o[K];XE(u,o,c),FE(u,c,o)}return r!=null&&eI(o,c),Bt}function Ht(){let t=So(),e=dn(),n=TR(e);return t.firstCreatePass&&vI(t,n),g_(n)&&m_(),f_(),n.classesWithoutHost!=null&&lA(n)&&aE(t,n,ke(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&dA(n)&&aE(t,n,ke(),n.stylesWithoutHost,!1),Ht}function Oo(t,e,n,r){return Bt(t,e,n,r),Ht(),Oo}var UN=(t,e,n,r,o)=>(Pc(!0),VE(e[ze],r,C_()));var Ts="en-US";var BN=Ts;function RI(t){typeof t=="string"&&(BN=t.toLowerCase().replace(/_/g,"-"))}function cu(t,e,n){let r=ke(),o=So(),i=dn();return HN(o,r,r[ze],i,t,e,n),cu}function HN(t,e,n,r,o,i,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Gf(r,e,i),aN(r,t,e,s,n,o,i,u)&&(c=!1)),c){let l=r.outputs?.[o],h=r.hostDirectiveOutputs?.[o];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Gf(r,e,i),Z_(r,e,m,y,o,u)}if(l&&l.length)for(let p of l)u??=Gf(r,e,i),Z_(r,e,p,o,o,u)}}function Pr(t,e=""){let n=ke(),r=So(),o=t+st,i=r.firstCreatePass?xh(r,o,1,e,null):r.data[o],s=$N(r,n,i,e);n[o]=s,xc()&&Dh(r,n,s,i),Co(i,!1)}var $N=(t,e,n,r)=>(Pc(!0),OA(e[ze],r));function zN(t,e,n,r=""){return _I(t,Pf(),n)?e+Wv(n)+r:xo}function uu(t){return bs("",t),uu}function bs(t,e,n){let r=ke(),o=zN(r,t,e,n);return o!==xo&&qN(r,cs(),o),bs}function qN(t,e,n){let r=i_(e,t);kA(t[ze],r,n)}var Wc=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jh=(()=>{class t{compileModuleSync(n){return new qc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=hf(n),i=HE(o.declarations).reduce((s,c)=>{let u=Bn(c);return u&&s.push(new No(u)),s},[]);return new Wc(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var NI=(()=>{class t{applicationErrorHandler=O(fn);appRef=O(Po);taskService=O(zn);ngZone=O(dt);zonelessEnabled=O(us);tracing=O(vs,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Be;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yi):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(Bf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?N_:Vf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yi+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MI(){return[{provide:yo,useExisting:NI},{provide:dt,useClass:Ji},{provide:us,useValue:!0}]}function GN(){return typeof $localize<"u"&&$localize.locale||Ts}var Uh=new B("",{factory:()=>O(Uh,{optional:!0,skipSelf:!0})||GN()});var kI=Symbol("InputSignalNode#UNSET"),rM=ie(x({},za),{transformFn:void 0,applyValueToInputSignal(t,e){Bi(t,e)}});function LI(t,e){let n=Object.create(rM);n.value=t,n.transformFn=e?.transform;function r(){if(Ba(n),n.value===kI){let o=null;throw new U(-950,o)}return n.value}return r[mt]=n,r}function xI(t,e){return LI(t,e)}function oM(t){return LI(kI,t)}var FI=(xI.required=oM,xI);var Bh=new B(""),iM=new B("");function Ss(t){return!t.moduleRef}function sM(t){let e=Ss(t)?t.r3Injector:t.moduleRef.injector,n=e.get(dt);return n.run(()=>{Ss(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(fn),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Ss(t)){let i=()=>e.destroy(),s=t.platformInjector.get(Bh);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Bh);s.add(i),t.moduleRef.onDestroy(()=>{ds(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return cM(r,n,()=>{let i=e.get(zn),s=i.add(),c=e.get(Lh);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Uh,Ts);if(RI(u||Ts),!e.get(iM,!0))return Ss(t)?e.get(Po):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ss(t)){let h=e.get(Po);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return aM?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{i.remove(s)})})})}var aM;function cM(t,e,n){try{let r=n();return ws(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var lu=null;function uM(t=[],e){return Vt.create({name:e,providers:[{provide:ts,useValue:"platform"},{provide:Bh,useValue:new Set([()=>lu=null])},...t]})}function lM(t=[]){if(lu)return lu;let e=uM(t);return lu=e,DI(),dM(e),e}function dM(t){let e=t.get(Jc,null);Qe(t,()=>{e?.forEach(n=>n())})}var fM=1e4;var a9=fM-1e3;var VI=(()=>{class t{static __NG_ELEMENT_ID__=hM}return t})();function hM(t){return pM(dn(),ke(),(t&16)===16)}function pM(t,e,n){if(br(t)&&!n){let r=jt(t.index,e);return new Nr(r,r)}else if(t.type&175){let r=e[ft];return new Nr(r,e)}return null}function jI(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:o}=t;pe(ae.BootstrapApplicationStart);try{let i=o?.injector??lM(r),s=[MI(),x_,...n||[]],c=new gs({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return sM({r3Injector:c.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{pe(ae.BootstrapApplicationEnd)}}var UI=null;function pn(){return UI}function Hh(t){UI??=t}var Cs=class{},du=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(BI),providedIn:"platform"})}return t})();var BI=(()=>{class t extends du{_location;_history;_doc=O(Le);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pn().getBaseHref(this._doc)}onPopState(n){let r=pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=pn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function zI(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function HI(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Wn(t){return t&&t[0]!=="?"?`?${t}`:t}var fu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(mM),providedIn:"root"})}return t})(),gM=new B(""),mM=(()=>{class t extends fu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zI(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Wn(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+Wn(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+Wn(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Z(du),Z(gM,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ko=(()=>{class t{_subject=new Ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=_M(HI($I(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wn(r))}normalize(n){return t.stripTrailingSlash(vM(this._basePath,$I(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wn(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wn(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=Wn;static joinWithSlash=zI;static stripTrailingSlash=HI;static \u0275fac=function(r){return new(r||t)(Z(fu))};static \u0275prov=H({token:t,factory:()=>yM(),providedIn:"root"})}return t})();function yM(){return new ko(Z(fu))}function vM(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $I(t){return t.replace(/\/index.html$/,"")}function _M(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function $h(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Ds=class{};var qI="browser";var As=class{_doc;constructor(e){this._doc=e}manager},hu=(()=>{class t extends As{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(Z(Le))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),mu=new B(""),Wh=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let o=n.filter(s=>!(s instanceof hu));this._plugins=o.slice().reverse();let i=n.find(s=>s instanceof hu);i&&this._plugins.push(i)}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Z(mu),Z(dt))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),zh="ng-app-id";function GI(t){for(let e of t)e.remove()}function WI(t,e){let n=e.createElement("style");return n.textContent=t,n}function EM(t,e,n,r){let o=t.head?.querySelectorAll(`style[${zh}="${e}"],link[${zh}="${e}"]`);if(o)for(let i of o)i.removeAttribute(zh),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Gh(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Kh=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,EM(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,WI);r?.forEach(o=>this.addUsage(o,this.external,Gh))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(GI(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])GI(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,WI(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,Gh(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Z(Le),Z(Yc),Z(Zc,8),Z(ms))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),qh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Qh=/%COMP%/g;var QI="%COMP%",IM=`_nghost-${QI}`,wM=`_ngcontent-${QI}`,TM=!0,bM=new B("",{factory:()=>TM});function SM(t){return wM.replace(Qh,t)}function CM(t){return IM.replace(Qh,t)}function YI(t,e){return e.map(n=>n.replace(Qh,t))}var Yh=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,o,i,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Rs(n,s,c,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof gu?o.applyToHost(n):o instanceof Ns&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case Rt.Emulated:i=new gu(u,l,r,this.appId,h,s,c,p);break;case Rt.ShadowDom:return new pu(u,n,r,s,c,this.nonce,p,l);case Rt.ExperimentalIsolatedShadowDom:return new pu(u,n,r,s,c,this.nonce,p);default:i=new Ns(u,l,r,h,s,c,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Z(Wh),Z(Kh),Z(Yc),Z(bM),Z(Le),Z(dt),Z(Zc),Z(vs,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Rs=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(qh[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(KI(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(KI(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=qh[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=qh[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(xr.DashCase|xr.Important)?e.style.setProperty(n,r,o&xr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,o){if(typeof e=="string"&&(e=pn().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,o)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function KI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var pu=class extends Rs{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,o,i,s,c,u){super(e,o,i,c),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=YI(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=Gh(p,o);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ns=class extends Rs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,o,i,s,c,u){super(e,i,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let l=r.styles;this.styles=u?YI(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Rr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gu=class extends Ns{contentAttr;hostAttr;constructor(e,n,r,o,i,s,c,u){let l=o+"-"+r.id;super(e,n,r,i,s,c,u,l),this.contentAttr=SM(l),this.hostAttr=CM(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var yu=class t extends Cs{supportsDOMEvents=!0;static makeCurrent(){Hh(new t)}onAndCancel(e,n,r,o){return e.addEventListener(n,r,o),()=>{e.removeEventListener(n,r,o)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=DM();return n==null?null:AM(n)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $h(document.cookie,e)}},Ms=null;function DM(){return Ms=Ms||document.head.querySelector("base"),Ms?Ms.getAttribute("href"):null}function AM(t){return new URL(t,document.baseURI).pathname}var RM=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),JI=["alt","control","meta","shift"],NM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MM={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},ZI=(()=>{class t extends As{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pn().onAndCancel(n,s.domEventName,c,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),JI.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let u={};return u.domEventName=o,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let o=NM[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),JI.forEach(s=>{if(s!==o){let c=MM[s];c(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Z(Le))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();async function Jh(t,e,n){let r=x({rootComponent:t},xM(e,n));return jI(r)}function xM(t,e){return{platformRef:e?.platformRef,appProviders:[...FM,...t?.providers??[]],platformProviders:LM}}function PM(){yu.makeCurrent()}function OM(){return new on}function kM(){return vh(document),document}var LM=[{provide:ms,useValue:qI},{provide:Jc,useValue:PM,multi:!0},{provide:Le,useFactory:kM}];var FM=[{provide:ts,useValue:"root"},{provide:on,useFactory:OM},{provide:mu,useClass:hu,multi:!0},{provide:mu,useClass:ZI,multi:!0},Yh,Kh,Wh,{provide:Mr,useExisting:Yh},{provide:Ds,useClass:RM},[]];var XI=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Z(Le))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var z="primary",$s=Symbol("RouteTitle"),np=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Lr(t){return new np(t)}function Zh(t,e,n){for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(o[0]===":")n[o.substring(1)]=i;else if(o!==i.path)return!1}return!0}function uw(t,e,n){let r=n.path.split("/"),o=r.indexOf("**");if(o===-1){if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let u={},l=t.slice(0,r.length);return Zh(r,l,u)?{consumed:l,posParams:u}:null}if(o!==r.lastIndexOf("**"))return null;let i=r.slice(0,o),s=r.slice(o+1);if(i.length+s.length>t.length||n.pathMatch==="full"&&e.hasChildren()&&n.path!=="**")return null;let c={};return!Zh(i,t.slice(0,i.length),c)||!Zh(s,t.slice(t.length-s.length),c)?null:{consumed:t,posParams:c}}function Tu(t){return new Promise((e,n)=>{t.pipe(tn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function jM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$t(t[n],e[n]))return!1;return!0}function $t(t,e){let n=t?rp(t):void 0,r=e?rp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!lw(t[o],e[o]))return!1;return!0}function rp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function lw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function UM(t){return t.length>0?t[t.length-1]:null}function jr(t){return cc(t)?t:ws(t)?xe(Promise.resolve(t)):te(t)}function dw(t){return cc(t)?Tu(t):Promise.resolve(t)}var BM={exact:hw,subset:pw},fw={exact:HM,subset:$M,ignored:()=>!0};function ew(t,e,n){return BM[n.paths](t.root,e.root,n.matrixParams)&&fw[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function HM(t,e){return $t(t,e)}function hw(t,e,n){if(!Or(t.segments,e.segments)||!Eu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!hw(t.children[r],e.children[r],n))return!1;return!0}function $M(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lw(t[n],e[n]))}function pw(t,e,n){return gw(t,e,e.segments,n)}function gw(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Or(o,n)||e.hasChildren()||!Eu(o,n,r))}else if(t.segments.length===n.length){if(!Or(t.segments,n)||!Eu(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!pw(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Or(t.segments,o)||!Eu(t.segments,o,r)||!t.children[z]?!1:gw(t.children[z],e,i,r)}}function Eu(t,e,n){return e.every((r,o)=>fw[n](t[o].parameters,r.parameters))}var Mt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){return GM.serialize(this)}},ce=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iu(this)}},Kn=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Lr(this.parameters),this._parameterMap}toString(){return yw(this)}};function zM(t,e){return Or(t,e)&&t.every((n,r)=>$t(n.parameters,e[r].parameters))}function Or(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function qM(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===z&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==z&&(n=n.concat(e(o,r)))}),n}var zs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new Qn,providedIn:"root"})}return t})(),Qn=class{parse(e){let n=new ip(e);return new Mt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${xs(e.root,!0)}`,r=QM(e.queryParams),o=typeof e.fragment=="string"?`#${WM(e.fragment)}`:"";return`${n}${r}${o}`}},GM=new Qn;function Iu(t){return t.segments.map(e=>yw(e)).join("/")}function xs(t,e){if(!t.hasChildren())return Iu(t);if(e){let n=t.children[z]?xs(t.children[z],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==z&&r.push(`${o}:${xs(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qM(t,(r,o)=>o===z?[xs(t.children[z],!1)]:[`${o}:${xs(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[z]!=null?`${Iu(t)}/${n[0]}`:`${Iu(t)}/(${n.join("//")})`}}function mw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vu(t){return mw(t).replace(/%3B/gi,";")}function WM(t){return encodeURI(t)}function op(t){return mw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wu(t){return decodeURIComponent(t)}function tw(t){return wu(t.replace(/\+/g,"%20"))}function yw(t){return`${op(t.path)}${KM(t.parameters)}`}function KM(t){return Object.entries(t).map(([e,n])=>`;${op(e)}=${op(n)}`).join("")}function QM(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${vu(n)}=${vu(o)}`).join("&"):`${vu(n)}=${vu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var YM=/^[^\/()?;#]+/;function Xh(t){let e=t.match(YM);return e?e[0]:""}var JM=/^[^\/()?;=#]+/;function ZM(t){let e=t.match(JM);return e?e[0]:""}var XM=/^[^=?&#]+/;function ex(t){let e=t.match(XM);return e?e[0]:""}var tx=/^[^&#]+/;function nx(t){let e=t.match(tx);return e?e[0]:""}var ip=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[z]=new ce(e,n)),r}parseSegment(){let e=Xh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Kn(wu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ZM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Xh(this.remaining);o&&(r=o,this.capture(r))}e[wu(n)]=wu(r)}parseQueryParam(e){let n=ex(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=nx(this.remaining);s&&(r=s,this.capture(r))}let o=tw(n),i=tw(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xh(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new U(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=z);let s=this.parseChildren();n[i??z]=Object.keys(s).length===1&&s[z]?s[z]:new ce([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function vw(t){return t.segments.length>0?new ce([],{[z]:t}):t}function _w(t){let e={};for(let[r,o]of Object.entries(t.children)){let i=_w(o);if(r===z&&i.segments.length===0&&i.hasChildren())for(let[s,c]of Object.entries(i.children))e[s]=c;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new ce(t.segments,e);return rx(n)}function rx(t){if(t.numberOfChildren===1&&t.children[z]){let e=t.children[z];return new ce(t.segments.concat(e.segments),e.children)}return t}function jo(t){return t instanceof Mt}function Ew(t,e,n=null,r=null,o=new Qn){let i=Iw(t);return ww(i,e,n,r,o)}function Iw(t){let e;function n(i){let s={};for(let u of i.children){let l=n(u);s[u.outlet]=l}let c=new ce(i.url,s);return i===t&&(e=c),c}let r=n(t.root),o=vw(r);return e??o}function ww(t,e,n,r,o){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ep(i,i,i,n,r,o);let s=ox(e);if(s.toRoot())return ep(i,i,new ce([],{}),n,r,o);let c=ix(s,i,t),u=c.processChildren?Os(c.segmentGroup,c.index,s.commands):bw(c.segmentGroup,c.index,s.commands);return ep(i,c.segmentGroup,u,n,r,o)}function bu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Fs(t){return typeof t=="object"&&t!=null&&t.outlets}function nw(t,e,n){t||="\u0275";let r=new Mt;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function ep(t,e,n,r,o,i){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>nw(l,p,i)):nw(l,h,i);let c;t===e?c=n:c=Tw(t,e,n);let u=vw(_w(c));return new Mt(u,s,o)}function Tw(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=Tw(i,e,n)}),new ce(t.segments,r)}var Su=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&bu(r[0]))throw new U(4003,!1);let o=r.find(Fs);if(o&&o!==UM(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ox(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Su(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let c={};return Object.entries(i.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:c}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&o.push(c))}),o):[...o,i]},[]);return new Su(n,e,r)}var Fo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ix(t,e,n){if(t.isAbsolute)return new Fo(e,!0,0);if(!n)return new Fo(e,!1,NaN);if(n.parent===null)return new Fo(n,!0,0);let r=bu(t.commands[0])?0:1,o=n.segments.length-1+r;return sx(n,o,t.numberOfDoubleDots)}function sx(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new U(4005,!1);o=r.segments.length}return new Fo(r,!1,o-i)}function ax(t){return Fs(t[0])?t[0].outlets:{[z]:t}}function bw(t,e,n){if(t??=new ce([],{}),t.segments.length===0&&t.hasChildren())return Os(t,e,n);let r=cx(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new ce(t.segments.slice(0,r.pathIndex),{});return i.children[z]=new ce(t.segments.slice(r.pathIndex),t.children),Os(i,0,o)}else return r.match&&o.length===0?new ce(t.segments,{}):r.match&&!t.hasChildren()?sp(t,e,n):r.match?Os(t,0,o):sp(t,e,n)}function Os(t,e,n){if(n.length===0)return new ce(t.segments,{});{let r=ax(n),o={};if(Object.keys(r).some(i=>i!==z)&&t.children[z]&&t.numberOfChildren===1&&t.children[z].segments.length===0){let i=Os(t.children[z],e,n);return new ce(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=bw(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ce(t.segments,o)}}function cx(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],c=n[r];if(Fs(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(o>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ow(u,l,s))return i;r+=2}else{if(!ow(u,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function sp(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(Fs(i)){let u=ux(i.outlets);return new ce(r,u)}if(o===0&&bu(n[0])){let u=t.segments[e];r.push(new Kn(u.path,rw(n[0]))),o++;continue}let s=Fs(i)?i.outlets[z]:`${i}`,c=o<n.length-1?n[o+1]:null;s&&c&&bu(c)?(r.push(new Kn(s,rw(c))),o+=2):(r.push(new Kn(s,{})),o++)}return new ce(r,{})}function ux(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=sp(new ce([],{}),0,r))}),e}function rw(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ow(t,e,n){return t==n.path&&$t(e,n.parameters)}var ks="imperative",Fe=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Fe||{}),gt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Fr=class extends gt{type=Fe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mn=class extends gt{urlAfterRedirects;type=Fe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ye=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ye||{}),Vs=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Vs||{}),Et=class extends gt{reason;code;type=Fe.NavigationCancel;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function Sw(t){return t instanceof Et&&(t.code===Ye.Redirect||t.code===Ye.SupersededByNewNavigation)}var yn=class extends gt{reason;code;type=Fe.NavigationSkipped;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}},Vr=class extends gt{error;target;type=Fe.NavigationError;constructor(e,n,r,o){super(e,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uo=class extends gt{urlAfterRedirects;state;type=Fe.RoutesRecognized;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cu=class extends gt{urlAfterRedirects;state;type=Fe.GuardsCheckStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Du=class extends gt{urlAfterRedirects;state;shouldActivate;type=Fe.GuardsCheckEnd;constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Au=class extends gt{urlAfterRedirects;state;type=Fe.ResolveStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ru=class extends gt{urlAfterRedirects;state;type=Fe.ResolveEnd;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nu=class{route;type=Fe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mu=class{route;type=Fe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xu=class{snapshot;type=Fe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pu=class{snapshot;type=Fe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ou=class{snapshot;type=Fe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ku=class{snapshot;type=Fe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Bo=class{},Ho=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function lx(t){return!(t instanceof Bo)&&!(t instanceof Ho)}var Lu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new qo(this.rootInjector)}},qo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Lu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Z(Re))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fu=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ap(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ap(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=cp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return cp(e,this._root).map(n=>n.value)}};function ap(t,e){if(t===e.value)return e;for(let n of e.children){let r=ap(t,n);if(r)return r}return null}function cp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=cp(t,n);if(r.length)return r.unshift(e),r}return[]}var pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var js=class extends Fu{snapshot;constructor(e,n){super(e),this.snapshot=n,mp(this,e)}toString(){return this.snapshot.toString()}};function Cw(t,e){let n=dx(t,e),r=new He([new Kn("",{})]),o=new He({}),i=new He({}),s=new He({}),c=new He(""),u=new Yn(r,o,s,c,i,z,t,n.root);return u.snapshot=n.root,new js(new pt(u,[]),n)}function dx(t,e){let n={},r={},o={},s=new kr([],n,o,"",r,z,t,null,{},e);return new Us("",new pt(s,[]))}var Yn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,o,i,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ee(l=>l[$s]))??te(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ee(e=>Lr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ee(e=>Lr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vu(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),o?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},o&&Aw(o)&&(r.resolve[$s]=o.title),r}var kr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[$s]}constructor(e,n,r,o,i,s,c,u,l,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l,this._environmentInjector=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Us=class extends Fu{url;constructor(e,n){super(n),this.url=e,mp(this,n)}toString(){return Dw(this._root)}};function mp(t,e){e.value._routerState=t,e.children.forEach(n=>mp(t,n))}function Dw(t){let e=t.children.length>0?` { ${t.children.map(Dw).join(", ")} } `:"";return`${t.value}${e}`}function tp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$t(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),$t(e.params,n.params)||t.paramsSubject.next(n.params),jM(e.url,n.url)||t.urlSubject.next(n.url),$t(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function up(t,e){let n=$t(t.params,e.params)&&zM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||up(t.parent,e.parent))}function Aw(t){return typeof t.title=="string"||t.title===null}var Rw=new B(""),qs=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=z;activateEvents=new nt;deactivateEvents=new nt;attachEvents=new nt;detachEvents=new nt;routerOutletData=FI();parentContexts=O(qo);location=O(iu);changeDetector=O(VI);inputBinder=O(Hu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new lp(n,c,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ph({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hh]})}return t})(),lp=class{route;childContexts;parent;outletData;constructor(e,n,r,o){this.route=e,this.childContexts=n,this.parent=r,this.outletData=o}get(e,n){return e===Yn?this.route:e===qo?this.childContexts:e===Rw?this.outletData:this.parent.get(e,n)}},Hu=new B("");var yp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Is({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Oo(0,"router-outlet")},dependencies:[qs],encapsulation:2})}return t})();function vp(t){let e=t.children&&t.children.map(vp),n=e?ie(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==z&&(n.component=yp),n}function fx(t,e,n){let r=Bs(t,e._root,n?n._root:void 0);return new js(r,e)}function Bs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=hx(t,e,n);return new pt(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Bs(t,c)),s}}let r=px(e.value),o=e.children.map(i=>Bs(t,i));return new pt(r,o)}}function hx(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Bs(t,r,o);return Bs(t,r)})}function px(t){return new Yn(new He(t.url),new He(t.params),new He(t.queryParams),new He(t.fragment),new He(t.data),t.outlet,t.component,t)}var $o=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Nw="ngNavigationCancelingError";function ju(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Mw(!1,Ye.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Mw(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Nw]=!0,n.cancellationCode=e,n}function gx(t){return xw(t)&&jo(t.url)}function xw(t){return!!t&&t[Nw]}var dp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=Lo(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Lo(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Lo(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=Lo(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new ku(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Pu(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(tp(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let c=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),tp(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Uu=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function mx(t,e,n){let r=t._root,o=e?e._root:null;return Ps(r,o,n,[r.value])}function yx(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Go(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!af(t)?t:e.get(t):r}function Ps(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Lo(e);return t.children.forEach(s=>{vx(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,c])=>Ls(c,n.getContext(s),o)),o}function vx(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let u=_x(s,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new Uu(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Ps(t,e,c?c.children:null,r,o):Ps(t,e,n,r,o),u&&c&&c.outlet&&c.outlet.isActivated&&o.canDeactivateChecks.push(new Vo(c.outlet.component,s))}else s&&Ls(e,c,o),o.canActivateChecks.push(new Uu(r)),i.component?Ps(t,null,c?c.children:null,r,o):Ps(t,null,n,r,o);return o}function _x(t,e,n){if(typeof n=="function")return Qe(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!Or(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Or(t.url,e.url)||!$t(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!up(t,e)||!$t(t.queryParams,e.queryParams);default:return!up(t,e)}}function Ls(t,e,n){let r=Lo(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?Ls(s,e.children.getContext(i),n):Ls(s,null,n):Ls(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vo(e.outlet.component,o)):n.canDeactivateChecks.push(new Vo(null,o)):n.canDeactivateChecks.push(new Vo(null,o))}function Gs(t){return typeof t=="function"}function Ex(t){return typeof t=="boolean"}function Ix(t){return t&&Gs(t.canLoad)}function wx(t){return t&&Gs(t.canActivate)}function Tx(t){return t&&Gs(t.canActivateChild)}function bx(t){return t&&Gs(t.canDeactivate)}function Sx(t){return t&&Gs(t.canMatch)}function Pw(t){return t instanceof fr||t?.name==="EmptyError"}var _u=Symbol("INITIAL_VALUE");function zo(){return nn(t=>Ud(t.map(e=>e.pipe(en(1),Hd(_u)))).pipe(Ee(e=>{for(let n of e)if(n!==!0){if(n===_u)return _u;if(n===!1||Cx(n))return n}return!0}),Xt(e=>e!==_u),en(1)))}function Cx(t){return jo(t)||t instanceof $o}function Ow(t){return t.aborted?te(void 0).pipe(en(1)):new se(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function kw(t){return Gi(Ow(t))}function Dx(t){return tt(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:i}}=e;return i.length===0&&o.length===0?te(ie(x({},e),{guardsResult:!0})):Ax(i,n,r).pipe(tt(s=>s&&Ex(s)?Rx(n,o,t):te(s)),Ee(s=>ie(x({},e),{guardsResult:s})))})}function Ax(t,e,n){return xe(t).pipe(tt(r=>Ox(r.component,r.route,n,e)),tn(r=>r!==!0,!0))}function Rx(t,e,n){return xe(e).pipe(uc(r=>po(Mx(r.route.parent,n),Nx(r.route,n),Px(t,r.path),xx(t,r.route))),tn(r=>r!==!0,!0))}function Nx(t,e){return t!==null&&e&&e(new Ou(t)),te(!0)}function Mx(t,e){return t!==null&&e&&e(new xu(t)),te(!0)}function xx(t,e){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return te(!0);let r=n.map(o=>zi(()=>{let i=e._environmentInjector,s=Go(o,i),c=wx(s)?s.canActivate(e,t):Qe(i,()=>s(e,t));return jr(c).pipe(tn())}));return te(r).pipe(zo())}function Px(t,e){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(i=>yx(i)).filter(i=>i!==null).map(i=>zi(()=>{let s=i.guards.map(c=>{let u=i.node._environmentInjector,l=Go(c,u),h=Tx(l)?l.canActivateChild(n,t):Qe(u,()=>l(n,t));return jr(h).pipe(tn())});return te(s).pipe(zo())}));return te(o).pipe(zo())}function Ox(t,e,n,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let i=o.map(s=>{let c=e._environmentInjector,u=Go(s,c),l=bx(u)?u.canDeactivate(t,e,n,r):Qe(c,()=>u(t,e,n,r));return jr(l).pipe(tn())});return te(i).pipe(zo())}function kx(t,e,n,r,o){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let s=i.map(c=>{let u=Go(c,t),l=Ix(u)?u.canLoad(e,n):Qe(t,()=>u(e,n)),h=jr(l);return o?h.pipe(kw(o)):h});return te(s).pipe(zo(),Lw(r))}function Lw(t){return Ld(Lt(e=>{if(typeof e!="boolean")throw ju(t,e)}),Ee(e=>e===!0))}function Lx(t,e,n,r,o){let i=e.canMatch;if(!i||i.length===0)return te(!0);let s=i.map(c=>{let u=Go(c,t),l=Sx(u)?u.canMatch(e,n):Qe(t,()=>u(e,n));return jr(l).pipe(kw(o))});return te(s).pipe(zo(),Lw(r))}var gn=class t extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,t.prototype)}},Hs=class t extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t.prototype)}};function Fx(t){throw new U(4e3,!1)}function Vx(t){throw Mw(!1,Ye.GuardRejected)}var fp=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return r;if(o.numberOfChildren>1||!o.children[z])throw Fx(`${e.redirectTo}`);o=o.children[z]}}async applyRedirectCommands(e,n,r,o,i){let s=await jx(n,o,i);if(s instanceof Mt)throw new Hs(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Hs(c);return c}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new Mt(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let c=i.substring(1);r[o]=n[c]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,o)}),new ce(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new U(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}};function jx(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:o,fragment:i,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p,paramMap:m,queryParamMap:y}=e;return Tu(jr(Qe(n,()=>r({params:l,data:h,queryParams:o,fragment:i,routeConfig:s,url:c,outlet:u,title:p,paramMap:m,queryParamMap:y}))))}function Ux(t,e){return t.providers&&!t._injector&&(t._injector=Es(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Nt(t){return t.outlet||z}function Bx(t,e){let n=t.filter(r=>Nt(r)===e);return n.push(...t.filter(r=>Nt(r)!==e)),n}var hp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hx(t,e,n,r,o,i){let s=Fw(t,e,n);return s.matched?(r=Ux(e,r),Lx(r,e,n,o,i).pipe(Ee(c=>c===!0?s:x({},hp)))):te(s)}function Fw(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},hp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||uw)(n,t,e);if(!o)return x({},hp);let i={};Object.entries(o.posParams??{}).forEach(([c,u])=>{i[c]=u.path});let s=o.consumed.length>0?x(x({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function iw(t,e,n,r){return n.length>0&&qx(t,n,r)?{segmentGroup:new ce(e,zx(r,new ce(n,t.children))),slicedSegments:[]}:n.length===0&&Gx(t,n,r)?{segmentGroup:new ce(t.segments,$x(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ce(t.segments,t.children),slicedSegments:n}}function $x(t,e,n,r){let o={};for(let i of n)if($u(t,e,i)&&!r[Nt(i)]){let s=new ce([],{});o[Nt(i)]=s}return x(x({},r),o)}function zx(t,e){let n={};n[z]=e;for(let r of t)if(r.path===""&&Nt(r)!==z){let o=new ce([],{});n[Nt(r)]=o}return n}function qx(t,e,n){return n.some(r=>$u(t,e,r)&&Nt(r)!==z)}function Gx(t,e,n){return n.some(r=>$u(t,e,r))}function $u(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Wx(t,e,n){return e.length===0&&!t.children[n]}var pp=class{};async function Kx(t,e,n,r,o,i,s="emptyOnly",c){return new gp(t,e,n,r,o,s,i,c).recognize()}var Qx=31,gp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,o,i,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new fp(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}async recognize(){let e=iw(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),o=new pt(r,n),i=new Us("",o),s=Ew(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}async match(e){let n=new kr([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),z,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,e,z,n),rootSnapshot:n}}catch(r){if(r instanceof Hs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof gn?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,o,i){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,i);let s=await this.processSegment(e,n,r,r.segments,o,!0,i);return s instanceof pt?[s]:[]}async processChildren(e,n,r,o){let i=[];for(let u of Object.keys(r.children))u==="primary"?i.unshift(u):i.push(u);let s=[];for(let u of i){let l=r.children[u],h=Bx(n,u),p=await this.processSegmentGroup(e,h,l,u,o);s.push(...p)}let c=Vw(s);return Yx(c),c}async processSegment(e,n,r,o,i,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,o,i,s,c)}catch(l){if(l instanceof gn||Pw(l))continue;throw l}if(Wx(r,o,i))return new pp;throw new gn(r)}async processSegmentAgainstRoute(e,n,r,o,i,s,c,u){if(Nt(r)!==s&&(s===z||!$u(o,i,r)))throw new gn(o);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,o,r,i,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,u);throw new gn(o)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=Fw(n,o,i);if(!u)throw new gn(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Qx&&(this.allowRedirects=!1));let y=new kr(i,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,sw(o),Nt(o),o.component??o._loadedComponent??null,o,aw(o),e),D=Vu(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,o.redirectTo,p,y,e),M=await this.applyRedirects.lineralizeSegments(o,R);return this.processSegment(e,r,n,M.concat(m),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,o,i,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await Tu(Hx(n,r,o,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new gn(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,o),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,y=new kr(p,h,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,sw(r),Nt(r),r.component??r._loadedComponent??null,r,aw(r),e),D=Vu(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let{segmentGroup:R,slicedSegments:M}=iw(n,p,m,u);if(M.length===0&&R.hasChildren()){let oe=await this.processChildren(l,u,R,y);return new pt(y,oe)}if(u.length===0&&M.length===0)return new pt(y,[]);let L=Nt(r)===i,Q=await this.processSegment(l,u,R,M,L?z:i,!0,y);return new pt(y,Q instanceof pt?[Q]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0){let i=n._loadedNgModuleFactory;return i&&!n._loadedInjector&&(n._loadedInjector=i.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Tu(kx(e,n,r,this.urlSerializer,this.abortSignal))){let i=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=i.routes,n._loadedInjector=i.injector,n._loadedNgModuleFactory=i.factory,i}throw Vx(n)}return{routes:[],injector:e}}};function Yx(t){t.sort((e,n)=>e.value.outlet===z?-1:n.value.outlet===z?1:e.value.outlet.localeCompare(n.value.outlet))}function Jx(t){let e=t.value.routeConfig;return e&&e.path===""}function Vw(t){let e=[],n=new Set;for(let r of t){if(!Jx(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=Vw(r.children);e.push(new pt(r.value,o))}return e.filter(r=>!n.has(r))}function sw(t){return t.data||{}}function aw(t){return t.resolve||{}}function Zx(t,e,n,r,o,i,s){return tt(async c=>{let{state:u,tree:l}=await Kx(t,e,n,r,c.extractedUrl,o,i,s);return ie(x({},c),{targetSnapshot:u,urlAfterRedirects:l})})}function Xx(t){return tt(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return te(e);let o=new Set(r.map(c=>c.route)),i=new Set;for(let c of o)if(!i.has(c))for(let u of jw(c))i.add(u);let s=0;return xe(i).pipe(uc(c=>o.has(c)?e0(c,n,t):(c.data=Vu(c,c.parent,t).resolve,te(void 0))),Lt(()=>s++),lc(1),tt(c=>s===i.size?te(e):$e))})}function jw(t){let e=t.children.map(n=>jw(n)).flat();return[t,...e]}function e0(t,e,n){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!Aw(r)&&(o[$s]=r.title),zi(()=>(t.data=Vu(t,t.parent,n).resolve,t0(o,t,e).pipe(Ee(i=>(t._resolvedData=i,t.data=x(x({},t.data),i),null)))))}function t0(t,e,n){let r=rp(t);if(r.length===0)return te({});let o={};return xe(r).pipe(tt(i=>n0(t[i],e,n).pipe(tn(),Lt(s=>{if(s instanceof $o)throw ju(new Qn,s);o[i]=s}))),lc(1),Ee(()=>o),qi(i=>Pw(i)?$e:jd(i)))}function n0(t,e,n){let r=e._environmentInjector,o=Go(t,r),i=o.resolve?o.resolve(e,n):Qe(r,()=>o(e,n));return jr(i)}function cw(t){return nn(e=>{let n=t(e);return n?xe(n).pipe(Ee(()=>e)):te(e)})}var _p=(()=>{class t{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===z);return r}getResolvedTitleForRoute(n){return n.data[$s]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(Uw),providedIn:"root"})}return t})(),Uw=(()=>{class t extends _p{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Z(XI))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ws=new B("",{factory:()=>({})}),Ks=new B(""),Bw=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(jh);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await dw(Qe(n,()=>r.loadComponent())),s=await zw($w(i));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await Hw(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=i.routes,r._loadedInjector=i.injector,r._loadedNgModuleFactory=i.factory,i}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function Hw(t,e,n,r){let o=await dw(Qe(n,()=>t.loadChildren())),i=await zw($w(o)),s;i instanceof su||Array.isArray(i)?s=i:s=await e.compileModuleAsync(i),r&&r(t);let c,u,l=!1,h;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,h=s,u=c.get(Ks,[],{optional:!0,self:!0}).flat()),{routes:u.map(vp),injector:c,factory:h}}function r0(t){return t&&typeof t=="object"&&"default"in t}function $w(t){return r0(t)?t.default:t}async function zw(t){return t}var zu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(o0),providedIn:"root"})}return t})(),o0=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qw=new B("");var i0=()=>{},Gw=new B(""),Ww=(()=>{class t{currentNavigation=qn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=qn(null);events=new Ke;transitionAbortWithErrorSubject=new Ke;configLoader=O(Bw);environmentInjector=O(Re);destroyRef=O(Dr);urlSerializer=O(zs);rootContexts=O(qo);location=O(ko);inputBindingEnabled=O(Hu,{optional:!0})!==null;titleStrategy=O(_p);options=O(Ws,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(zu);createViewTransition=O(qw,{optional:!0});navigationErrorHandler=O(Gw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>te(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new Nu(o)),r=o=>this.events.next(new Mu(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;hn(()=>{this.transitions?.next(ie(x({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new He(null),this.transitions.pipe(Xt(r=>r!==null),nn(r=>{let o=!1,i=new AbortController,s=()=>!o&&this.currentTransition?.id===r.id;return te(r).pipe(nn(c=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ye.SupersededByNewNavigation),$e;this.currentTransition=r;let u=this.lastSuccessfulNavigation();this.currentNavigation.set({id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:u?ie(x({},u),{previousNavigation:null}):null,abort:()=>i.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload")return this.events.next(new yn(c.id,this.urlSerializer.serialize(c.rawUrl),"",Vs.IgnoredSameUrlNavigation)),c.resolve(!1),$e;if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return te(c).pipe(nn(p=>(this.events.next(new Fr(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?$e:Promise.resolve(p))),Zx(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,i.signal),Lt(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=p.urlAfterRedirects,y));let m=new Uo(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:R}=c,M=new Fr(p,this.urlSerializer.serialize(m),y,D);this.events.next(M);let L=Cw(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ie(x({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:ie(x({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(Q=>(Q.finalUrl=m,Q)),te(r)}else return this.events.next(new yn(c.id,this.urlSerializer.serialize(c.extractedUrl),"",Vs.IgnoredByUrlHandlingStrategy)),c.resolve(!1),$e}),Ee(c=>{let u=new Cu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);return this.events.next(u),this.currentTransition=r=ie(x({},c),{guards:mx(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),r}),Dx(c=>this.events.next(c)),nn(c=>{if(r.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ju(this.urlSerializer,c.guardsResult);let u=new Du(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);if(this.events.next(u),!s())return $e;if(!c.guardsResult)return this.cancelNavigationTransition(c,"",Ye.GuardRejected),$e;if(c.guards.canActivateChecks.length===0)return te(c);let l=new Au(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);if(this.events.next(l),!s())return $e;let h=!1;return te(c).pipe(Xx(this.paramsInheritanceStrategy),Lt({next:()=>{h=!0;let p=new Ru(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)},complete:()=>{h||this.cancelNavigationTransition(c,"",Ye.NoDataFromResolver)}}))}),cw(c=>{let u=h=>{let p=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let m=h._environmentInjector;p.push(this.configLoader.loadComponent(m,h.routeConfig).then(y=>{h.component=y}))}for(let m of h.children)p.push(...u(m));return p},l=u(c.targetSnapshot.root);return l.length===0?te(c):xe(Promise.all(l).then(()=>c))}),cw(()=>this.afterPreactivation()),nn(()=>{let{currentSnapshot:c,targetSnapshot:u}=r,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?xe(l).pipe(Ee(()=>r)):te(r)}),en(1),Ee(c=>{let u=fx(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);this.currentTransition=r=c=ie(x({},c),{targetRouterState:u}),this.currentNavigation.update(l=>(l.targetRouterState=u,l)),this.events.next(new Bo),s()&&(new dp(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(o=!0,this.currentNavigation.update(l=>(l.abort=i0,l)),this.lastSuccessfulNavigation.set(hn(this.currentNavigation)),this.events.next(new mn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)))}),Gi(Ow(i.signal).pipe(Xt(()=>!o&&!r.targetRouterState),Lt(()=>{this.cancelNavigationTransition(r,i.signal.reason+"",Ye.Aborted)}))),Lt({complete:()=>{o=!0}}),Gi(this.transitionAbortWithErrorSubject.pipe(Lt(c=>{throw c}))),Bd(()=>{i.abort(),o||this.cancelNavigationTransition(r,"",Ye.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),qi(c=>{if(o=!0,this.destroyed)return r.resolve(!1),$e;if(xw(c))this.events.next(new Et(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode)),gx(c)?this.events.next(new Ho(c.url,c.navigationBehaviorOptions)):r.resolve(!1);else{let u=new Vr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);try{let l=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof $o){let{message:h,cancellationCode:p}=ju(this.urlSerializer,l);this.events.next(new Et(r.id,this.urlSerializer.serialize(r.extractedUrl),h,p)),this.events.next(new Ho(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return $e}))}))}cancelNavigationTransition(n,r,o){let i=new Et(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=hn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function s0(t){return t!==ks}var Kw=new B("");var Qw=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(a0),providedIn:"root"})}return t})(),Bu=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}},a0=(()=>{class t extends Bu{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qc(t)))(o||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ep=(()=>{class t{urlSerializer=O(zs);options=O(Ws,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(ko);urlHandlingStrategy=O(zu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Mt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=Cw(null,O(Re));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>O(c0),providedIn:"root"})}return t})(),c0=(()=>{class t extends Ep{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Fr?this.updateStateMemento():n instanceof yn?this.commitTransition(r):n instanceof Uo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Bo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Et&&!Sw(n)?this.restoreHistory(r):n instanceof Vr?this.restoreHistory(r,!0):n instanceof mn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let c=this.browserPageId,u=x(x({},s),this.generateNgRouterState(o,c));this.location.replaceState(n,"",u)}else{let c=x(x({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qc(t)))(o||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ip(t,e){t.events.pipe(Xt(n=>n instanceof mn||n instanceof Et||n instanceof Vr||n instanceof yn),Ee(n=>n instanceof mn||n instanceof yn?0:(n instanceof Et?n.code===Ye.Redirect||n.code===Ye.SupersededByNewNavigation:!1)?2:1),Xt(n=>n!==2),en(1)).subscribe(()=>{e()})}var Yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Jw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qu=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Oh);stateManager=O(Ep);options=O(Ws,{optional:!0})||{};pendingTasks=O(zn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Ww);urlSerializer=O(zs);location=O(ko);urlHandlingStrategy=O(zu);injector=O(Re);_events=new Ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(Qw);injectorCleanup=O(Kw,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(Ks,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Hu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Be;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=hn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Et&&r.code!==Ye.Redirect&&r.code!==Ye.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Ho){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u=x({scroll:o.extras.scroll,browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||s0(o.source)},s);this.scheduleNavigation(c,ks,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}lx(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ks,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let u=x({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(i.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,i).catch(u=>{this.disposed||this.injector.get(fn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return hn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=o?o.snapshot:this.routerState.snapshot.root;p=Iw(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return ww(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let o=jo(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ks,null,r)}navigate(n,r={skipLocationChange:!1}){return u0(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Zi(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=x({},Yw):r===!1?o=x({},Jw):o=r,jo(n))return ew(this.currentUrlTree,n,o);let i=this.parseUrl(n);return ew(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return Ip(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function u0(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}var f0=new B("");function wp(t,...e){return wc([{provide:Ks,multi:!0,useValue:t},[],{provide:Yn,useFactory:h0},{provide:au,multi:!0,useFactory:p0},e.map(n=>n.\u0275providers)])}function h0(){return O(qu).routerState.root}function p0(){let t=O(Vt);return e=>{let n=t.get(Po);if(e!==n.components[0])return;let r=t.get(qu),o=t.get(g0);t.get(m0)===1&&r.initialNavigation(),t.get(y0,null,{optional:!0})?.setUpPreloading(),t.get(f0,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var g0=new B("",{factory:()=>new Ke}),m0=new B("",{factory:()=>1});var y0=new B("");var Zw=[];var Xw=()=>{};var nT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},_0=function(t){let e=[],n=0,r=0;for(;n<t.length;){let o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){let i=t[n++];e[r++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){let i=t[n++],s=t[n++],c=t[n++],u=((o&7)<<18|(i&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let i=t[n++],s=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},rT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){let i=t[o],s=o+1<t.length,c=s?t[o+1]:0,u=o+2<t.length,l=u?t[o+2]:0,h=i>>2,p=(i&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){let i=n[t.charAt(o++)],c=o<t.length?n[t.charAt(o)]:0;++o;let l=o<t.length?n[t.charAt(o)]:64;++o;let p=o<t.length?n[t.charAt(o)]:64;if(++o,i==null||c==null||l==null||p==null)throw new Tp;let m=i<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Tp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},E0=function(t){let e=nT(t);return rT.encodeByteArray(e,!0)},Ys=function(t){return E0(t).replace(/\./g,"")},oT=function(t){try{return rT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var I0=()=>iT().__FIREBASE_DEFAULTS__,w0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},T0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&oT(t[1]);return e&&JSON.parse(e)},bp=()=>{try{return Xw()||I0()||w0()||T0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b0=t=>bp()?.emulatorHosts?.[t],sT=t=>{let e=b0(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sp=()=>bp()?.config;var Gu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Wu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aT(t){return(await fetch(t,{credentials:"include"})).ok}function cT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=x({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ys(JSON.stringify(n)),Ys(JSON.stringify(s)),""].join(".")}var Qs={};function S0(){let t={prod:[],emulator:[]};for(let e of Object.keys(Qs))Qs[e]?t.emulator.push(e):t.prod.push(e);return t}function C0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var eT=!1;function uT(t,e){if(typeof window>"u"||typeof document>"u"||!Wu(window.location.host)||Qs[t]===e||Qs[t]||eT)return;Qs[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",i=S0().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{eT=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=C0(r),y=n("text"),D=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),M=document.getElementById(R)||document.createElement("a"),L=n("preprendIcon"),Q=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let oe=m.element;c(oe),h(M,R);let ct=l();u(Q,L),oe.append(Q,D,M,ct),document.body.appendChild(oe)}i?(D.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function lT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D0(){let t=bp()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dT(){return!D0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cp(){try{return typeof indexedDB=="object"}catch{return!1}}function fT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}var A0="FirebaseError",vn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=A0,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Js.prototype.create)}},Js=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?R0(i,r):"Error",c=`${this.serviceName}: ${s} (${o}).`;return new vn(o,c,r)}};function R0(t,e){return t.replace(N0,(n,r)=>{let o=e[r];return o!=null?String(o):`<${r}?>`})}var N0=/\{\$([^}]+)}/g;function Ur(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let o of n){if(!r.includes(o))return!1;let i=t[o],s=e[o];if(tT(i)&&tT(s)){if(!Ur(i,s))return!1}else if(i!==s)return!1}for(let o of r)if(!n.includes(o))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}var h3=14400*1e3;function Br(t){return t&&t._delegate?t._delegate:t}var _n=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hr="[DEFAULT]";var Dp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Gu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x0(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(n);try{let i=this.getOrInitializeService({instanceIdentifier:o});r.resolve(i)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[i,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(i);r===c&&s.resolve(o)}return o}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);let i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function M0(t){return t===Hr?void 0:t}function x0(t){return t.instantiationMode==="EAGER"}var Ku=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Dp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var P0=[],ne=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ne||{}),O0={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},k0=ne.INFO,L0={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},F0=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),o=L0[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wo=class{constructor(e){this.name=e,this._logLevel=k0,this._logHandler=F0,this._userLogHandler=null,P0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var V0=(t,e)=>e.some(n=>t instanceof n),hT,pT;function j0(){return hT||(hT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U0(){return pT||(pT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gT=new WeakMap,Rp=new WeakMap,mT=new WeakMap,Ap=new WeakMap,Mp=new WeakMap;function B0(t){let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(zt(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&gT.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function H0(t){if(Rp.has(t))return;let e=new Promise((n,r)=>{let o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});Rp.set(t,e)}var Np={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yT(t){Np=t(Np)}function $0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Qu(this),e,...n);return mT.set(r,e.sort?e.sort():[e]),zt(r)}:U0().includes(t)?function(...e){return t.apply(Qu(this),e),zt(gT.get(this))}:function(...e){return zt(t.apply(Qu(this),e))}}function z0(t){return typeof t=="function"?$0(t):(t instanceof IDBTransaction&&H0(t),V0(t,j0())?new Proxy(t,Np):t)}function zt(t){if(t instanceof IDBRequest)return B0(t);if(Ap.has(t))return Ap.get(t);let e=z0(t);return e!==t&&(Ap.set(t,e),Mp.set(e,t)),e}var Qu=t=>Mp.get(t);function _T(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let s=indexedDB.open(t,e),c=zt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zt(s.result),u.oldVersion,u.newVersion,zt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),o&&u.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var q0=["get","getKey","getAll","getAllKeys","count"],G0=["put","add","delete","clear"],xp=new Map;function vT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,o=G0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||q0.includes(n)))return;let i=async function(s,...c){let u=this.transaction(s,o?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),o&&u.done]))[0]};return xp.set(e,i),i}yT(t=>ie(x({},t),{get:(e,n,r)=>vT(e,n)||t.get(e,n,r),has:(e,n)=>!!vT(e,n)||t.has(e,n)}));var Op=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W0(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function W0(t){return t.getComponent()?.type==="VERSION"}var kp="@firebase/app",ET="0.14.7";var En=new Wo("@firebase/app"),K0="@firebase/app-compat",Q0="@firebase/analytics-compat",Y0="@firebase/analytics",J0="@firebase/app-check-compat",Z0="@firebase/app-check",X0="@firebase/auth",eP="@firebase/auth-compat",tP="@firebase/database",nP="@firebase/data-connect",rP="@firebase/database-compat",oP="@firebase/functions",iP="@firebase/functions-compat",sP="@firebase/installations",aP="@firebase/installations-compat",cP="@firebase/messaging",uP="@firebase/messaging-compat",lP="@firebase/performance",dP="@firebase/performance-compat",fP="@firebase/remote-config",hP="@firebase/remote-config-compat",pP="@firebase/storage",gP="@firebase/storage-compat",mP="@firebase/firestore",yP="@firebase/ai",vP="@firebase/firestore-compat",_P="firebase",EP="12.8.0";var Lp="[DEFAULT]",IP={[kp]:"fire-core",[K0]:"fire-core-compat",[Y0]:"fire-analytics",[Q0]:"fire-analytics-compat",[Z0]:"fire-app-check",[J0]:"fire-app-check-compat",[X0]:"fire-auth",[eP]:"fire-auth-compat",[tP]:"fire-rtdb",[nP]:"fire-data-connect",[rP]:"fire-rtdb-compat",[oP]:"fire-fn",[iP]:"fire-fn-compat",[sP]:"fire-iid",[aP]:"fire-iid-compat",[cP]:"fire-fcm",[uP]:"fire-fcm-compat",[lP]:"fire-perf",[dP]:"fire-perf-compat",[fP]:"fire-rc",[hP]:"fire-rc-compat",[pP]:"fire-gcs",[gP]:"fire-gcs-compat",[mP]:"fire-fst",[vP]:"fire-fst-compat",[yP]:"fire-vertex","fire-js":"fire-js",[_P]:"fire-js-all"};var Yu=new Map,wP=new Map,Fp=new Map;function IT(t,e){try{t.container.addComponent(e)}catch(n){En.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){let e=t.name;if(Fp.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;Fp.set(e,t);for(let n of Yu.values())IT(n,t);for(let n of wP.values())IT(n,t);return!0}function ST(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function CT(t){return t==null?!1:t.settings!==void 0}var TP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jn=new Js("app","Firebase",TP);var Vp=class{constructor(e,n,r){this._isDeleted=!1,this._options=x({},e),this._config=x({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}};var DT=EP;function Bp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=x({name:Lp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Jn.create("bad-app-name",{appName:String(o)});if(n||(n=Sp()),!n)throw Jn.create("no-options");let i=Yu.get(o);if(i){if(Ur(n,i.options)&&Ur(r,i.config))return i;throw Jn.create("duplicate-app",{appName:o})}let s=new Ku(o);for(let u of Fp.values())s.addComponent(u);let c=new Vp(n,r,s);return Yu.set(o,c),c}function AT(t=Lp){let e=Yu.get(t);if(!e&&t===Lp&&Sp())return Bp();if(!e)throw Jn.create("no-app",{appName:t});return e}function Zn(t,e,n){let r=IP[t]??t;n&&(r+=`-${n}`);let o=r.match(/\s|\//),i=e.match(/\s|\//);if(o||i){let s=[`Unable to register library "${r}" with version "${e}":`];o&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(s.join(" "));return}Zs(new _n(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var bP="firebase-heartbeat-database",SP=1,Xs="firebase-heartbeat-store",Pp=null;function RT(){return Pp||(Pp=_T(bP,SP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Jn.create("idb-open",{originalErrorMessage:t.message})})),Pp}async function CP(t){try{let n=(await RT()).transaction(Xs),r=await n.objectStore(Xs).get(NT(t));return await n.done,r}catch(e){if(e instanceof vn)En.warn(e.message);else{let n=Jn.create("idb-get",{originalErrorMessage:e?.message});En.warn(n.message)}}}async function wT(t,e){try{let r=(await RT()).transaction(Xs,"readwrite");await r.objectStore(Xs).put(e,NT(t)),await r.done}catch(n){if(n instanceof vn)En.warn(n.message);else{let r=Jn.create("idb-set",{originalErrorMessage:n?.message});En.warn(r.message)}}}function NT(t){return`${t.name}!${t.options.appId}`}var DP=1024,AP=30,jp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Up(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>AP){let o=NP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){En.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=TT(),{heartbeatsToSend:n,unsentEntries:r}=RP(this._heartbeatsCache.heartbeats),o=Ys(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return En.warn(e),""}}};function TT(){return new Date().toISOString().substring(0,10)}function RP(t,e=DP){let n=[],r=t.slice();for(let o of t){let i=n.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),bT(n)>e){i.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),bT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Up=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cp()?fT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await CP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return wT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return wT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function bT(t){return Ys(JSON.stringify({version:2,heartbeats:t})).length}function NP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function MP(t){Zs(new _n("platform-logger",e=>new Op(e),"PRIVATE")),Zs(new _n("heartbeat",e=>new jp(e),"PRIVATE")),Zn(kp,ET,t),Zn(kp,ET,"esm2020"),Zn("fire-js","")}MP("");var xP="firebase",PP="12.8.0";Zn(xP,PP,"app");var MT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xT={};var In,Hp;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,S){for(var _=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)_[rt-2]=arguments[rt];return v.prototype[I].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let S=w.g[3],_;_=v+(S^E&(I^S))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(I^v&(E^I))+T[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=I+(E^S&(v^E))+T[2]+606105819&4294967295,I=S+(_<<17&4294967295|_>>>15),_=E+(v^I&(S^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(S^E&(I^S))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(I^v&(E^I))+T[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=I+(E^S&(v^E))+T[6]+2821735955&4294967295,I=S+(_<<17&4294967295|_>>>15),_=E+(v^I&(S^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(S^E&(I^S))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(I^v&(E^I))+T[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=I+(E^S&(v^E))+T[10]+4294925233&4294967295,I=S+(_<<17&4294967295|_>>>15),_=E+(v^I&(S^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(S^E&(I^S))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=S+(I^v&(E^I))+T[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=I+(E^S&(v^E))+T[14]+2792965006&4294967295,I=S+(_<<17&4294967295|_>>>15),_=E+(v^I&(S^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^S&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^I&(v^E))+T[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(S^v))+T[11]+643717713&4294967295,I=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(I^S))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^S&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^I&(v^E))+T[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(S^v))+T[15]+3634488961&4294967295,I=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(I^S))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^S&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^I&(v^E))+T[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(S^v))+T[3]+4107603335&4294967295,I=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(I^S))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^S&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=S+(E^I&(v^E))+T[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(S^v))+T[7]+1735328473&4294967295,I=S+(_<<14&4294967295|_>>>18),_=E+(S^v&(I^S))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^S)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^I)+T[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=I+(S^v^E)+T[11]+1839030562&4294967295,I=S+(_<<16&4294967295|_>>>16),_=E+(I^S^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^S)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^I)+T[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=I+(S^v^E)+T[7]+4139469664&4294967295,I=S+(_<<16&4294967295|_>>>16),_=E+(I^S^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^S)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^I)+T[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=I+(S^v^E)+T[3]+3572445317&4294967295,I=S+(_<<16&4294967295|_>>>16),_=E+(I^S^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^S)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=S+(v^E^I)+T[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=I+(S^v^E)+T[15]+530742520&4294967295,I=S+(_<<16&4294967295|_>>>16),_=E+(I^S^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~S))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~I))+T[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=I+(v^(S|~E))+T[14]+2878612391&4294967295,I=S+(_<<15&4294967295|_>>>17),_=E+(S^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~S))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~I))+T[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=I+(v^(S|~E))+T[10]+4293915773&4294967295,I=S+(_<<15&4294967295|_>>>17),_=E+(S^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~S))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~I))+T[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=I+(v^(S|~E))+T[6]+2734768916&4294967295,I=S+(_<<15&4294967295|_>>>17),_=E+(S^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~S))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=S+(E^(v|~I))+T[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=I+(v^(S|~E))+T[2]+718787259&4294967295,I=S+(_<<15&4294967295|_>>>17),_=E+(S^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,S=0;for(;S<v;){if(I==0)for(;S<=E;)o(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(T[I++]=w.charCodeAt(S++),I==this.blockSize){o(this,T),I=0;break}}else for(;S<v;)if(T[I++]=w[S++],I==this.blockSize){o(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function i(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let S=w[I]|0;T&&S==v||(E[I]=S,T=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?i(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return M(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return M(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let S=0;S<w.length;S+=8){var I=Math.min(8,w.length-S);let _=parseInt(w.substring(S,S+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-M(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(R(this))return"-"+M(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=ct(E,v).g;E=L(E,I.j(v));let S=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,D(E))return S+T;for(;S.length<6;)S="0"+S;T=S+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=L(this,w),R(w)?-1:D(w)?0:1};function M(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}t.abs=function(){return R(this)?M(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let S=T+(this.i(I)&65535)+(w.i(I)&65535),_=(S>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,S&=65535,_&=65535,E[I]=_<<16|S}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,v){return w.add(M(v))}t.j=function(w){if(D(this)||D(w))return p;if(R(this))return R(w)?M(this).j(M(w)):M(M(this).j(w));if(R(w))return M(this.j(M(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let S=this.i(T)>>>16,_=this.i(T)&65535,rt=w.i(I)>>>16,Mn=w.i(I)&65535;E[2*T+2*I]+=_*Mn,Q(E,2*T+2*I),E[2*T+2*I+1]+=S*Mn,Q(E,2*T+2*I+1),E[2*T+2*I+1]+=_*rt,Q(E,2*T+2*I+1),E[2*T+2*I+2]+=S*rt,Q(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function Q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function oe(w,v){this.g=w,this.h=v}function ct(w,v){if(D(v))throw Error("division by zero");if(D(w))return new oe(p,p);if(R(w))return v=ct(M(w),v),new oe(M(v.g),M(v.h));if(R(v))return v=ct(w,M(v)),new oe(M(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(w)<=0;)E=Tt(E),T=Tt(T);var I=Ue(E,1),S=Ue(T,1);for(T=Ue(T,2),E=Ue(E,2);!D(T);){var _=S.add(T);_.l(w)<=0&&(I=I.add(E),S=_),T=Ue(T,1),E=Ue(E,1)}return v=L(w,I.j(v)),new oe(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),S=l(E),_=S.j(v);R(_)||_.l(w)>0;)E-=T,S=l(E),_=S.j(v);D(S)&&(S=m),I=I.add(S),w=L(w,_)}return new oe(I,w)}t.B=function(w){return ct(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function Tt(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function Ue(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let S=0;S<T;S++)I[S]=v>0?w.i(S+E)>>>v|w.i(S+E+1)<<32-v:w.i(S+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hp=xT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,In=xT.Integer=s}).apply(typeof MT<"u"?MT:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wn={};var $p,OP,Ko,zp,ea,Zu,qp,Gp,Wp;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function o(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in f))break e;f=f[b]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}o("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(a){return a||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var i=i||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,f){return a.call.apply(a.bind,arguments)}function l(a,d,f){return l=u,l.apply(null,arguments)}function h(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,b,C){for(var P=Array(arguments.length-2),J=2;J<arguments.length;J++)P[J-2]=arguments[J];return d.prototype[b].apply(g,P)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function D(a,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=a.length||0;let C=b.length||0;a.length=f+C;for(let P=0;P<C;P++)a[f+P]=b[P]}else a.push(b)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function M(a){s.setTimeout(()=>{throw a},0)}function L(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Q{constructor(){this.h=this.g=null}add(d,f){let g=oe.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var oe=new R(()=>new ct,a=>a.reset());class ct{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,Ue=!1,w=new Q,v=()=>{let a=Promise.resolve(void 0);Tt=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(f){M(f)}var d=oe;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Ue=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function rt(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(rt,I),rt.prototype.init=function(a,d){let f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Mn="closure_listenable_"+(Math.random()*1e6|0),rC=0;function oC(a,d,f,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++rC,this.da=this.fa=!1}function wa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ta(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function iC(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function Ym(a){let d={};for(let f in a)d[f]=a[f];return d}let Jm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zm(a,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)a[f]=g[f];for(let C=0;C<Jm.length;C++)f=Jm[C],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function ba(a){this.src=a,this.g={},this.h=0}ba.prototype.add=function(a,d,f,g,b){let C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);let P=Xl(a,d,g,b);return P>-1?(d=a[P],f||(d.fa=!1)):(d=new oC(d,this.src,C,!!g,b),d.fa=f,a.push(d)),d};function Zl(a,d){let f=d.type;if(f in a.g){var g=a.g[f],b=Array.prototype.indexOf.call(g,d,void 0),C;(C=b>=0)&&Array.prototype.splice.call(g,b,1),C&&(wa(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Xl(a,d,f,g){for(let b=0;b<a.length;++b){let C=a[b];if(!C.da&&C.listener==d&&C.capture==!!f&&C.ha==g)return b}return-1}var ed="closure_lm_"+(Math.random()*1e6|0),td={};function Xm(a,d,f,g,b){if(g&&g.once)return ty(a,d,f,g,b);if(Array.isArray(d)){for(let C=0;C<d.length;C++)Xm(a,d[C],f,g,b);return null}return f=id(f),a&&a[Mn]?a.J(d,f,c(g)?!!g.capture:!!g,b):ey(a,d,f,!1,g,b)}function ey(a,d,f,g,b,C){if(!d)throw Error("Invalid event type");let P=c(b)?!!b.capture:!!b,J=rd(a);if(J||(a[ed]=J=new ba(a)),f=J.add(d,f,g,P,C),f.proxy)return f;if(g=sC(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)S||(b=P),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(ry(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sC(){function a(f){return d.call(a.src,a.listener,f)}let d=aC;return a}function ty(a,d,f,g,b){if(Array.isArray(d)){for(let C=0;C<d.length;C++)ty(a,d[C],f,g,b);return null}return f=id(f),a&&a[Mn]?a.K(d,f,c(g)?!!g.capture:!!g,b):ey(a,d,f,!0,g,b)}function ny(a,d,f,g,b){if(Array.isArray(d))for(var C=0;C<d.length;C++)ny(a,d[C],f,g,b);else g=c(g)?!!g.capture:!!g,f=id(f),a&&a[Mn]?(a=a.i,C=String(d).toString(),C in a.g&&(d=a.g[C],f=Xl(d,f,g,b),f>-1&&(wa(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[C],a.h--)))):a&&(a=rd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Xl(d,f,g,b)),(f=a>-1?d[a]:null)&&nd(f))}function nd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Mn])Zl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(ry(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=rd(d))?(Zl(f,a),f.h==0&&(f.src=null,d[ed]=null)):wa(a)}}}function ry(a){return a in td?td[a]:td[a]="on"+a}function aC(a,d){if(a.da)a=!0;else{d=new rt(d,this);let f=a.listener,g=a.ha||a.src;a.fa&&nd(a),a=f.call(g,d)}return a}function rd(a){return a=a[ed],a instanceof ba?a:null}var od="__closure_events_fn_"+(Math.random()*1e9>>>0);function id(a){return typeof a=="function"?a:(a[od]||(a[od]=function(d){return a.handleEvent(d)}),a[od])}function Ge(){T.call(this),this.i=new ba(this),this.M=this,this.G=null}p(Ge,T),Ge.prototype[Mn]=!0,Ge.prototype.removeEventListener=function(a,d,f,g){ny(this,a,d,f,g)};function Xe(a,d){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var b=d;d=new I(g,a),Zm(d,b)}b=!0;let C,P;if(f)for(P=f.length-1;P>=0;P--)C=d.g=f[P],b=Sa(C,g,!0,d)&&b;if(C=d.g=a,b=Sa(C,g,!0,d)&&b,b=Sa(C,g,!1,d)&&b,f)for(P=0;P<f.length;P++)C=d.g=f[P],b=Sa(C,g,!1,d)&&b}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let f=a.g[d];for(let g=0;g<f.length;g++)wa(f[g]);delete a.g[d],a.h--}}this.G=null},Ge.prototype.J=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Ge.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Sa(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let C=0;C<d.length;++C){let P=d[C];if(P&&!P.da&&P.capture==f){let J=P.listener,Ae=P.ha||P.src;P.fa&&Zl(a.i,P),b=J.call(Ae,g)!==!1&&b}}return b&&!g.defaultPrevented}function cC(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function oy(a){a.g=cC(()=>{a.g=null,a.i&&(a.i=!1,oy(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class uC extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:oy(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(a){T.call(this),this.h=a,this.g={}}p(bi,T);var iy=[];function sy(a){Ta(a.g,function(d,f){this.g.hasOwnProperty(f)&&nd(d)},a),a.g={}}bi.prototype.N=function(){bi.Z.N.call(this),sy(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sd=s.JSON.stringify,lC=s.JSON.parse,dC=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function ay(){}function cy(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ad(){I.call(this,"d")}p(ad,I);function cd(){I.call(this,"c")}p(cd,I);var or={},uy=null;function Ca(){return uy=uy||new Ge}or.Ia="serverreachability";function ly(a){I.call(this,or.Ia,a)}p(ly,I);function Ci(a){let d=Ca();Xe(d,new ly(d))}or.STAT_EVENT="statevent";function dy(a,d){I.call(this,or.STAT_EVENT,a),this.stat=d}p(dy,I);function et(a){let d=Ca();Xe(d,new dy(d,a))}or.Ja="timingevent";function fy(a,d){I.call(this,or.Ja,a),this.size=d}p(fy,I);function Di(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function fC(a,d,f,g,b,C){a.info(function(){if(a.g)if(C){var P="",J=C.split("&");for(let ge=0;ge<J.length;ge++){var Ae=J[ge].split("=");if(Ae.length>1){let Ne=Ae[0];Ae=Ae[1];let kt=Ne.split("_");P=kt.length>=2&&kt[1]=="type"?P+(Ne+"="+Ae+"&"):P+(Ne+"=redacted&")}}}else P=null;else P=C;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function hC(a,d,f,g,b,C,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+C+" "+P})}function oo(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+gC(a,f)+(g?" "+g:"")})}function pC(a,d){a.info(function(){return"TIMEOUT: "+d})}Ai.prototype.info=function(){};function gC(a,d){if(!a.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(a=0;a<C.length;a++)if(Array.isArray(C[a])){var f=C[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let P=1;P<g.length;P++)g[P]=""}}}}return sd(C)}catch{return d}}var Da={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},py;function ud(){}p(ud,ay),ud.prototype.g=function(){return new XMLHttpRequest},py=new ud;function Ri(a){return encodeURIComponent(String(a))}function mC(a){var d=1;a=a.split(":");let f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function xn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.S=g||1,this.V=new bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gy}function gy(){this.i=null,this.g="",this.h=!1}var my={},ld={};function dd(a,d,f){a.M=1,a.A=Ra(Ot(d)),a.u=f,a.R=!0,yy(a,null)}function yy(a,d){a.F=Date.now(),Aa(a),a.B=Ot(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Ny(f.i,"t",g),a.C=0,f=a.j.L,a.h=new gy,a.g=Ky(a.j,f?d:null,!a.u),a.P>0&&(a.O=new uC(l(a.Y,a,a.g),a.P)),d=a.V,f=a.g,g=a.ba;var b="readystatechange";Array.isArray(b)||(b&&(iy[0]=b.toString()),b=iy);for(let C=0;C<b.length;C++){let P=Xm(f,b[C],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.J?Ym(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ci(),fC(a.i,a.v,a.B,a.l,a.S,a.u)}xn.prototype.ba=function(a){a=a.target;let d=this.O;d&&kn(a)==3?d.j():this.Y(a)},xn.prototype.Y=function(a){try{if(a==this.g)e:{let J=kn(this.g),Ae=this.g.ya(),ge=this.g.ca();if(!(J<3)&&(J!=3||this.g&&(this.h.h||this.g.la()||Fy(this.g)))){this.K||J!=4||Ae==7||(Ae==8||ge<=0?Ci(3):Ci(2)),fd(this);var d=this.g.ca();this.X=d;var f=yC(this);if(this.o=d==200,hC(this.i,this.v,this.B,this.l,this.S,J,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(a=C)oo(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hd(this,a);else{this.o=!1,this.m=3,et(12),ir(this),Ni(this);break e}}if(this.R){a=!0;let Ne;for(;!this.K&&this.C<f.length;)if(Ne=vC(this,f),Ne==ld){J==4&&(this.m=4,et(14),a=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ne==my){this.m=4,et(15),oo(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else oo(this.i,this.l,Ne,null),hd(this,Ne);if(vy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J!=4||f.length!=0||this.h.h||(this.m=1,et(16),a=!1),this.o=this.o&&a,!a)oo(this.i,this.l,f,"[Invalid Chunked Response]"),ir(this),Ni(this);else if(f.length>0&&!this.W){this.W=!0;var P=this.j;P.g==this&&P.aa&&!P.P&&(P.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Ed(P),P.P=!0,et(11))}}else oo(this.i,this.l,f,null),hd(this,f);J==4&&ir(this),this.o&&!this.K&&(J==4?zy(this.j,this):(this.o=!1,Aa(this)))}else xC(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),ir(this),Ni(this)}}}catch{}};function yC(a){if(!vy(a))return a.g.la();let d=Fy(a.g);if(d==="")return"";let f="",g=d.length,b=kn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ir(a),Ni(a),"";a.h.i=new s.TextDecoder}for(let C=0;C<g;C++)a.h.h=!0,f+=a.h.i.decode(d[C],{stream:!(b&&C==g-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function vy(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function vC(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?ld:(f=Number(d.substring(f,g)),isNaN(f)?my:(g+=1,g+f>d.length?ld:(d=d.slice(g,g+f),a.C=g+f,d)))}xn.prototype.cancel=function(){this.K=!0,ir(this)};function Aa(a){a.T=Date.now()+a.H,_y(a,a.H)}function _y(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Di(l(a.aa,a),d)}function fd(a){a.D&&(s.clearTimeout(a.D),a.D=null)}xn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(pC(this.i,this.B),this.M!=2&&(Ci(),et(17)),ir(this),this.m=2,Ni(this)):_y(this,this.T-a)};function Ni(a){a.j.I==0||a.K||zy(a.j,a)}function ir(a){fd(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,sy(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function hd(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||pd(f.h,a))){if(!a.L&&pd(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)ka(f),Pa(f);else break e;_d(f),et(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Di(l(f.Va,f),6e3));wy(f.h)<=1&&f.ta&&(f.ta=void 0)}else ar(f,11)}else if((a.L||f.g==a)&&ka(f),!_(d))for(b=f.Ba.g.parse(d),d=0;d<b.length;d++){let ge=b[d],Ne=ge[0];if(!(Ne<=f.K))if(f.K=Ne,ge=ge[1],f.I==2)if(ge[0]=="c"){f.M=ge[1],f.ba=ge[2];let kt=ge[3];kt!=null&&(f.ka=kt,f.j.info("VER="+f.ka));let cr=ge[4];cr!=null&&(f.za=cr,f.j.info("SVER="+f.za));let Ln=ge[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(g=1.5*Ln,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Fn=a.g;if(Fn){let Fa=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var C=g.h;C.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(gd(C,C.h),C.h=null))}if(g.G){let Id=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(g.wa=Id,me(g.J,g.G,Id))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var P=a;if(g.na=Wy(g,g.L?g.ba:null,g.W),P.L){Ty(g.h,P);var J=P,Ae=g.O;Ae&&(J.H=Ae),J.D&&(fd(J),Aa(J)),g.g=P}else Hy(g);f.i.length>0&&Oa(f)}else ge[0]!="stop"&&ge[0]!="close"||ar(f,7);else f.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ar(f,7):vd(f):ge[0]!="noop"&&f.l&&f.l.qa(ge),f.A=0)}}Ci(4)}catch{}}var _C=class{constructor(a,d){this.g=a,this.map=d}};function Ey(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Iy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function wy(a){return a.h?1:a.g?a.g.size:0}function pd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function gd(a,d){a.g?a.g.add(d):a.h=d}function Ty(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ey.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function by(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.G);return d}return y(a.i)}var Sy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EC(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){let g=a[f].indexOf("="),b,C=null;g>=0?(b=a[f].substring(0,g),C=a[f].substring(g+1)):b=a[f],d(b,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Pn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Pn?(this.l=a.l,Mi(this,a.j),this.o=a.o,this.g=a.g,xi(this,a.u),this.h=a.h,md(this,My(a.i)),this.m=a.m):a&&(d=String(a).match(Sy))?(this.l=!1,Mi(this,d[1]||"",!0),this.o=Pi(d[2]||""),this.g=Pi(d[3]||"",!0),xi(this,d[4]),this.h=Pi(d[5]||"",!0),md(this,d[6]||"",!0),this.m=Pi(d[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}Pn.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Oi(d,Cy,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Oi(d,Cy,!0),"@"),a.push(Ri(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Oi(f,f.charAt(0)=="/"?TC:wC,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Oi(f,SC)),a.join("")},Pn.prototype.resolve=function(a){let d=Ot(this),f=!!a.j;f?Mi(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var g=a.h;if(f)xi(d,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let C=[];for(let P=0;P<b.length;){let J=b[P++];J=="."?g&&P==b.length&&C.push(""):J==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&P==b.length&&C.push("")):(C.push(J),g=!0)}g=C.join("/")}else g=b}return f?d.h=g:f=a.i.toString()!=="",f?md(d,My(a.i)):f=!!a.m,f&&(d.m=a.m),d};function Ot(a){return new Pn(a)}function Mi(a,d,f){a.j=f?Pi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function xi(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function md(a,d,f){d instanceof ki?(a.i=d,CC(a.i,a.l)):(f||(d=Oi(d,bC)),a.i=new ki(d,a.l))}function me(a,d,f){a.i.set(d,f)}function Ra(a){return me(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Pi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Oi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,IC),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function IC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Cy=/[#\/\?@]/g,wC=/[#\?:]/g,TC=/[#\?]/g,bC=/[#\?@]/g,SC=/#/g;function ki(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function sr(a){a.g||(a.g=new Map,a.h=0,a.i&&EC(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ki.prototype,t.add=function(a,d){sr(this),this.i=null,a=io(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Dy(a,d){sr(a),d=io(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Ay(a,d){return sr(a),d=io(a,d),a.g.has(d)}t.forEach=function(a,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(b){a.call(d,b,g,this)},this)},this)};function Ry(a,d){sr(a);let f=[];if(typeof d=="string")Ay(a,d)&&(f=f.concat(a.g.get(io(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return sr(this),this.i=null,a=io(this,a),Ay(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=Ry(this,a),a.length>0?String(a[0]):d):d};function Ny(a,d,f){Dy(a,d),f.length>0&&(a.i=null,a.g.set(io(a,d),y(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let b=Ri(f);f=Ry(this,f);for(let C=0;C<f.length;C++){let P=b;f[C]!==""&&(P+="="+Ri(f[C])),a.push(P)}}return this.i=a.join("&")};function My(a){let d=new ki;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function io(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function CC(a,d){d&&!a.j&&(sr(a),a.i=null,a.g.forEach(function(f,g){let b=g.toLowerCase();g!=b&&(Dy(this,g),Ny(this,b,f))},a)),a.j=d}function DC(a,d){let f=new Ai;if(s.Image){let g=new Image;g.onload=h(On,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(On,f,"TestLoadImage: error",!1,d,g),g.onabort=h(On,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(On,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function AC(a,d){let f=new Ai,g=new AbortController,b=setTimeout(()=>{g.abort(),On(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(b),C.ok?On(f,"TestPingServer: ok",!0,d):On(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),On(f,"TestPingServer: error",!1,d)})}function On(a,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function RC(){this.g=new dC}function Na(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Na,ay),Na.prototype.g=function(){return new Ma(this.i,this.h)};function Ma(a,d){Ge.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ma,Ge),t=Ma.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xy(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function xy(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Li(this):Fi(this),this.readyState==3&&xy(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Li(this))},t.Na=function(a){this.g&&(this.response=a,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Fi(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Py(a){let d="";return Ta(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function yd(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Py(f),typeof a=="string"?f!=null&&Ri(f):me(a,d,f))}function _e(a){Ge.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(_e,Ge);var NC=/^https?$/i,MC=["POST","PUT"];t=_e.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():py.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){Oy(this,C);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())f.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),b=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(MC,d,void 0)>=0)||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,P]of f)this.g.setRequestHeader(C,P);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(C){Oy(this,C)}};function Oy(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,ky(a),xa(a)}function ky(a){a.A||(a.A=!0,Xe(a,"complete"),Xe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Xe(this,"complete"),Xe(this,"abort"),xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xa(this,!0)),_e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ly(this):this.Xa())},t.Xa=function(){Ly(this)};function Ly(a){if(a.h&&typeof i<"u"){if(a.v&&kn(a)==4)setTimeout(a.Ca.bind(a),0);else if(Xe(a,"readystatechange"),kn(a)==4){a.h=!1;try{let C=a.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=C===0){let P=String(a.D).match(Sy)[1]||null;!P&&s.self&&s.self.location&&(P=s.self.location.protocol.slice(0,-1)),g=!NC.test(P?P.toLowerCase():"")}f=g}if(f)Xe(a,"complete"),Xe(a,"success");else{a.o=6;try{var b=kn(a)>2?a.g.statusText:""}catch{b=""}a.l=b+" ["+a.ca()+"]",ky(a)}}finally{xa(a)}}}}function xa(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let f=a.g;a.g=null,d||Xe(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),lC(d)}};function Fy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xC(a){let d={};a=(a.g&&kn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=mC(a[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let C=d[b]||[];d[b]=C,C.push(f)}iC(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Vy(a){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,a),this.Za=Vi("retryDelaySeedMs",1e4,a),this.Ta=Vi("forwardChannelMaxRetries",2,a),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ey(a&&a.concurrentRequestLimit),this.Ba=new RC,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Vy.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,g){et(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Wy(this,null,this.W),Oa(this)};function vd(a){if(jy(a),a.I==3){var d=a.V++,f=Ot(a.J);if(me(f,"SID",a.M),me(f,"RID",d),me(f,"TYPE","terminate"),ji(a,f),d=new xn(a,a.j,d),d.M=2,d.A=Ra(Ot(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=Ky(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Aa(d)}Gy(a)}function Pa(a){a.g&&(Ed(a),a.g.cancel(),a.g=null)}function jy(a){Pa(a),a.v&&(s.clearTimeout(a.v),a.v=null),ka(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Oa(a){if(!Iy(a.h)&&!a.m){a.m=!0;var d=a.Ea;Tt||v(),Ue||(Tt(),Ue=!0),w.add(d,a),a.D=0}}function PC(a,d){return wy(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Di(l(a.Ea,a,d),qy(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let b=new xn(this,this.j,a),C=this.o;if(this.U&&(C?(C=Ym(C),Zm(C,this.U)):C=this.U),this.u!==null||this.R||(b.J=C,C=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=By(this,b,d),f=Ot(this.J),me(f,"RID",a),me(f,"CVER",22),this.G&&me(f,"X-HTTP-Session-Id",this.G),ji(this,f),C&&(this.R?d="headers="+Ri(Py(C))+"&"+d:this.u&&yd(f,this.u,C)),gd(this.h,b),this.Ra&&me(f,"TYPE","init"),this.S?(me(f,"$req",d),me(f,"SID","null"),b.U=!0,dd(b,f,null)):dd(b,f,d),this.I=2}}else this.I==3&&(a?Uy(this,a):this.i.length==0||Iy(this.h)||Uy(this))};function Uy(a,d){var f;d?f=d.l:f=a.V++;let g=Ot(a.J);me(g,"SID",a.M),me(g,"RID",f),me(g,"AID",a.K),ji(a,g),a.u&&a.o&&yd(g,a.u,a.o),f=new xn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=By(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),gd(a.h,f),dd(f,g,d)}function ji(a,d){a.H&&Ta(a.H,function(f,g){me(d,g,f)}),a.l&&Ta({},function(f,g){me(d,g,f)})}function By(a,d,f){f=Math.min(a.i.length,f);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var b=a.i;let J=-1;for(;;){let Ae=["count="+f];J==-1?f>0?(J=b[0].g,Ae.push("ofs="+J)):J=0:Ae.push("ofs="+J);let ge=!0;for(let Ne=0;Ne<f;Ne++){var C=b[Ne].g;let kt=b[Ne].map;if(C-=J,C<0)J=Math.max(0,b[Ne].g-100),ge=!1;else try{C="req"+C+"_"||"";try{var P=kt instanceof Map?kt:Object.entries(kt);for(let[cr,Ln]of P){let Fn=Ln;c(Ln)&&(Fn=sd(Ln)),Ae.push(C+cr+"="+encodeURIComponent(Fn))}}catch(cr){throw Ae.push(C+"type="+encodeURIComponent("_badmap")),cr}}catch{g&&g(kt)}}if(ge){P=Ae.join("&");break e}}P=void 0}return a=a.i.splice(0,f),d.G=a,P}function Hy(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;Tt||v(),Ue||(Tt(),Ue=!0),w.add(d,a),a.A=0}}function _d(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Di(l(a.Da,a),qy(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,$y(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Di(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),Pa(this),$y(this))};function Ed(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function $y(a){a.g=new xn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Ot(a.na);me(d,"RID","rpc"),me(d,"SID",a.M),me(d,"AID",a.K),me(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&me(d,"TO",a.ia),me(d,"TYPE","xmlhttp"),ji(a,d),a.u&&a.o&&yd(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Ra(Ot(d)),f.u=null,f.R=!0,yy(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Pa(this),_d(this),et(19))};function ka(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function zy(a,d){var f=null;if(a.g==d){ka(a),Ed(a),a.g=null;var g=2}else if(pd(a.h,d))f=d.G,Ty(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var b=a.D;g=Ca(),Xe(g,new fy(g,f)),Oa(a)}else Hy(a);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&PC(a,d)||g==2&&_d(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),b){case 1:ar(a,5);break;case 4:ar(a,10);break;case 3:ar(a,6);break;default:ar(a,2)}}}function qy(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function ar(a,d){if(a.j.info("Error code "+d),d==2){var f=l(a.bb,a),g=a.Ua;let b=!g;g=new Pn(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Mi(g,"https"),Ra(g),b?DC(g.toString(),f):AC(g.toString(),f)}else et(2);a.I=0,a.l&&a.l.pa(d),Gy(a),jy(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Gy(a){if(a.I=0,a.ja=[],a.l){let d=by(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ja,d),D(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function Wy(a,d,f){var g=f instanceof Pn?Ot(f):new Pn(f);if(g.g!="")d&&(g.g=d+"."+g.g),xi(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let C=new Pn(null);g&&Mi(C,g),d&&(C.g=d),b&&xi(C,b),f&&(C.h=f),g=C}return f=a.G,d=a.wa,f&&d&&me(g,f,d),me(g,"VER",a.ka),ji(a,g),g}function Ky(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new _e(new Na({ab:f})):new _e(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qy(){}t=Qy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function La(){}La.prototype.g=function(a,d){return new ut(a,d)};function ut(a,d){Ge.call(this),this.g=new Vy(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new so(this)}p(ut,Ge),ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){vd(this.g)},ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=sd(a),a=f);d.i.push(new _C(d.Ya++,a)),d.I==3&&Oa(d)},ut.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,ut.Z.N.call(this)};function Yy(a){ad.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(Yy,ad);function Jy(){cd.call(this),this.status=1}p(Jy,cd);function so(a){this.g=a}p(so,Qy),so.prototype.ra=function(){Xe(this.g,"a")},so.prototype.qa=function(a){Xe(this.g,new Yy(a))},so.prototype.pa=function(a){Xe(this.g,new Jy)},so.prototype.oa=function(){Xe(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,Wp=wn.createWebChannelTransport=function(){return new La},Gp=wn.getStatEventTarget=function(){return Ca()},qp=wn.Event=or,Zu=wn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Da.NO_ERROR=0,Da.TIMEOUT=8,Da.HTTP_ERROR=6,ea=wn.ErrorCode=Da,hy.COMPLETE="complete",zp=wn.EventType=hy,cy.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Ko=wn.WebChannel=cy,OP=wn.FetchXmlHttpFactory=Na,_e.prototype.listenOnce=_e.prototype.K,_e.prototype.getLastError=_e.prototype.Ha,_e.prototype.getLastErrorCode=_e.prototype.ya,_e.prototype.getStatus=_e.prototype.ca,_e.prototype.getResponseJson=_e.prototype.La,_e.prototype.getResponseText=_e.prototype.la,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Fa,$p=wn.XhrIo=_e}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var pi="12.8.0";function vb(t){pi=t}var qr=new Wo("@firebase/firestore");function Qo(){return qr.logLevel}function k(t,...e){if(qr.logLevel<=ne.DEBUG){let n=e.map(Sm);qr.debug(`Firestore (${pi}): ${t}`,...n)}}function Sn(t,...e){if(qr.logLevel<=ne.ERROR){let n=e.map(Sm);qr.error(`Firestore (${pi}): ${t}`,...n)}}function er(t,...e){if(qr.logLevel<=ne.WARN){let n=e.map(Sm);qr.warn(`Firestore (${pi}): ${t}`,...n)}}function Sm(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function j(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_b(t,r,n)}function _b(t,e,n){let r=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sn(r),new Error(r)}function de(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||_b(e,o,r)}function q(t,e){return t}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var il=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},Xp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},al=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i,o=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),i=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gt,e.enqueueRetryable(()=>o(this.currentUser))};let s=()=>{let u=i;e.enqueueRetryable(async()=>{await u.promise,await o(this.currentUser)})},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new il(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Ve(e)}},eg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},tg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eg(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ul=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,CT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);let r=i=>{i.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);let s=i.token!==this.m;return this.m=i.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};let o=i=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>o(i)),setTimeout(()=>{if(!this.appCheck){let i=this.V.getImmediate({optional:!0});i?o(i):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cl(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function kP(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gr=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let o=kP(40);for(let i=0;i<o.length;++i)r.length<20&&o[i]<n&&(r+=e.charAt(o[i]%62))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function ng(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let o=t.charAt(r),i=e.charAt(r);if(o!==i)return Kp(o)===Kp(i)?ee(o,i):Kp(o)?1:-1}return ee(t.length,e.length)}var LP=55296,FP=57343;function Kp(t){let e=t.charCodeAt(0);return e>=LP&&e<=FP}function ni(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}var PT="__name__",ll=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&j(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let o=0;o<r;o++){let i=t.compareSegments(e.get(o),n.get(o));if(i!==0)return i}return ee(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),o=t.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?t.extractNumericId(e).compare(t.extractNumericId(n)):ng(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return In.fromString(e.substring(4,e.length-2))}},ve=class t extends ll{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new t(n)}static emptyPath(){return new t([])}},VP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,at=class t extends ll{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return VP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PT}static keyField(){return new t([PT])}static fromServerFormat(e){let n=[],r="",o=0,i=()=>{if(r.length===0)throw new F(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;o<e.length;){let c=e[o];if(c==="\\"){if(o+1===e.length)throw new F(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[o+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,o+=2}else c==="`"?(s=!s,o++):c!=="."||s?(r+=c,o++):(i(),o++)}if(i(),s)throw new F(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var V=class t{constructor(e){this.path=e}static fromPath(e){return new t(ve.fromString(e))}static fromName(e){return new t(ve.fromString(e).popFirst(5))}static empty(){return new t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ve(e.slice()))}};function Eb(t,e,n){if(!n)throw new F(A.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ib(t,e,n,r){if(e===!0&&r===!0)throw new F(A.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OT(t){if(!V.isDocumentKey(t))throw new F(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kT(t){if(V.isDocumentKey(t))throw new F(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j(12329,{type:typeof t})}function gi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=jl(t);throw new F(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Te(t,e){let n={typeString:t};return e&&(n.value=e),n}function mi(t,e){if(!wb(t))throw new F(A.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let o=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(o&&typeof s!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(i!==void 0&&s!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new F(A.INVALID_ARGUMENT,n);return!0}var LT=-62135596800,FT=1e6,be=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FT);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LT)throw new F(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mi(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:Te("string",be._jsonSchemaVersion),seconds:Te("number"),nanoseconds:Te("number")};var W=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new be(0,0))}static max(){return new t(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sa=-1,dl=class{constructor(e,n,r,o){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=o}};dl.UNKNOWN_ID=-1;function jP(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=W.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new Wr(o,V.empty(),e)}function UP(t){return new Wr(t.readTime,t.key,sa)}var Wr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(W.min(),V.empty(),sa)}static max(){return new t(W.max(),V.empty(),sa)}};function BP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}var HP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function yi(t){if(t.code!==A.FAILED_PRECONDITION||t.message!==HP)throw t;k("LocalStore","Unexpectedly lost primary lease")}var N=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,o)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,o)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let o=0,i=0,s=!1;e.forEach(c=>{++o,c.next(()=>{++i,s&&i===o&&n()},u=>r(u))}),s=!0,i===o&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(o=>o?t.resolve(o):r());return n}static forEach(e,n){let r=[];return e.forEach((o,i)=>{r.push(n.call(this,o,i))}),this.waitFor(r)}static mapArray(e,n){return new t((r,o)=>{let i=e.length,s=new Array(i),c=0;for(let u=0;u<i;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===i&&r(s)},h=>o(h))}})}static doWhile(e,n){return new t((r,o)=>{let i=()=>{e()===!0?n().next(()=>{i()},o):r()};i()})}};function $P(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vi(t){return t.name==="IndexedDbTransactionError"}var Cm=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>r.writeSequenceNumber(o))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),Dm=-1;function Ul(t){return t==null}function aa(t){return t===0&&1/t==-1/0}function zP(t){return typeof t=="number"&&Number.isInteger(t)&&!aa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Tb="";function qP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=VT(e)),e=GP(t.get(n),e);return VT(e)}function GP(t,e){let n=e,r=t.length;for(let o=0;o<r;o++){let i=t.charAt(o);switch(i){case"\0":n+="";break;case Tb:n+="";break;default:n+=i}}return n}function VT(t){return t+Tb+""}var WP="remoteDocuments",bb="owner";var Sb="mutationQueues";var Cb="mutations";var Db="documentMutations",KP="remoteDocumentsV14";var Ab="remoteDocumentGlobal";var Rb="targets";var Nb="targetDocuments";var Mb="targetGlobal",xb="collectionParents";var Pb="clientMetadata";var Ob="bundles";var kb="namedQueries";var QP="indexConfiguration";var YP="indexState";var JP="indexEntries";var Lb="documentOverlays";var ZP="globals";var XP=[Sb,Cb,Db,WP,Rb,bb,Mb,Nb,Pb,Ab,xb,Ob,kb],Q3=[...XP,Lb],eO=[Sb,Cb,Db,KP,Rb,bb,Mb,Nb,Pb,Ab,xb,Ob,kb,Lb],tO=eO,nO=[...tO,QP,YP,JP];var Y3=[...nO,ZP];function jT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ie=class t{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xo(this.root,e,this.comparator,!0)}},Xo=class{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&o&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wt=class t{constructor(e,n,r,o,i){this.key=e,this.value=n,this.color=r??t.RED,this.left=o??t.EMPTY,this.right=i??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,i){return new t(e??this.key,n??this.value,r??this.color,o??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this,i=r(e,o.key);return o=i<0?o.copy(null,null,null,o.left.insert(e,n,r),null):i===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,n,r,o,i){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class t{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fl(this.data.getIterator())}getIteratorFrom(e){return new fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let o=n.getNext().key,i=r.getNext().key;if(this.comparator(o,i)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},fl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qt=class t{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new t([])}unionWith(e){let n=new je(at.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var hl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(o){try{return atob(o)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hl("Invalid base64 string: "+i):i}})(e);return new t(n)}static fromUint8Array(e){let n=(function(o){let i="";for(let s=0;s<o.length;++s)i+=String.fromCharCode(o[s]);return i})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var rO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(t){if(de(!!t,39018),typeof t=="string"){let e=0,n=rO.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ye(t.seconds),nanos:ye(t.nanos)}}function ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dn(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}var Vb="server_timestamp",jb="__type__",Ub="__previous_value__",Bb="__local_write_time__";function Bl(t){return(t?.mapValue?.fields||{})[jb]?.stringValue===Vb}function Hl(t){let e=t.mapValue.fields[Ub];return Bl(e)?Hl(e):e}function ca(t){let e=Cn(t.mapValue.fields[Bb].timestampValue);return new be(e.seconds,e.nanos)}var og=class{constructor(e,n,r,o,i,s,c,u,l,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h,this.apiKey=p}},pl="(default)",ua=class t{constructor(e,n){this.projectId=e,this.database=n||pl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===pl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function Hb(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new F(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(t.options.projectId,e)}var Am="__type__",$b="__max__",Xu={mapValue:{fields:{__type__:{stringValue:$b}}}},Rm="__vector__",ri="value";function tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bl(t)?4:qb(t)?9007199254740991:zb(t)?10:11:j(28295,{value:t})}function Zt(t,e){if(t===e)return!0;let n=tr(t);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return(function(o,i){if(typeof o.timestampValue=="string"&&typeof i.timestampValue=="string"&&o.timestampValue.length===i.timestampValue.length)return o.timestampValue===i.timestampValue;let s=Cn(o.timestampValue),c=Cn(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(o,i){return Dn(o.bytesValue).isEqual(Dn(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(o,i){return ye(o.geoPointValue.latitude)===ye(i.geoPointValue.latitude)&&ye(o.geoPointValue.longitude)===ye(i.geoPointValue.longitude)})(t,e);case 2:return(function(o,i){if("integerValue"in o&&"integerValue"in i)return ye(o.integerValue)===ye(i.integerValue);if("doubleValue"in o&&"doubleValue"in i){let s=ye(o.doubleValue),c=ye(i.doubleValue);return s===c?aa(s)===aa(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return ni(t.arrayValue.values||[],e.arrayValue.values||[],Zt);case 10:case 11:return(function(o,i){let s=o.mapValue.fields||{},c=i.mapValue.fields||{};if(jT(s)!==jT(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Zt(s[u],c[u])))return!1;return!0})(t,e);default:return j(52216,{left:t})}}function la(t,e){return(t.values||[]).find(n=>Zt(n,e))!==void 0}function oi(t,e){if(t===e)return 0;let n=tr(t),r=tr(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return(function(i,s){let c=ye(i.integerValue||i.doubleValue),u=ye(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return UT(t.timestampValue,e.timestampValue);case 4:return UT(ca(t),ca(e));case 5:return ng(t.stringValue,e.stringValue);case 6:return(function(i,s){let c=Dn(i),u=Dn(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(i,s){let c=i.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ee(c[l],u[l]);if(h!==0)return h}return ee(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,s){let c=ee(ye(i.latitude),ye(s.latitude));return c!==0?c:ee(ye(i.longitude),ye(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BT(t.arrayValue,e.arrayValue);case 10:return(function(i,s){let c=i.fields||{},u=s.fields||{},l=c[ri]?.arrayValue,h=u[ri]?.arrayValue,p=ee(l?.values?.length||0,h?.values?.length||0);return p!==0?p:BT(l,h)})(t.mapValue,e.mapValue);case 11:return(function(i,s){if(i===Xu.mapValue&&s===Xu.mapValue)return 0;if(i===Xu.mapValue)return 1;if(s===Xu.mapValue)return-1;let c=i.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ng(u[p],h[p]);if(m!==0)return m;let y=oi(c[u[p]],l[h[p]]);if(y!==0)return y}return ee(u.length,h.length)})(t.mapValue,e.mapValue);default:throw j(23264,{he:n})}}function UT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=Cn(t),r=Cn(e),o=ee(n.seconds,r.seconds);return o!==0?o:ee(n.nanos,r.nanos)}function BT(t,e){let n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){let i=oi(n[o],r[o]);if(i)return i}return ee(n.length,r.length)}function ii(t){return ig(t)}function ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Cn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Dn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return V.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",o=!0;for(let i of n.values||[])o?o=!1:r+=",",r+=ig(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),o="{",i=!0;for(let s of r)i?i=!1:o+=",",o+=`${s}:${ig(n.fields[s])}`;return o+"}"})(t.mapValue):j(61005,{value:t})}function nl(t){switch(tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Hl(t);return e?16+nl(e):16;case 5:return 2*t.stringValue.length;case 6:return Dn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((o,i)=>o+nl(i),0)})(t.arrayValue);case 10:case 11:return(function(r){let o=0;return no(r.fields,(i,s)=>{o+=i.length+nl(s)}),o})(t.mapValue);default:throw j(13486,{value:t})}}function sg(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function HT(t){return!!t&&"nullValue"in t}function $T(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rl(t){return!!t&&"mapValue"in t}function zb(t){return(t?.mapValue?.fields||{})[Am]?.stringValue===Rm}function ra(t){if(t.geoPointValue)return{geoPointValue:x({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:x({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ra(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return x({},t)}function qb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$b}var Z3={mapValue:{fields:{[Am]:{stringValue:Rm},[ri]:{arrayValue:{}}}}};var wt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=at.emptyPath(),r={},o=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,o),r={},o=[],n=c.popLast()}s?r[c.lastSegment()]=ra(s):o.push(c.lastSegment())});let i=this.getFieldsMap(n);this.applyChanges(i,r,o)}delete(e){let n=this.field(e.popLast());rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];rl(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){no(n,(o,i)=>e[o]=i);for(let o of r)delete e[o]}clone(){return new t(ra(this.value))}};function Gb(t){let e=[];return no(t.fields,(n,r)=>{let o=new at([n]);if(rl(r)){let i=Gb(r.mapValue).fields;if(i.length===0)e.push(o);else for(let s of i)e.push(o.child(s))}else e.push(o)}),new qt(e)}var xt=class t{constructor(e,n,r,o,i,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,W.min(),W.min(),W.min(),wt.empty(),0)}static newFoundDocument(e,n,r,o){return new t(e,1,n,W.min(),r,o,0)}static newNoDocument(e,n){return new t(e,2,n,W.min(),W.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,W.min(),W.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Kr=class{constructor(e,n){this.position=e,this.inclusive=n}};function zT(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){let i=e[o],s=t.position[o];if(i.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),n.key):r=oi(s,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zt(t.position[n],e.position[n]))return!1;return!0}var Qr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function oO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gl=class{},De=class t extends gl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cg(e,n,r):n==="array-contains"?new dg(e,r):n==="in"?new fg(e,r):n==="not-in"?new hg(e,r):n==="array-contains-any"?new pg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ug(e,r):new lg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oi(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pt=class t extends gl{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return Wb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Wb(t){return t.op==="and"}function Kb(t){return iO(t)&&Wb(t)}function iO(t){for(let e of t.filters)if(e instanceof Pt)return!1;return!0}function ag(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+ii(t.value);if(Kb(t))return t.filters.map(e=>ag(e)).join(",");{let e=t.filters.map(n=>ag(n)).join(",");return`${t.op}(${e})`}}function Qb(t,e){return t instanceof De?(function(r,o){return o instanceof De&&r.op===o.op&&r.field.isEqual(o.field)&&Zt(r.value,o.value)})(t,e):t instanceof Pt?(function(r,o){return o instanceof Pt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((i,s,c)=>i&&Qb(s,o.filters[c]),!0):!1})(t,e):void j(19439)}function Yb(t){return t instanceof De?(function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`})(t):t instanceof Pt?(function(n){return n.op.toString()+" {"+n.getFilters().map(Yb).join(" ,")+"}"})(t):"Filter"}var cg=class extends De{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.matchesComparison(n)}},ug=class extends De{constructor(e,n){super(e,"in",n),this.keys=Jb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},lg=class extends De{constructor(e,n){super(e,"not-in",n),this.keys=Jb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Jb(t,e){return(e.arrayValue?.values||[]).map(n=>V.fromName(n.referenceValue))}var dg=class extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Nm(n)&&la(n.arrayValue,this.value)}},fg=class extends De{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&la(this.value.arrayValue,n)}},hg=class extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!la(this.value.arrayValue,n)}},pg=class extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>la(this.value.arrayValue,r))}};var gg=class{constructor(e,n=null,r=[],o=[],i=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=i,this.startAt=s,this.endAt=c,this.Te=null}};function GT(t,e=null,n=[],r=[],o=null,i=null,s=null){return new gg(t,e,n,r,o,i,s)}function Mm(t){let e=q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ag(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(i){return i.field.canonicalString()+i.dir})(r)).join(","),Ul(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ii(r)).join(",")),e.Te=n}return e.Te}function xm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Qb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qT(t.startAt,e.startAt)&&qT(t.endAt,e.endAt)}function mg(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var si=class{constructor(e,n=null,r=[],o=[],i=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=i,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function sO(t,e,n,r,o,i,s,c){return new si(t,e,n,r,o,i,s,c)}function Pm(t){return new si(t)}function WT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aO(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zb(t){return t.collectionGroup!==null}function ei(t){let e=q(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new je(at.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qr(i,r))}),n.has(at.keyField().canonicalString())||e.Ie.push(new Qr(at.keyField(),r))}return e.Ie}function Kt(t){let e=q(t);return e.Ee||(e.Ee=cO(e,ei(t))),e.Ee}function cO(t,e){if(t.limitType==="F")return GT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{let i=o.dir==="desc"?"asc":"desc";return new Qr(o.field,i)});let n=t.endAt?new Kr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kr(t.startAt.position,t.startAt.inclusive):null;return GT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ml(t,e,n){return new si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return xm(Kt(t),Kt(e))&&t.limitType===e.limitType}function Xb(t){return`${Mm(Kt(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>Yb(o)).join(", ")}]`),Ul(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>ii(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>ii(o)).join(",")),`Target(${r})`})(Kt(t))}; limitType=${t.limitType})`}function zl(t,e){return e.isFoundDocument()&&(function(r,o){let i=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):V.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,o){for(let i of ei(r))if(!i.field.isKeyField()&&o.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,o){for(let i of r.filters)if(!i.matches(o))return!1;return!0})(t,e)&&(function(r,o){return!(r.startAt&&!(function(s,c,u){let l=zT(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,ei(r),o)||r.endAt&&!(function(s,c,u){let l=zT(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,ei(r),o))})(t,e)}function uO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eS(t){return(e,n)=>{let r=!1;for(let o of ei(t)){let i=lO(o,e,n);if(i!==0)return i;r=r||o.field.isKeyField()}return 0}}function lO(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):(function(i,s,c){let u=s.data.field(i),l=c.data.field(i);return u!==null&&l!==null?oi(u,l):j(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:t.dir})}}var An=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[o,i]of r)if(this.equalsFn(o,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],e))return void(o[i]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(let[o,i]of r)e(o,i)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}};var dO=new Ie(V.comparator);function Rn(){return dO}var tS=new Ie(V.comparator);function na(...t){let e=tS;for(let n of t)e=e.insert(n.key,n);return e}function nS(t){let e=tS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $r(){return oa()}function rS(){return oa()}function oa(){return new An(t=>t.toString(),(t,e)=>t.isEqual(e))}var fO=new Ie(V.comparator),hO=new je(V.comparator);function X(...t){let e=hO;for(let n of t)e=e.add(n);return e}var pO=new je(ee);function gO(){return pO}function Om(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function oS(t){return{integerValue:""+t}}function mO(t,e){return zP(e)?oS(e):Om(t,e)}var ai=class{constructor(){this._=void 0}};function yO(t,e,n){return t instanceof ci?(function(o,i){let s={fields:{[jb]:{stringValue:Vb},[Bb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return i&&Bl(i)&&(i=Hl(i)),i&&(s.fields[Ub]=i),{mapValue:s}})(n,e):t instanceof Yr?sS(t,e):t instanceof Jr?aS(t,e):(function(o,i){let s=iS(o,i),c=KT(s)+KT(o.Ae);return sg(s)&&sg(o.Ae)?oS(c):Om(o.serializer,c)})(t,e)}function vO(t,e,n){return t instanceof Yr?sS(t,e):t instanceof Jr?aS(t,e):n}function iS(t,e){return t instanceof ui?(function(r){return sg(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}var ci=class extends ai{},Yr=class extends ai{constructor(e){super(),this.elements=e}};function sS(t,e){let n=cS(e);for(let r of t.elements)n.some(o=>Zt(o,r))||n.push(r);return{arrayValue:{values:n}}}var Jr=class extends ai{constructor(e){super(),this.elements=e}};function aS(t,e){let n=cS(e);for(let r of t.elements)n=n.filter(o=>!Zt(o,r));return{arrayValue:{values:n}}}var ui=class extends ai{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function KT(t){return ye(t.integerValue||t.doubleValue)}function cS(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _O(t,e){return t.field.isEqual(e.field)&&(function(r,o){return r instanceof Yr&&o instanceof Yr||r instanceof Jr&&o instanceof Jr?ni(r.elements,o.elements,Zt):r instanceof ui&&o instanceof ui?Zt(r.Ae,o.Ae):r instanceof ci&&o instanceof ci})(t.transform,e.transform)}var yg=class{constructor(e,n){this.version=e,this.transformResults=n}},Xn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var li=class{};function uS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new da(t.key,Xn.none()):new Zr(t.key,t.data,Xn.none());{let n=t.data,r=wt.empty(),o=new je(at.comparator);for(let i of e.fields)if(!o.has(i)){let s=n.field(i);s===null&&i.length>1&&(i=i.popLast(),s=n.field(i)),s===null?r.delete(i):r.set(i,s),o=o.add(i)}return new Nn(t.key,r,new qt(o.toArray()),Xn.none())}}function EO(t,e,n){t instanceof Zr?(function(o,i,s){let c=o.value.clone(),u=YT(o.fieldTransforms,i,s.transformResults);c.setAll(u),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Nn?(function(o,i,s){if(!ol(o.precondition,i))return void i.convertToUnknownDocument(s.version);let c=YT(o.fieldTransforms,i,s.transformResults),u=i.data;u.setAll(lS(o)),u.setAll(c),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(o,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function ia(t,e,n,r){return t instanceof Zr?(function(i,s,c,u){if(!ol(i.precondition,s))return c;let l=i.value.clone(),h=JT(i.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Nn?(function(i,s,c,u){if(!ol(i.precondition,s))return c;let l=JT(i.fieldTransforms,u,s),h=s.data;return h.setAll(lS(i)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(i,s,c){return ol(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function IO(t,e){let n=null;for(let r of t.fieldTransforms){let o=e.data.field(r.field),i=iS(r.transform,o||null);i!=null&&(n===null&&(n=wt.empty()),n.set(r.field,i))}return n||null}function QT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ni(r,o,(i,s)=>_O(i,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zr=class extends li{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}},Nn=class extends li{constructor(e,n,r,o,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function lS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function YT(t,e,n){let r=new Map;de(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let o=0;o<n.length;o++){let i=t[o],s=i.transform,c=e.data.field(i.field);r.set(i.field,vO(s,c,n[o]))}return r}function JT(t,e,n){let r=new Map;for(let o of t){let i=o.transform,s=n.data.field(o.field);r.set(o.field,yO(i,s,e))}return r}var da=class extends li{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vg=class extends li{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _g=class{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){let i=this.mutations[o];i.key.isEqual(e.key)&&EO(i,e,r[o])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ia(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=rS();return this.mutations.forEach(o=>{let i=e.get(o.key),s=i.overlayedDocument,c=this.applyToLocalView(s,i.mutatedFields);c=n.has(o.key)?null:c;let u=uS(s,c);u!==null&&r.set(o.key,u),s.isValidDocument()||s.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,(n,r)=>QT(n,r))&&ni(this.baseMutations,e.baseMutations,(n,r)=>QT(n,r))}},Eg=class t{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return fO})(),i=e.mutations;for(let s=0;s<i.length;s++)o=o.insert(i[s].key,r[s].version);return new t(e,n,r,o)}};var Ig=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Se,re;function wO(t){switch(t){case A.OK:return j(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return j(15467,{code:t})}}function dS(t){if(t===void 0)return Sn("GRPC error has no .code"),A.UNKNOWN;switch(t){case Se.OK:return A.OK;case Se.CANCELLED:return A.CANCELLED;case Se.UNKNOWN:return A.UNKNOWN;case Se.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Se.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Se.INTERNAL:return A.INTERNAL;case Se.UNAVAILABLE:return A.UNAVAILABLE;case Se.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Se.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Se.NOT_FOUND:return A.NOT_FOUND;case Se.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Se.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Se.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Se.ABORTED:return A.ABORTED;case Se.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Se.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Se.DATA_LOSS:return A.DATA_LOSS;default:return j(39323,{code:t})}}(re=Se||(Se={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var TO=null;function bO(){return new TextEncoder}var SO=new In([4294967295,4294967295],0);function ZT(t){let e=bO().encode(t),n=new Hp;return n.update(e),new Uint8Array(n.digest())}function XT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new In([n,r],0),new In([o,i],0)]}var Tg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zr(`Invalid padding: ${n}`);if(r<0)throw new zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zr(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=In.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(In.fromNumber(r)));return o.compare(SO)===1&&(o=new In([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=ZT(e),[r,o]=XT(n);for(let i=0;i<this.hashCount;i++){let s=this.ye(r,o,i);if(!this.we(s))return!1}return!0}static create(e,n,r){let o=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new t(i,o,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=ZT(e),[r,o]=XT(n);for(let i=0;i<this.hashCount;i++){let s=this.ye(r,o,i);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yl=class t{constructor(e,n,r,o,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let o=new Map;return o.set(e,fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(W.min(),o,new Ie(ee),Rn(),X())}},fa=class t{constructor(e,n,r,o,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,X(),X(),X())}};var ti=class{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}},vl=class{constructor(e,n){this.targetId=e,this.Ce=n}},_l=class{constructor(e,n,r=qe.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}},El=class{constructor(){this.ve=0,this.Fe=eb(),this.Me=qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=X(),n=X(),r=X();return this.Fe.forEach((o,i)=>{switch(i){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:j(38017,{changeType:i})}}),new fa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=eb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},bg=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.He=el(),this.Je=el(),this.Ze=new Ie(ee)}Xe(e){for(let n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,o)=>{this.rt(o)&&n(o)})}st(e){let n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){let i=o.target;if(mg(i))if(r===0){let s=new V(i.path);this.et(n,s,xt.newNoDocument(s,W.min()))}else de(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}TO?.lt((function(h,p,m,y,D){let R={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},M=p.unchangedNames;return M&&(R.bloomFilter={applied:D===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),R})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:o=0},hashCount:i=0}=n,s,c;try{s=Dn(r).toUint8Array()}catch(u){if(u instanceof hl)return er("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Tg(s,o,i)}catch(u){return er(u instanceof zr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),o=0;return r.forEach(i=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),o++)}),o}Tt(e){let n=new Map;this.ze.forEach((i,s)=>{let c=this.ot(s);if(c){if(i.current&&mg(c.target)){let u=new V(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,xt.newNoDocument(u,e))}i.Be&&(n.set(s,i.ke()),i.Ke())}});let r=X();this.Je.forEach((i,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));let o=new yl(e,n,this.Ze,this.je,r);return this.je=Rn(),this.He=el(),this.Je=el(),this.Ze=new Ie(ee),o}Ye(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new El,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new je(ee),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new je(ee),this.He=this.He.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new El),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function el(){return new Ie(V.comparator)}function eb(){return new Ie(V.comparator)}var CO={asc:"ASCENDING",desc:"DESCENDING"},DO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO={and:"AND",or:"OR"},Sg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Cg(t,e){return t.useProto3Json||Ul(e)?e:{value:e}}function Il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RO(t,e){return Il(t,e.toTimestamp())}function Qt(t){return de(!!t,49232),W.fromTimestamp((function(n){let r=Cn(n);return new be(r.seconds,r.nanos)})(t))}function km(t,e){return Dg(t,e).canonicalString()}function Dg(t,e){let n=(function(o){return new ve(["projects",o.projectId,"databases",o.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hS(t){let e=ve.fromString(t);return de(vS(e),10190,{key:e.toString()}),e}function Ag(t,e){return km(t.databaseId,e.path)}function Qp(t,e){let n=hS(e);if(n.get(1)!==t.databaseId.projectId)throw new F(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(gS(n))}function pS(t,e){return km(t.databaseId,e)}function NO(t){let e=hS(t);return e.length===4?ve.emptyPath():gS(e)}function Rg(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gS(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tb(t,e,n){return{name:Ag(t,e),fields:n.value.mapValue.fields}}function MO(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],i=(function(l,h){return l.useProto3Json?(de(h===void 0||typeof h=="string",58123),qe.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),qe.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?A.UNKNOWN:dS(l.code);return new F(h,l.message||"")})(s);n=new _l(r,o,i,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let o=Qp(t,r.document.name),i=Qt(r.document.updateTime),s=r.document.createTime?Qt(r.document.createTime):W.min(),c=new wt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(o,i,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ti(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let o=Qp(t,r.document),i=r.readTime?Qt(r.readTime):W.min(),s=xt.newNoDocument(o,i),c=r.removedTargetIds||[];n=new ti([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let o=Qp(t,r.document),i=r.removedTargetIds||[];n=new ti([],i,o,null)}else{if(!("filter"in e))return j(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:o=0,unchangedNames:i}=r,s=new wg(o,i),c=r.targetId;n=new vl(c,s)}}return n}function xO(t,e){let n;if(e instanceof Zr)n={update:tb(t,e.key,e.value)};else if(e instanceof da)n={delete:Ag(t,e.key)};else if(e instanceof Nn)n={update:tb(t,e.key,e.data),updateMask:BO(e.fieldMask)};else{if(!(e instanceof vg))return j(16599,{dt:e.type});n={verify:Ag(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(i,s){let c=s.transform;if(c instanceof ci)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ui)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw j(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(o,i){return i.updateTime!==void 0?{updateTime:RO(o,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:j(27497)})(t,e.precondition)),n}function PO(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>(function(o,i){let s=o.updateTime?Qt(o.updateTime):Qt(i);return s.isEqual(W.min())&&(s=Qt(i)),new yg(s,o.transformResults||[])})(n,e))):[]}function OO(t,e){return{documents:[pS(t,e.path)]}}function kO(t,e){let n={structuredQuery:{}},r=e.path,o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pS(t,o);let i=(function(l){if(l.length!==0)return yS(Pt.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Jo(m.field),direction:VO(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Cg(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:o}}function LO(t){let e=NO(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,o=null;if(r>0){de(r===1,65062);let h=n.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(p){let m=mS(p);return m instanceof Pt&&Kb(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(D){return new Qr(Zo(D.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Ul(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Kr(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Kr(y,m)})(n.endAt)),sO(e,o,s,i,c,"F",u,l)}function FO(t,e){let n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Zo(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":let o=Zo(n.unaryFilter.field);return De.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=Zo(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zo(n.unaryFilter.field);return De.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}})(t):t.fieldFilter!==void 0?(function(n){return De.create(Zo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Pt.create(n.compositeFilter.filters.map(r=>mS(r)),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return j(1026)}})(n.compositeFilter.op))})(t):j(30097,{filter:t})}function VO(t){return CO[t]}function jO(t){return DO[t]}function UO(t){return AO[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function Zo(t){return at.fromServerFormat(t.fieldPath)}function yS(t){return t instanceof De?(function(n){if(n.op==="=="){if($T(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NAN"}};if(HT(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($T(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NAN"}};if(HT(n.value))return{unaryFilter:{field:Jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(n.field),op:jO(n.op),value:n.value}}})(t):t instanceof Pt?(function(n){let r=n.getFilters().map(o=>yS(o));return r.length===1?r[0]:{compositeFilter:{op:UO(n.op),filters:r}}})(t):j(54877,{filter:t})}function BO(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function _S(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}var ha=class t{constructor(e,n,r,o,i=W.min(),s=W.min(),c=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ng=class{constructor(e){this.yt=e}};function ES(t){let e=LO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ml(e,e.limit,"L"):e}var wl=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ye(e.integerValue));else if("doubleValue"in e){let r=ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),aa(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Cn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Dn(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?qb(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):zb(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):j(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){let r=e.fields||{};this.Ft(n,55);for(let o of Object.keys(r))this.Ot(o,n),this.Ct(r[o],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let o=ri,i=r[o].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ye(i)),this.Ot(o,n),this.Ct(r[o],n)}qt(e,n){let r=e.values||[];this.Ft(n,50);for(let o of r)this.Ct(o,n)}Lt(e,n){this.Ft(n,37),V.fromName(e).path.forEach(r=>{this.Ft(n,60),this.$t(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};wl.Wt=new wl;var Mg=class{constructor(){this.Sn=new xg}addToCollectionParentIndex(e,n){return this.Sn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Wr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}},xg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new je(ve.comparator),i=!o.has(r);return this.index[n]=o.add(r),i}has(e){let n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new je(ve.comparator)).toArray()}};var X3=new Uint8Array(0);var nb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IS=41943040,It=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(IS,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);var pa=class t{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new t(0)}static ar(){return new t(-1)}};var rb="LruGarbageCollector",HO=1048576;function ob([t,e],[n,r]){let o=ee(t,n);return o===0?ee(e,r):o}var Pg=class{constructor(e){this.Pr=e,this.buffer=new je(ob),this.Tr=0}Ir(){return++this.Tr}Er(e){let n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();ob(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Og=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){k(rb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vi(n)?k(rb,"Ignoring IndexedDB error during garbage collection: ",n):await yi(n)}await this.Ar(3e5)})}},kg=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(Cm.ce);let r=new Pg(n);return this.Vr.forEachTarget(e,o=>r.Er(o.sequenceNumber)).next(()=>this.Vr.mr(e,o=>r.Er(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(nb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nb):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,i,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,s=Date.now(),this.nthSequenceNumber(e,o))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Qo()<=ne.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${o} in `+(c-s)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:i,documentsRemoved:p})))}};function $O(t,e){return new kg(t,e)}var Lg=class{constructor(){this.changes=new An(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Vg=class{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&ia(r.mutation,o,qt.empty(),be.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){let o=$r();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(i=>{let s=na();return i.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){let o=[];return r.forEach(i=>{n.has(i)||o.push(i)}),this.documentOverlayCache.getOverlays(e,o).next(i=>{i.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,o){let i=Rn(),s=oa(),c=(function(){return oa()})();return n.forEach((u,l)=>{let h=r.get(l.key);o.has(l.key)&&(h===void 0||h.mutation instanceof Nn)?i=i.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ia(h.mutation,l,h.mutation.getFieldMask(),be.now())):s.set(l.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>c.set(l,new Fg(h,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=oa(),o=new Ie((s,c)=>s-c),i=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||qt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(o.get(c.batchId)||X()).add(u);o=o.insert(c.batchId,p)})}).next(()=>{let s=[],c=o.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=rS();h.forEach(m=>{if(!i.has(m)){let y=uS(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return aO(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(i=>{let s=o-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-i.size):N.resolve($r()),c=sa,u=i;return s.next(l=>N.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(h)?N.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,u,l,X())).next(h=>({batchId:c,changes:nS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let o=na();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){let i=n.collectionGroup,s=na();return this.indexManager.getCollectionParents(e,i).next(c=>N.forEach(c,u=>{let l=(function(p,m){return new si(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,o).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,o){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,o))).next(s=>{i.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,xt.newInvalidDocument(h)))});let c=na();return s.forEach((u,l)=>{let h=i.get(u);h!==void 0&&ia(h.mutation,l,qt.empty(),be.now()),zl(n,l)&&(c=c.insert(u,l))}),c})}};var jg=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return N.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Qt(o.createTime)}})(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:ES(o.bundledQuery),readTime:Qt(o.readTime)}})(n)),N.resolve()}};var Ug=class{constructor(){this.overlays=new Ie(V.comparator),this.Lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){let r=$r();return N.forEach(n,o=>this.getOverlay(e,o).next(i=>{i!==null&&r.set(o,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,i)=>{this.bt(e,n,i)}),N.resolve()}removeOverlaysForBatchId(e,n,r){let o=this.Lr.get(r);return o!==void 0&&(o.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){let o=$r(),i=n.length+1,s=new V(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&u.largestBatchId>r&&o.set(u.getKey(),u)}return N.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let i=new Ie((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=i.get(l.largestBatchId);h===null&&(h=$r(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=$r(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=o)););return N.resolve(c)}bt(e,n,r){let o=this.overlays.get(r.key);if(o!==null){let s=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ig(n,r));let i=this.Lr.get(n);i===void 0&&(i=X(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}};var Bg=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,N.resolve()}};var ga=class{constructor(){this.kr=new je(Ce.Kr),this.qr=new je(Ce.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){let r=new Ce(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ce(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){let n=new V(new ve([])),r=new Ce(n,e),o=new Ce(n,e+1),i=[];return this.qr.forEachInRange([r,o],s=>{this.Wr(s),i.push(s.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let n=new V(new ve([])),r=new Ce(n,e),o=new Ce(n,e+1),i=X();return this.qr.forEachInRange([r,o],s=>{i=i.add(s.key)}),i}containsKey(e){let n=new Ce(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ce=class{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return V.comparator(e.key,n.key)||ee(e.Hr,n.Hr)}static Ur(e,n){return ee(e.Hr,n.Hr)||V.comparator(e.key,n.key)}};var Hg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new je(Ce.Kr)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _g(i,n,r,o);this.mutationQueue.push(s);for(let c of o)this.Jr=this.Jr.add(new Ce(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,n){return N.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,o=this.Xr(r),i=o<0?0:o;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?Dm:this.Yn-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ce(n,0),o=new Ce(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,o],s=>{let c=this.Zr(s.Hr);i.push(c)}),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(ee);return n.forEach(o=>{let i=new Ce(o,0),s=new Ce(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,s],c=>{r=r.add(c.Hr)})}),N.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,o=r.length+1,i=r;V.isDocumentKey(i)||(i=i.child(""));let s=new Ce(new V(i),0),c=new je(ee);return this.Jr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===o&&(c=c.add(u.Hr)),!0)},s),N.resolve(this.Yr(c))}Yr(e){let n=[];return e.forEach(r=>{let o=this.Zr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){de(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return N.forEach(n.mutations,o=>{let i=new Ce(o.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){let r=new Ce(n,0),o=this.Jr.firstAfterOrEqual(r);return N.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $g=class{constructor(e){this.ti=e,this.docs=(function(){return new Ie(V.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,o=this.docs.get(r),i=o?o.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(o=>{let i=this.docs.get(o);r=r.insert(o,i?i.document.mutableCopy():xt.newInvalidDocument(o))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let i=Rn(),s=n.path,c=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||BP(UP(h),r)<=0||(o.has(h.key)||zl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return N.resolve(i)}getAllFromCollectionGroup(e,n,r,o){j(9500)}ni(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zg(this)}getSize(e){return N.resolve(this.size)}},zg=class extends Lg{constructor(e){super(),this.Mr=e}applyChanges(e){let n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}};var qg=class{constructor(e){this.persistence=e,this.ri=new An(n=>Mm(n),xm),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.ii=0,this.si=new ga,this.targetCount=0,this.oi=pa._r()}forEachTarget(e,n){return this.ri.forEach((r,o)=>n(o)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),N.resolve()}lr(e){this.ri.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.oi=new pa(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.lr(n),N.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let o=0,i=[];return this.ri.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(s),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),o++)}),N.waitFor(i).next(()=>o)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){let r=this.ri.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);let o=this.persistence.referenceDelegate,i=[];return o&&n.forEach(s=>{i.push(o.markPotentiallyOrphaned(e,s))}),N.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),N.resolve()}getMatchingKeysForTargetId(e,n){let r=this.si.jr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.si.containsKey(n))}};var Tl=class{constructor(e,n){this._i={},this.overlays={},this.ai=new Cm(0),this.ui=!1,this.ui=!0,this.ci=new Bg,this.referenceDelegate=e(this),this.li=new qg(this),this.indexManager=new Mg,this.remoteDocumentCache=(function(o){return new $g(o)})(r=>this.referenceDelegate.hi(r)),this.serializer=new Ng(n),this.Pi=new jg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ug,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Hg(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let o=new Gg(this.ai.next());return this.referenceDelegate.Ti(),r(o).next(i=>this.referenceDelegate.Ii(o).next(()=>i)).toPromise().then(i=>(o.raiseOnCommittedEvent(),i))}Ei(e,n){return N.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}},Gg=class extends rg{constructor(e){super(),this.currentSequenceNumber=e}},Wg=class t{constructor(e){this.persistence=e,this.Ri=new ga,this.Ai=null}static Vi(e){return new t(e)}get di(){if(this.Ai)return this.Ai;throw j(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),N.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(o=>this.di.add(o.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.di,r=>{let o=V.fromPath(r);return this.mi(e,o).next(i=>{i||n.removeEntry(o,W.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return N.or([()=>N.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},bl=class t{constructor(e,n){this.persistence=e,this.fi=new An(r=>qP(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=$O(this,n)}static Vi(e,n){return new t(e,n)}Ti(){}Ii(e){return N.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return N.forEach(this.fi,(r,o)=>this.wr(e,r,o).next(i=>i?N.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,o=this.persistence.getRemoteDocumentCache(),i=o.newChangeBuffer();return o.ni(e,s=>this.wr(e,s,n).next(c=>{c||(r++,i.removeEntry(s,W.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),N.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),N.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nl(e.data.value)),n}wr(e,n,r){return N.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let o=this.fi.get(n);return N.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Kg=class t{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=X(),o=X();for(let i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:o=o.add(i.doc.key)}return new t(e,n.fromCache,r,o)}};var Qg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yg=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dT()?8:$P(lT())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){let i={result:null};return this.gs(e,n).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ps(e,n,o,r).next(s=>{i.result=s})}).next(()=>{if(i.result)return;let s=new Qg;return this.ys(e,n,s).next(c=>{if(i.result=c,this.As)return this.ws(e,n,s,c.size)})}).next(()=>i.result)}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Qo()<=ne.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),N.resolve()):(Qo()<=ne.DEBUG&&k("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Qo()<=ne.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):N.resolve())}gs(e,n){if(WT(n))return N.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=ml(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let s=X(...i);return this.fs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ss(n,l,s,u.readTime)?this.gs(e,ml(n,null,"F")):this.Ds(e,l,n,u)}))})))}ps(e,n,r,o){return WT(n)||o.isEqual(W.min())?N.resolve(null):this.fs.getDocuments(e,r).next(i=>{let s=this.bs(n,i);return this.Ss(n,s,r,o)?N.resolve(null):(Qo()<=ne.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Yo(n)),this.Ds(e,s,n,jP(o,sa)).next(c=>c))})}bs(e,n){let r=new je(eS(e));return n.forEach((o,i)=>{zl(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(o)>0)}ys(e,n,r){return Qo()<=ne.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.fs.getDocumentsMatchingQuery(e,n,Wr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next(i=>(n.forEach(s=>{i=i.insert(s.key,s)}),i))}};var Lm="LocalStore",zO=3e8,Jg=class{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Ie(ee),this.Fs=new An(i=>Mm(i),xm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vg(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}};function qO(t,e,n,r){return new Jg(t,e,n,r)}async function wS(t,e){let n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(i=>(o=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{let s=[],c=[],u=X();for(let l of o){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of i){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ns:l,removedBatchIds:s,addedBatchIds:c}))})})}function GO(t,e){let n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let o=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),y=N.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(R=>{let M=l.docVersions.get(D);de(M!==null,48541),R.version.compareTo(M)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=X();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function TS(t){let e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function WO(t,e){let n=q(t),r=e.snapshotVersion,o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let s=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;let c=[];e.targetChanges.forEach((h,p)=>{let m=o.get(p);if(!m)return;c.push(n.li.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(qe.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),o=o.insert(p,y),(function(R,M,L){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=zO?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,h)&&c.push(n.li.updateTargetData(i,y))});let u=Rn(),l=X();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),c.push(KO(i,s,e.documentUpdates).next(h=>{u=h.Bs,l=h.Ls})),!r.isEqual(W.min())){let h=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(h)}return N.waitFor(c).next(()=>s.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,l)).next(()=>u)}).then(i=>(n.vs=o,i))}function KO(t,e,n){let r=X(),o=X();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=Rn();return n.forEach((c,u)=>{let l=i.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(o=o.add(c)),u.isNoDocument()&&u.version.isEqual(W.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):k(Lm,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Bs:s,Ls:o}})}function QO(t,e){let n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YO(t,e){let n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.li.getTargetData(r,e).next(i=>i?(o=i,N.resolve(o)):n.li.allocateTargetId(r).next(s=>(o=new ha(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next(()=>o))))}).then(r=>{let o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Zg(t,e,n){let r=q(t),o=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,s=>r.persistence.referenceDelegate.removeTarget(s,o))}catch(s){if(!vi(s))throw s;k(Lm,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function ib(t,e,n){let r=q(t),o=W.min(),i=X();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=q(u),m=p.Fs.get(h);return m!==void 0?N.resolve(p.vs.get(m)):p.li.getTargetData(l,h)})(r,s,Kt(e)).next(c=>{if(c)return o=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,c.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?o:W.min(),n?i:X())).next(c=>(JO(r,uO(e),c),{documents:c,ks:i})))}function JO(t,e,n){let r=t.Ms.get(e)||W.min();n.forEach((o,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}var Sl=class{constructor(){this.activeTargetIds=gO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xg=class{constructor(){this.vo=new Sl,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var em=class{Mo(e){}shutdown(){}};var sb="ConnectivityMonitor",Cl=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){k(sb,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){k(sb,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tl=null;function tm(){return tl===null?tl=(function(){return 268435456+Math.round(2147483648*Math.random())})():tl++,"0x"+tl.toString(16)}var Yp="RestConnection",ZO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},nm=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===pl?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,i){let s=tm(),c=this.Qo(e,n.toUriEncodedString());k(Yp,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,o,i);let{host:l}=new URL(c),h=Wu(l);return this.zo(e,c,u,r,h).then(p=>(k(Yp,`Received RPC '${e}' ${s}: `,p),p),p=>{throw er(Yp,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}jo(e,n,r,o,i,s){return this.Wo(e,n,r,o,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,i)=>e[i]=o),r&&r.headers.forEach((o,i)=>e[i]=o)}Qo(e,n){let r=ZO[e],o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}};var rm=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var Je="WebChannelConnection",ta=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(o){setTimeout(()=>{throw o},0)}})},Dl=class t extends nm{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!t.c_){let e=Gp();ta(e,qp.STAT_EVENT,n=>{n.stat===Zu.PROXY?k(Je,"STAT_EVENT: detected buffering proxy"):n.stat===Zu.NOPROXY&&k(Je,"STAT_EVENT: detected no buffering proxy")}),t.c_=!0}}zo(e,n,r,o,i){let s=tm();return new Promise((c,u)=>{let l=new $p;l.setWithCredentials(!0),l.listenOnce(zp.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ea.NO_ERROR:let p=l.getResponseJson();k(Je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case ea.TIMEOUT:k(Je,`RPC '${e}' ${s} timed out`),u(new F(A.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:let m=l.getStatus();if(k(Je,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let R=(function(L){let Q=L.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(Q)>=0?Q:A.UNKNOWN})(D.status);u(new F(R,D.message))}else u(new F(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(A.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{k(Je,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(o);k(Je,`RPC '${e}' ${s} sending request:`,o),l.send(n,"POST",h,r,15)})}T_(e,n,r){let o=tm(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=i.join("");k(Je,`Creating RPC '${e}' stream ${o}: ${l}`,c);let h=s.createWebChannel(l,c);this.I_(h);let p=!1,m=!1,y=new rm({Ho:D=>{m?k(Je,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(p||(k(Je,`Opening RPC '${e}' stream ${o} transport.`),h.open(),p=!0),k(Je,`RPC '${e}' stream ${o} sending:`,D),h.send(D))},Jo:()=>h.close()});return ta(h,Ko.EventType.OPEN,()=>{m||(k(Je,`RPC '${e}' stream ${o} transport opened.`),y.i_())}),ta(h,Ko.EventType.CLOSE,()=>{m||(m=!0,k(Je,`RPC '${e}' stream ${o} transport closed`),y.o_(),this.E_(h))}),ta(h,Ko.EventType.ERROR,D=>{m||(m=!0,er(Je,`RPC '${e}' stream ${o} transport errored. Name:`,D.name,"Message:",D.message),y.o_(new F(A.UNAVAILABLE,"The operation could not be completed")))}),ta(h,Ko.EventType.MESSAGE,D=>{if(!m){let R=D.data[0];de(!!R,16349);let M=R,L=M?.error||M[0]?.error;if(L){k(Je,`RPC '${e}' stream ${o} received error:`,L);let Q=L.status,oe=(function(Ue){let w=Se[Ue];if(w!==void 0)return dS(w)})(Q),ct=L.message;oe===void 0&&(oe=A.INTERNAL,ct="Unknown error status: "+Q+" with message "+L.message),m=!0,y.o_(new F(oe,ct)),h.close()}else k(Je,`RPC '${e}' stream ${o} received:`,R),y.__(R)}}),t.u_(),setTimeout(()=>{y.s_()},0),y}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Wp()}};function XO(t){return new Dl(t)}function Jp(){return typeof document<"u"?document:null}function _a(t){return new Sg(t,!0)}Dl.c_=!1;var Al=class{constructor(e,n,r=1e3,o=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&k("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var ab="PersistentStream",Rl=class{constructor(e,n,r,o,i,s,c,u){this.Ci=e,this.b_=r,this.S_=o,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Al(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.D_===n&&this.G_(r,o)},r=>{e(()=>{let o=new F(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)})})}G_(e,n){let r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(o=>{r(()=>this.z_(o))}),this.stream.onMessage(o=>{r(()=>++this.F_==1?this.H_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return k(ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(k(ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},om=class extends Rl{constructor(e,n,r,o,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=MO(this.serializer,e),r=(function(i){if(!("targetChange"in i))return W.min();let s=i.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?Qt(s.readTime):W.min()})(e);return this.listener.J_(n,r)}Z_(e){let n={};n.database=Rg(this.serializer),n.addTarget=(function(i,s){let c,u=s.target;if(c=mg(u)?{documents:OO(i,u)}:{query:kO(i,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=fS(i,s.resumeToken);let l=Cg(i,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(W.min())>0){c.readTime=Il(i,s.snapshotVersion.toTimestamp());let l=Cg(i,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=FO(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){let n={};n.database=Rg(this.serializer),n.removeTarget=e,this.K_(n)}},im=class extends Rl{constructor(e,n,r,o,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=PO(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Rg(this.serializer),this.K_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>xO(this.serializer,r))};this.K_(n)}};var sm=class{},am=class extends sm{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new F(A.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Wo(e,Dg(n,r),o,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(A.UNKNOWN,i.toString())})}jo(e,n,r,o,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.jo(e,Dg(n,r),o,s,c,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(A.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}};function ek(t,e,n,r){return new am(t,e,n,r)}var cm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sn(n),this.aa=!1):k("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Xr="RemoteStore",um=class{constructor(e,n,r,o,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(s=>{r.enqueueAndForget(async()=>{ro(this)&&(k(Xr,"Restarting streams for network reachability change."),await(async function(u){let l=q(u);l.Ea.add(4),await Ea(l),l.Va.set("Unknown"),l.Ea.delete(4),await ql(l)})(this))})}),this.Va=new cm(r,o)}};async function ql(t){if(ro(t))for(let e of t.Ra)await e(!0)}async function Ea(t){for(let e of t.Ra)await e(!1)}function bS(t,e){let n=q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Um(n)?jm(n):_i(n).O_()&&Vm(n,e))}function Fm(t,e){let n=q(t),r=_i(n);n.Ia.delete(e),r.O_()&&SS(n,e),n.Ia.size===0&&(r.O_()?r.L_():ro(n)&&n.Va.set("Unknown"))}function Vm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_i(t).Z_(e)}function SS(t,e){t.da.$e(e),_i(t).X_(e)}function jm(t){t.da=new bg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_i(t).start(),t.Va.ua()}function Um(t){return ro(t)&&!_i(t).x_()&&t.Ia.size>0}function ro(t){return q(t).Ea.size===0}function CS(t){t.da=void 0}async function tk(t){t.Va.set("Online")}async function nk(t){t.Ia.forEach((e,n)=>{Vm(t,e)})}async function rk(t,e){CS(t),Um(t)?(t.Va.ha(e),jm(t)):t.Va.set("Unknown")}async function ok(t,e,n){if(t.Va.set("Online"),e instanceof _l&&e.state===2&&e.cause)try{await(async function(o,i){let s=i.cause;for(let c of i.targetIds)o.Ia.has(c)&&(await o.remoteSyncer.rejectListen(c,s),o.Ia.delete(c),o.da.removeTarget(c))})(t,e)}catch(r){k(Xr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nl(t,r)}else if(e instanceof ti?t.da.Xe(e):e instanceof vl?t.da.st(e):t.da.tt(e),!n.isEqual(W.min()))try{let r=await TS(t.localStore);n.compareTo(r)>=0&&await(function(i,s){let c=i.da.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=i.Ia.get(l);h&&i.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(qe.EMPTY_BYTE_STRING,h.snapshotVersion)),SS(i,u);let p=new ha(h.target,u,l,h.sequenceNumber);Vm(i,p)}),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){k(Xr,"Failed to raise snapshot:",r),await Nl(t,r)}}async function Nl(t,e,n){if(!vi(e))throw e;t.Ea.add(1),await Ea(t),t.Va.set("Offline"),n||(n=()=>TS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{k(Xr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ql(t)})}function DS(t,e){return e().catch(n=>Nl(t,n,e))}async function Gl(t){let e=q(t),n=nr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dm;for(;ik(e);)try{let o=await QO(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,sk(e,o)}catch(o){await Nl(e,o)}AS(e)&&RS(e)}function ik(t){return ro(t)&&t.Ta.length<10}function sk(t,e){t.Ta.push(e);let n=nr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function AS(t){return ro(t)&&!nr(t).x_()&&t.Ta.length>0}function RS(t){nr(t).start()}async function ak(t){nr(t).ra()}async function ck(t){let e=nr(t);for(let n of t.Ta)e.ea(n.mutations)}async function uk(t,e,n){let r=t.Ta.shift(),o=Eg.from(r,e,n);await DS(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Gl(t)}async function lk(t,e){e&&nr(t).Y_&&await(async function(r,o){if((function(s){return wO(s)&&s!==A.ABORTED})(o.code)){let i=r.Ta.shift();nr(r).B_(),await DS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,o)),await Gl(r)}})(t,e),AS(t)&&RS(t)}async function cb(t,e){let n=q(t);n.asyncQueue.verifyOperationInProgress(),k(Xr,"RemoteStore received new credentials");let r=ro(n);n.Ea.add(3),await Ea(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ql(n)}async function dk(t,e){let n=q(t);e?(n.Ea.delete(2),await ql(n)):e||(n.Ea.add(2),await Ea(n),n.Va.set("Unknown"))}function _i(t){return t.ma||(t.ma=(function(n,r,o){let i=q(n);return i.sa(),new om(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)})(t.datastore,t.asyncQueue,{Zo:tk.bind(null,t),Yo:nk.bind(null,t),t_:rk.bind(null,t),J_:ok.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Um(t)?jm(t):t.Va.set("Unknown")):(await t.ma.stop(),CS(t))})),t.ma}function nr(t){return t.fa||(t.fa=(function(n,r,o){let i=q(n);return i.sa(),new im(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:ak.bind(null,t),t_:lk.bind(null,t),ta:ck.bind(null,t),na:uk.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Gl(t)):(await t.fa.stop(),t.Ta.length>0&&(k(Xr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var lm=class t{constructor(e,n,r,o,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=i,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,i){let s=Date.now()+r,c=new t(e,n,s,o,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bm(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),vi(t))return new F(A.UNAVAILABLE,`${e}: ${t}`);throw t}var ma=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let o=n.getNext().key,i=r.getNext().key;if(!o.isEqual(i))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ml=class{constructor(){this.ga=new Ie(V.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):j(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},eo=class t{constructor(e,n,r,o,i,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,o,i){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,ma.emptySet(n),s,r,o,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}};var dm=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}},fm=class{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let o=q(n),i=o.queries;o.queries=ub(),i.forEach((s,c)=>{for(let u of c.ba)u.onError(r)})})(this,new F(A.ABORTED,"Firestore shutting down"))}};function ub(){return new An(t=>Xb(t),$l)}async function fk(t,e){let n=q(t),r=3,o=e.query,i=n.queries.get(o);i?!i.Sa()&&e.Da()&&(r=2):(i=new dm,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(o,!0);break;case 1:i.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(s){let c=Bm(s,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(c)}n.queries.set(o,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Hm(n)}async function hk(t,e){let n=q(t),r=e.query,o=3,i=n.queries.get(r);if(i){let s=i.ba.indexOf(e);s>=0&&(i.ba.splice(s,1),i.ba.length===0?o=e.Da()?0:1:!i.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pk(t,e){let n=q(t),r=!1;for(let o of e){let i=o.query,s=n.queries.get(i);if(s){for(let c of s.ba)c.Fa(o)&&(r=!0);s.wa=o}}r&&Hm(n)}function gk(t,e,n){let r=q(t),o=r.queries.get(e);if(o)for(let i of o.ba)i.onError(n);r.queries.delete(e)}function Hm(t){t.Ca.forEach(e=>{e.next()})}var hm,lb;(lb=hm||(hm={})).Ma="default",lb.Cache="cache";var pm=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let o of e.docChanges)o.type!==3&&r.push(o);e=new eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hm.Cache}};var xl=class{constructor(e){this.key=e}},Pl=class{constructor(e){this.key=e}},gm=class{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=X(),this.mutatedKeys=X(),this.eu=eS(e),this.tu=new ma(this.eu)}get nu(){return this.Za}ru(e,n){let r=n?n.iu:new Ml,o=n?n.tu:this.tu,i=n?n.mutatedKeys:this.mutatedKeys,s=o,c=!1,u=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,l=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((h,p)=>{let m=o.get(h),y=zl(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?D!==R&&(r.track({type:3,doc:y}),M=!0):this.su(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(c=!0)),M&&(y?(s=s.add(y),i=R?i.add(h):i.delete(h)):(s=s.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Ss:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,D){let R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Vt:M})}};return R(y)-R(D)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),o=o??!1;let c=n&&!o?this._u():[],u=this.Ya.size===0&&this.current&&!o?1:0,l=u!==this.Xa;return this.Xa=u,s.length!==0||l?{snapshot:new eo(this.query,e.tu,i,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ml,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=X(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Pl(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new xl(r))}),n}cu(e){this.Za=e.ks,this.Ya=X();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},$m="SyncEngine",mm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ym=class{constructor(e){this.key=e,this.hu=!1}},vm=class{constructor(e,n,r,o,i,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new An(c=>Xb(c),$l),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ie(V.comparator),this.Au=new Map,this.Vu=new ga,this.du={},this.mu=new Map,this.fu=pa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function mk(t,e,n=!0){let r=kS(t),o,i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.lu()):o=await NS(r,e,n,!0),o}async function yk(t,e){let n=kS(t);await NS(n,e,!0,!1)}async function NS(t,e,n,r){let o=await YO(t.localStore,Kt(e)),i=o.targetId,s=t.sharedClientState.addLocalQueryTarget(i,n),c;return r&&(c=await vk(t,e,i,s==="current",o.resumeToken)),t.isPrimaryClient&&n&&bS(t.remoteStore,o),c}async function vk(t,e,n,r,o){t.pu=(p,m,y)=>(async function(R,M,L,Q){let oe=M.view.ru(L);oe.Ss&&(oe=await ib(R.localStore,M.query,!1).then(({documents:w})=>M.view.ru(w,oe)));let ct=Q&&Q.targetChanges.get(M.targetId),Tt=Q&&Q.targetMismatches.get(M.targetId)!=null,Ue=M.view.applyChanges(oe,R.isPrimaryClient,ct,Tt);return fb(R,M.targetId,Ue.au),Ue.snapshot})(t,p,m,y);let i=await ib(t.localStore,e,!0),s=new gm(e,i.ks),c=s.ru(i.documents),u=fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),l=s.applyChanges(c,t.isPrimaryClient,u);fb(t,n,l.au);let h=new mm(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function _k(t,e,n){let r=q(t),o=r.Tu.get(e),i=r.Iu.get(o.targetId);if(i.length>1)return r.Iu.set(o.targetId,i.filter(s=>!$l(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zg(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Fm(r.remoteStore,o.targetId),_m(r,o.targetId)}).catch(yi)):(_m(r,o.targetId),await Zg(r.localStore,o.targetId,!0))}async function Ek(t,e){let n=q(t),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fm(n.remoteStore,r.targetId))}async function Ik(t,e,n){let r=Ak(t);try{let o=await(function(s,c){let u=q(s),l=be.now(),h=c.reduce((y,D)=>y.add(D.key),X()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Rn(),R=X();return u.xs.getEntries(y,h).next(M=>{D=M,D.forEach((L,Q)=>{Q.isValidDocument()||(R=R.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(M=>{p=M;let L=[];for(let Q of c){let oe=IO(Q,p.get(Q.key).overlayedDocument);oe!=null&&L.push(new Nn(Q.key,oe,Gb(oe.value.mapValue),Xn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,c)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:nS(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(s,c,u){let l=s.du[s.currentUser.toKey()];l||(l=new Ie(ee)),l=l.insert(c,u),s.du[s.currentUser.toKey()]=l})(r,o.batchId,n),await Ia(r,o.changes),await Gl(r.remoteStore)}catch(o){let i=Bm(o,"Failed to persist write");n.reject(i)}}async function MS(t,e){let n=q(t);try{let r=await WO(n.localStore,e);e.targetChanges.forEach((o,i)=>{let s=n.Au.get(i);s&&(de(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?s.hu=!0:o.modifiedDocuments.size>0?de(s.hu,14607):o.removedDocuments.size>0&&(de(s.hu,42227),s.hu=!1))}),await Ia(n,r,e)}catch(r){await yi(r)}}function db(t,e,n){let r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let o=[];r.Tu.forEach((i,s)=>{let c=s.view.va(e);c.snapshot&&o.push(c.snapshot)}),(function(s,c){let u=q(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.ba)m.va(c)&&(l=!0)}),l&&Hm(u)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wk(t,e,n){let r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let o=r.Au.get(e),i=o&&o.key;if(i){let s=new Ie(V.comparator);s=s.insert(i,xt.newNoDocument(i,W.min()));let c=X().add(i),u=new yl(W.min(),new Map,new Ie(ee),s,c);await MS(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),zm(r)}else await Zg(r.localStore,e,!1).then(()=>_m(r,e,n)).catch(yi)}async function Tk(t,e){let n=q(t),r=e.batch.batchId;try{let o=await GO(n.localStore,e);PS(n,r,null),xS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ia(n,o)}catch(o){await yi(o)}}async function bk(t,e,n){let r=q(t);try{let o=await(function(s,c){let u=q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);PS(r,e,n),xS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ia(r,o)}catch(o){await yi(o)}}function xS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function PS(t,e,n){let r=q(t),o=r.du[r.currentUser.toKey()];if(o){let i=o.get(e);i&&(n?i.reject(n):i.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||OS(t,r)})}function OS(t,e){t.Eu.delete(e.path.canonicalString());let n=t.Ru.get(e);n!==null&&(Fm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),zm(t))}function fb(t,e,n){for(let r of n)r instanceof xl?(t.Vu.addReference(r.key,e),Sk(t,r)):r instanceof Pl?(k($m,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||OS(t,r.key)):j(19791,{wu:r})}function Sk(t,e){let n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(k($m,"New document in limbo: "+n),t.Eu.add(r),zm(t))}function zm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new V(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new ym(n)),t.Ru=t.Ru.insert(n,r),bS(t.remoteStore,new ha(Kt(Pm(n.path)),r,"TargetPurposeLimboResolution",Cm.ce))}}async function Ia(t,e,n){let r=q(t),o=[],i=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){o.push(l);let h=Kg.Es(u.targetId,l);i.push(h)}}))}),await Promise.all(s),r.Pu.J_(o),await(async function(u,l){let h=q(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,m=>N.forEach(m.Ts,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>N.forEach(m.Is,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!vi(p))throw p;k(Lm,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.vs.get(m),D=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(D);h.vs=h.vs.insert(m,R)}}})(r.localStore,i))}async function Ck(t,e){let n=q(t);if(!n.currentUser.isEqual(e)){k($m,"User change. New user:",e.toKey());let r=await wS(n.localStore,e);n.currentUser=e,(function(i,s){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new F(A.CANCELLED,s))})}),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ia(n,r.Ns)}}function Dk(t,e){let n=q(t),r=n.Au.get(e);if(r&&r.hu)return X().add(r.key);{let o=X(),i=n.Iu.get(e);if(!i)return o;for(let s of i){let c=n.Tu.get(s);o=o.unionWith(c.view.nu)}return o}}function kS(t){let e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.Pu.J_=pk.bind(null,e.eventManager),e.Pu.yu=gk.bind(null,e.eventManager),e}function Ak(t){let e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bk.bind(null,e),e}var qm=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=_a(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return qO(this.persistence,new Yg,n.initialUser,this.serializer)}Cu(n){return new Tl(Wg.Vi,this.serializer)}Du(n){return new Xg}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),Ol=class extends qm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof bl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Og(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new Tl(r=>bl.Vi(r,n),this.serializer)}};var LS=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>db(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ck.bind(null,this.syncEngine),await dk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new fm})()}createDatastore(n){let r=_a(n.databaseInfo.databaseId),o=XO(n.databaseInfo);return ek(n.authCredentials,n.appCheckCredentials,o,r)}createRemoteStore(n){return(function(o,i,s,c,u){return new um(o,i,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>db(this.syncEngine,r,0),(function(){return Cl.v()?new Cl:new em})())}createSyncEngine(n,r){return(function(i,s,c,u,l,h,p){let m=new vm(i,s,c,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let o=q(r);k(Xr,"RemoteStore shutting down."),o.Ea.add(5),await Ea(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var Em=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var rr="FirestoreClient",Im=class{constructor(e,n,r,o,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Ve.UNAUTHENTICATED,this.clientId=Gr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async s=>{k(rr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(k(rr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Zp(t,e){t.asyncQueue.verifyOperationInProgress(),k(rr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await wS(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hb(t,e){t.asyncQueue.verifyOperationInProgress();let n=await Rk(t);k(rr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>cb(e.remoteStore,o)),t._onlineComponents=e}async function Rk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k(rr,"Using user provided OfflineComponentProvider");try{await Zp(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===A.FAILED_PRECONDITION||o.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;er("Error using user provided cache. Falling back to memory cache: "+n),await Zp(t,new qm)}}else k(rr,"Using default OfflineComponentProvider"),await Zp(t,new Ol(void 0));return t._offlineComponents}async function FS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(k(rr,"Using user provided OnlineComponentProvider"),await hb(t,t._uninitializedComponentsProvider._online)):(k(rr,"Using default OnlineComponentProvider"),await hb(t,new LS))),t._onlineComponents}function Nk(t){return FS(t).then(e=>e.syncEngine)}async function Mk(t){let e=await FS(t),n=e.eventManager;return n.onListen=mk.bind(null,e.syncEngine),n.onUnlisten=_k.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ek.bind(null,e.syncEngine),n}function VS(t,e,n={}){let r=new Gt;return t.asyncQueue.enqueueAndForget(async()=>(function(i,s,c,u,l){let h=new Em({next:m=>{h.Nu(),s.enqueueAndForget(()=>hk(i,p)),m.fromCache&&u.source==="server"?l.reject(new F(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new pm(c,h,{includeMetadataChanges:!0,Ka:!0});return fk(i,p)})(await Mk(t),t.asyncQueue,e,n,r)),r.promise}function jS(t,e){let n=new Gt;return t.asyncQueue.enqueueAndForget(async()=>Ik(await Nk(t),e,n)),n.promise}function US(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xk="ComponentProvider",pb=new Map;function Pk(t,e,n,r,o){return new og(t,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,US(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}var BS="firestore.googleapis.com",gb=!0,kl=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BS,this.ssl=gb}else this.host=e.host,this.ssl=e.ssl??gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HO)throw new F(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ib("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=US(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new F(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},di=class{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sl;switch(r.type){case"firstParty":return new tg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=pb.get(n);r&&(k(xk,"Removing Datastore"),pb.delete(n),r.terminate())})(this),Promise.resolve()}};function HS(t,e,n,r={}){t=gi(t,di);let o=Wu(e),i=t._getSettings(),s=ie(x({},i),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(aT(`https://${c}`),uT("Firestore",!0)),i.host!==BS&&i.host!==c&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ie(x({},i),{host:c,ssl:o,emulatorOptions:r});if(!Ur(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Ve.MOCK_USER;else{l=cT(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new F(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ve(p)}t._authCredentials=new Xp(new il(l,h))}}var fi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ze=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mi(n,t._jsonSchema))return new t(e,r||null,new V(ve.fromString(n.referencePath)))}};Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:Te("string",Ze._jsonSchemaVersion),referencePath:Te("string")};var Tn=class t extends fi{constructor(e,n,r){super(e,n,Pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new V(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Gm(t,e,...n){if(t=Br(t),Eb("collection","path",e),t instanceof di){let r=ve.fromString(e,...n);return kT(r),new Tn(t,null,r)}{if(!(t instanceof Ze||t instanceof Tn))throw new F(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return kT(r),new Tn(t.firestore,null,r)}}function Wm(t,e,...n){if(t=Br(t),arguments.length===1&&(e=Gr.newId()),Eb("doc","path",e),t instanceof di){let r=ve.fromString(e,...n);return OT(r),new Ze(t,null,new V(r))}{if(!(t instanceof Ze||t instanceof Tn))throw new F(A.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return OT(r),new Ze(t.firestore,t instanceof Tn?t.converter:null,new V(r))}}var mb="AsyncQueue",Ll=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Al(this,"async_queue_retry"),this._c=()=>{let r=Jp();r&&k(mb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Jp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Gt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!vi(e))throw e;k(mb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Sn("INTERNAL UNHANDLED ERROR: ",yb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let o=lm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(o),o}uc(){this.nc&&j(47125,{Pc:yb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function yb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var to=class extends di{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new Ll,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ll(e),this._firestoreClient=void 0,await e}}};function Km(t,e){let n=typeof t=="object"?t:AT(),r=typeof t=="string"?t:e||pl,o=ST(n,"firestore").getImmediate({identifier:r});if(!o._initialized){let i=sT("firestore");i&&HS(o,...i)}return o}function Wl(t){if(t._terminated)throw new F(A.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ok(t),t._firestoreClient}function Ok(t){let e=t._freezeSettings(),n=Pk(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Im(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(o){let i=o?._online.build();return{_offline:o?._offline.build(i),_online:i}})(t._componentsProvider))}var Yt=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qe.fromBase64String(e))}catch(n){throw new F(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mi(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Yt._jsonSchemaVersion="firestore/bytes/1.0",Yt._jsonSchema={type:Te("string",Yt._jsonSchemaVersion),bytes:Te("string")};var hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ya=class{constructor(e){this._methodName=e}};var bn=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(mi(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:Te("string",bn._jsonSchemaVersion),latitude:Te("number"),longitude:Te("number")};var Jt=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==o[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mi(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jt._jsonSchemaVersion="firestore/vectorValue/1.0",Jt._jsonSchema={type:Te("string",Jt._jsonSchemaVersion),vectorValues:Te("object")};var kk=/^__.*__$/,wm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zr(e,this.data,n,this.fieldTransforms)}};function $S(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{dataSource:t})}}var Tm=class t{constructor(e,n,r,o,i,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(x(x({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Fl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if($S(this.dataSource)&&kk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},bm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_a(e)}createContext(e,n,r,o=!1){return new Tm({dataSource:e,methodName:n,targetDoc:r,path:at.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zS(t){let e=t._freezeSettings(),n=_a(t._databaseId);return new bm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qS(t,e,n,r,o,i={}){let s=t.createContext(i.merge||i.mergeFields?2:0,e,n,o);QS("Data must be an object, but it was:",s,r);let c=WS(r,s),u,l;if(i.merge)u=new qt(s.fieldMask),l=s.fieldTransforms;else if(i.mergeFields){let h=[];for(let p of i.mergeFields){let m=Kl(e,p,n);if(!s.contains(m))throw new F(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Fk(h,m)||h.push(m)}u=new qt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new wm(new wt(c),u,l)}function GS(t,e){if(KS(t=Br(t)))return QS("Unsupported field value:",e,t),WS(t,e);if(t instanceof ya)return(function(r,o){if(!$S(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);let i=r._toFieldTransform(o);i&&o.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){let i=[],s=0;for(let c of r){let u=GS(c,o.childContextForArray(s));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),s++}return{arrayValue:{values:i}}})(t,e)}return(function(r,o){if((r=Br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mO(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let i=be.fromDate(r);return{timestampValue:Il(o.serializer,i)}}if(r instanceof be){let i=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Il(o.serializer,i)}}if(r instanceof bn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yt)return{bytesValue:fS(o.serializer,r._byteString)};if(r instanceof Ze){let i=o.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw o.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:km(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Jt)return(function(s,c){let u=s instanceof Jt?s.toArray():s;return{mapValue:{fields:{[Am]:{stringValue:Rm},[ri]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return Om(c.serializer,h)})}}}}}})(r,o);if(_S(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${jl(r)}`)})(t,e)}function WS(t,e){let n={};return Fb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,o)=>{let i=GS(o,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function KS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof bn||t instanceof Yt||t instanceof Ze||t instanceof ya||t instanceof Jt||_S(t))}function QS(t,e,n){if(!KS(n)||!wb(n)){let r=jl(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Kl(t,e,n){if((e=Br(e))instanceof hi)return e._internalPath;if(typeof e=="string")return YS(t,e);throw Fl("Field path arguments must be of type string or ",t,!1,void 0,n)}var Lk=new RegExp("[~\\*/\\[\\]]");function YS(t,e,n){if(e.search(Lk)>=0)throw Fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hi(...e.split("."))._internalPath}catch{throw Fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fl(t,e,n,r,o){let i=r&&!r.isEmpty(),s=o!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||s)&&(u+=" (found",i&&(u+=` in field ${r}`),s&&(u+=` in document ${o}`),u+=")"),new F(A.INVALID_ARGUMENT,c+t+u)}function Fk(t,e){return t.some(n=>n.isEqual(e))}var va=class{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return no(e,(o,i)=>{r[o]=this.convertValue(i,n)}),r}convertVectorValue(e){let n=e.fields?.[ri].arrayValue?.values?.map(r=>ye(r.doubleValue));return new Jt(n)}convertGeoPoint(e){return new bn(ye(e.latitude),ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Hl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){let n=Cn(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ve.fromString(e);de(vS(r),9688,{name:e});let o=new ua(r.get(1),r.get(3)),i=new V(r.popFirst(5));return o.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}};var Vl=class extends va{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yt(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}};var JS="@firebase/firestore",ZS="4.10.0";var Ql=class{constructor(e,n,r,o,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Qm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let n=this._document.data.field(Kl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Qm=class extends Ql{data(){return super.data()}};function Bk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Hk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ei=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ii=class t extends Ql{constructor(e,n,r,o,i,s){super(e,n,r,o,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new wi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Kl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ii._jsonSchema={type:Te("string",Ii._jsonSchemaVersion),bundleSource:Te("string","DocumentSnapshot"),bundleName:Te("string"),bundle:Te("string")};var wi=class extends Ii{data(e={}){return super.data(e)}},Ti=class t{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ei(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wi(this._firestore,this._userDataWriter,r.key,r,new Ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,i){if(o._snapshot.oldDocs.isEmpty()){let s=0;return o._snapshot.docChanges.map(c=>{let u=new wi(o._firestore,o._userDataWriter,c.doc.key,c.doc,new Ei(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{let u=new wi(o._firestore,o._userDataWriter,c.doc.key,c.doc,new Ei(o._snapshot.mutatedKeys.has(c.doc.key),o._snapshot.fromCache),o.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:$k(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],o=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),o.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function $k(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:t})}}Ti._jsonSchemaVersion="firestore/querySnapshot/1.0",Ti._jsonSchema={type:Te("string",Ti._jsonSchemaVersion),bundleSource:Te("string","QuerySnapshot"),bundleName:Te("string"),bundle:Te("string")};function XS(t){t=gi(t,fi);let e=gi(t.firestore,to),n=Wl(e),r=new Vl(e);return Bk(t._query),VS(n,t._query).then(o=>new Ti(e,r,t,o))}function eC(t,e){let n=gi(t.firestore,to),r=Wm(t),o=Hk(t.converter,e),i=zS(t.firestore);return zk(n,[qS(i,"addDoc",r._key,o,t.converter!==null,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}function zk(t,e){let n=Wl(t);return jS(n,e)}(function(e,n=!0){vb(DT),Zs(new _n("firestore",(r,{instanceIdentifier:o,options:i})=>{let s=r.getProvider("app").getImmediate(),c=new to(new al(r.getProvider("auth-internal")),new ul(s,r.getProvider("app-check-internal")),Hb(s,o),s);return i=x({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Zn(JS,ZS,e),Zn(JS,ZS,"esm2020")})();var tC={production:!1,firebase:{apiKey:"AIzaSyDHHlcpgfX50kYngkyVHlUrkl6bUkU9c1Q",authDomain:"tokyo-trip-planner-f9f90.firebaseapp.com",databaseURL:"https://tokyo-trip-planner-f9f90-default-rtdb.europe-west1.firebasedatabase.app",projectId:"tokyo-trip-planner-f9f90",storageBucket:"tokyo-trip-planner-f9f90.firebasestorage.app",messagingSenderId:"864146179312",appId:"1:864146179312:web:5a41432e7f17060d432e35"}};var Yl=class t{placesCollection=Gm(nC,"places");async addPlace(e){await eC(this.placesCollection,ie(x({},e),{createdAt:new Date}))}async getPlaces(){return(await XS(this.placesCollection)).docs.map(n=>x({id:n.id},n.data()))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Gk=(t,e)=>e.id;function Wk(t,e){if(t&1&&(Bt(0,"li",4)(1,"strong"),Pr(2),Ht(),Bt(3,"span",5),Pr(4),Ht()()),t&2){let n=e.$implicit;ys(2),uu(n.name),ys(2),bs(" (",n.category,") ")}}var Jl=class t{constructor(e){this.tripService=e}items=qn([]);async ngOnInit(){await this.loadItems()}async addItem(){await this.tripService.addPlace({name:"Ichiran Ramen",category:"food"}),await this.loadItems()}async loadItems(){let e=await this.tripService.getPlaces();this.items.set(e),console.log(e)}static \u0275fac=function(n){return new(n||t)(ou(Yl))};static \u0275cmp=Is({type:t,selectors:[["app-root"]],decls:10,vars:0,consts:[[1,"text-4xl","font-bold","text-red-500"],[1,"mt-2","text-gray-600"],[1,"mt-4","px-4","py-2","bg-blue-500","text-white","rounded",3,"click"],[1,"mt-6"],[1,"border-b","py-2"],[1,"text-sm","text-gray-500"]],template:function(n,r){n&1&&(Bt(0,"h1",0),Pr(1,"Tokyo Trip Planner \u{1F1EF}\u{1F1F5}"),Ht(),Bt(2,"p",1),Pr(3,"Cuenta atr\xE1s y planificaci\xF3n del viaje"),Ht(),Bt(4,"button",2),cu("click",function(){return r.addItem()}),Pr(5,` A\xF1adir sitio
`),Ht(),Bt(6,"ul",3),Fh(7,Wk,5,2,"li",4,Gk),Ht(),Oo(9,"router-outlet")),n&2&&(ys(7),Vh(r.items()))},dependencies:[qs],encapsulation:2})};var Kk=Bp(tC.firebase),nC=Km(Kk);Jh(Jl,{providers:[wp(Zw)]});export{nC as db};
